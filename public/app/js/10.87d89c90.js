(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{1184:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"access-main q-pa-xl"},[s("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[s("q-expansion-item",{staticClass:"filter fit",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[s("div",{staticClass:"row justify-center q-gutter-md"},[s("q-input",{staticClass:"col-sm-4",attrs:{clearable:"",label:"Name"},on:{input:function(e){return t.filterAccess()}},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}})],1)])],1),t.adminData.length?s("div",{staticClass:"row q-pt-md"},[s("span",{staticClass:"col-sm-7"}),s("q-select",{staticClass:"col-sm-2",staticStyle:{"margin-top":"0","font-size":"12px"},attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],dense:"","emit-value":"","map-options":""},on:{change:t.filterAccess},model:{value:t.filter.per_page,callback:function(e){t.$set(t.filter,"per_page",e)},expression:"filter.per_page"}}),s("span",{staticClass:"col-sm-1"}),s("span",{staticClass:"col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[t._v("\n            "+t._s(t.entries.to)+" out of "+t._s(t.entries.total||t.entries.to))])],1):t._e(),s("div",{staticClass:"row justify-center q-mt-lg"},[t.adminData.length>0?s("table",{staticClass:"q-table loose"},[t._m(0),s("tbody",t._l(t.adminData,(function(e,a){return s("tr",{key:e.id},[s("td",{staticClass:"text-center"},[t._v(t._s(e.name))]),s("td",{staticClass:"text-center"},[s("q-select",{attrs:{options:t.permission_types,"emit-value":"",label:"Standard","map-options":"",multiple:"","use-chips":""},model:{value:e.permissions,callback:function(s){t.$set(e,"permissions",s)},expression:"admin.permissions"}})],1),s("td",{staticClass:"text-center no-wrap"},[s("q-btn",{attrs:{color:"positive",flat:"",icon:"save",size:"sm"},on:{click:function(s){return t.editAccess(e)}}}),s("q-btn",{attrs:{color:"negative",flat:"",icon:"delete",size:"sm"},on:{click:function(e){return t.deleteAccess(a)}}})],1)])})),0)]):t._e()]),t.adminData.length<t.entries.total?s("div",{staticClass:"row justify-center"},[s("q-infinite-scroll",{attrs:{handler:t.refresher,offset:500}},[s("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):t._e()])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("NAME")]),s("th",[t._v("PERMISSIONS")]),s("th")])])}],n=(s("6b54"),s("20d6"),s("967e")),r=s.n(n),o=(s("96cf"),s("fa84")),c=s.n(o),l=(s("ac6a"),s("cadf"),s("06db"),s("4db1")),u=s.n(l),f=s("b178"),p={name:"AccessControl",meta:function(){return{title:"Access Control"}},data:function(){return{activeNames:["1"],filter:{name:"",page:1,per_page:"100"},show_modal:!1,adminData:[],permission_types:[],entries:{to:"",total:""},minFilterLength:3}},computed:{},created:function(){this.fetchPermissions(),this.filterAccess()},methods:{refresher:function(t,e){this.filter.page++,this.$axios.get("access/filter",{params:this.filter}).then(function(t){var e;(e=this.adminData).push.apply(e,u()(t.data.data)),this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){this.$nprogress.done(),console.error(t)}.bind(this))},filterAccess:Object(f["e"])((function(){this.filter.page=1,this.$axios.get("accesscontrol/filter",{params:this.filter}).then(function(t){this.adminData=t.data.data.data,this.entries.to=t.data.data.to,this.entries.total=t.data.data.total}.bind(this)).catch(function(t){this.$nprogress.done(),console.error(t)}.bind(this))}),1e3),fetchPermissions:function(){var t=this;return c()(r.a.mark((function e(){var s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.permission_types.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$axios.get("accesscontrol/fetchPermissions");case 4:s=e.sent,s.data.status&&(t.permission_types=s.data.permissions);case 6:case"end":return e.stop()}}),e)})))()},editAccess:function(t){var e=this;return c()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$q.dialog({title:"Confirm",message:"Are you sure about this?",ok:!0,cancel:!0,preventClose:!0}).onOk(c()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$axios.post("accesscontrol/edit",t).then(function(t){if(t.data.status){this.showAlert("positive","Access updated successfully");var e=t.data.admin,s=this.adminData.findIndex((function(t){return t.id===e.id}));s<0?this.adminData.unshift():this.adminData[s]=e}else this.showAlert("negative",t.data.msg)}.bind(e)).catch((function(){e.showAlert("negative","Error occurred"),e.$nprogress.done()}));case 2:case"end":return s.stop()}}),s)}))));case 1:case"end":return s.stop()}}),s)})))()},deleteAccess:function(t){var e=this;this.$q.dialog({title:"Confirm",message:"Are you sure about this?",ok:!0,cancel:!0,preventClose:!0}).onOk(c()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$axios.delete("accesscontrol/delete/".concat(e.adminData[t].id));case 2:a=s.sent,!0===a.data.status?(e.showAlert("positive","Access deleted successfully"),e.adminData.splice(t,1)):e.showAlert("negative","Error occurred");case 4:case"end":return s.stop()}}),s)}))))},resetAccessInfo:function(){this.accessInfo.id="",this.accessInfo.type="",this.accessInfo.title="",this.accessInfo.body=""},makeEdit:function(t){this.accessInfo=t,this.show_modal=!0},createAccess:function(){this.show_modal=!0},refreshEntries:function(){this.resetFilterData(),this.filterAccess()},resetFilterData:function(){this.filter.type="",this.filter.date_range.from="",this.filter.date_range.to=""},showAlert:function(t,e){this.$q.notify({type:t,message:e,position:"top-right",timeout:5e3})},firstCaps:function(t){if(null!=t)return t.toString().charAt(0).toUpperCase()+t.toString().slice(1).toLowerCase()}},filters:{firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},shortenText:function(t){return t.toString().length<=30?t:t.toString().slice(0,30)+"..."},profileType:function(t){return 0===t?"Borrower":"Lender"}}},d=p,h=(s("6ade"),s("2877")),m=Object(h["a"])(d,a,i,!1,null,"1825121c",null);e["default"]=m.exports},1556:function(t,e,s){},"6ade":function(t,e,s){"use strict";var a=s("1556"),i=s.n(a);i.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"2d78":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white shadow-custom main-section"},[s("section",{staticClass:"row justify-between q-px-lg q-py-lg"},[s("div",{staticClass:"q-mt-auto q-mb-auto text-bold"},[t.customers?s("div",[t._v(t._s(t.customers.total)+" client"+t._s(t.customers.total>1?"s":""))]):s("div",[s("q-skeleton",{attrs:{type:"rect",width:"10rem"}})],1)]),s("div",{staticClass:"q-gutter-md no-wrap action-btns"},[s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{color:"white",icon:"filter_alt",label:"Filter","no-caps":"","text-color":"black",unelevated:""}},[s("q-menu",{attrs:{offset:[0,15],anchor:"bottom right",self:"top right"}},[s("section",{staticStyle:{width:"320px"}},[s("div",{staticClass:"filter-section"},[s("div",{staticClass:"row q-pl-lg q-py-sm text-bold filter-header"},[t._v("Email")]),s("q-input",{staticClass:"q-my-md q-mx-md",attrs:{dense:"",outlined:"",placeholder:"Email"},model:{value:t.filter.email,callback:function(e){t.$set(t.filter,"email",e)},expression:"filter.email"}})],1),s("div",{staticClass:"filter-section"},[s("div",{staticClass:"row q-pl-lg q-py-sm text-bold filter-header"},[t._v("Phone")]),s("q-input",{staticClass:"q-my-md q-mx-md",attrs:{dense:"",outlined:"",placeholder:"Phone"},model:{value:t.filter.phone,callback:function(e){t.$set(t.filter,"phone",e)},expression:"filter.phone"}})],1),s("div",{staticClass:"filter-section"},[s("div",{staticClass:"row q-pl-lg q-py-sm text-bold filter-header"},[t._v("Date")]),s("div",{staticClass:"row justify-around no-wrap q-my-md q-mx-sm"},[s("q-input",{staticClass:"col-5",attrs:{dense:"",outlined:"",placeholder:"From"},on:{click:function(e){return t.$refs.dateFrom.show()}},scopedSlots:t._u([{key:"append",fn:function(){return[s("div",[s("q-popup-proxy",{ref:"dateFrom",attrs:{"context-menu":"","transition-hide":"scale","transition-show":"scale"}},[s("q-date",{attrs:{color:"theme-orange",mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateFrom.hide()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}})],1)],1)]},proxy:!0}]),model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}}),s("q-input",{staticClass:"col-5",attrs:{dense:"",outlined:"",placeholder:"To"},on:{click:function(e){return t.$refs.dateTo.show()}},scopedSlots:t._u([{key:"append",fn:function(){return[s("div",[s("q-popup-proxy",{ref:"dateTo",attrs:{"context-menu":"","transition-hide":"scale","transition-show":"scale"}},[s("q-date",{attrs:{color:"theme-orange",mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateTo.hide()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)],1)]},proxy:!0}]),model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)]),s("div",{staticClass:"filter-section"},[s("div",{staticClass:"row justify-between q-px-md q-py-sm"},[s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{label:"Reset",size:"sm",unelevated:""},on:{click:t.resetFilter}}),s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{color:"orange-4",label:"Filter","no-caps":"",size:"sm","text-color":"white",unelevated:""},on:{click:t.filterCustomers}})],1)])])])],1),s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{color:"orange-4",label:"New Customer","no-caps":"","text-color":"white",unelevated:""},on:{click:t.createCustomer}}),s("json-excel",{staticClass:" inline-block",staticStyle:{"vertical-align":"middle"},attrs:{"export-fields":t.csv_fields,fetch:t.exportData,name:"Customers.csv",type:"csv"}},[s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{color:"white",icon:"description",label:"Export","no-caps":"","text-color":"black",unelevated:""}})],1)],1)]),t.customers?s("section",[t.customers.total?[s("q-markup-table",{staticClass:"no-shadow"},[s("thead",[s("tr",[s("th",{staticClass:"text-center"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Email")]),s("th",{staticClass:"text-left"},[t._v("Phone")]),s("th",{staticClass:"text-left"},[t._v("Address")]),s("th",{staticClass:"text-left"},[t._v("Date Created")]),s("th")])]),s("tbody",t._l(t.customers.data,(function(e,r){return s("tr",{key:t.customers.id,staticClass:"ref_table_body"},[t.processing?t._l(6,(function(t){return s("td",{staticClass:"text-left"},[s("q-skeleton",{attrs:{type:"rect"}})],1)})):[s("td",{staticClass:"text-center",attrs:{title:e.name}},[t._v(t._s(e.name))]),s("td",{staticClass:"text-left",attrs:{title:e.email}},[t._v(t._s(t._f("trimString")(e.email,25)))]),s("td",{staticClass:"text-left",attrs:{title:e.phone}},[t._v(t._s(e.phone))]),s("td",{staticClass:"text-left",attrs:{title:e.full_address}},[t._v("\n                            "+t._s(t._f("trimString")(e.full_address,25))+"\n                        ")]),s("td",{staticClass:"text-left",attrs:{title:e.created_at}},[t._v("\n                            "+t._s(t._f("moment")(e.created_at,"Do MMMM, YYYY"))+"\n                        ")]),s("td",{staticClass:"text-right"},[s("q-btn",{attrs:{color:"primary",flat:"",icon:"more_vert",size:"sm"}},[s("q-menu",{attrs:{offset:[0,15]}},[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return t.editCustomer(e)}}},[s("q-item-section",[t._v("Edit")])],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return t.deleteCustomer(e.id)}}},[s("q-item-section",{staticClass:"text-negative"},[t._v("Delete")])],1)],1)],1)],1)],1)]],2)})),0)]),s("div",{staticClass:"row justify-center q-py-lg items-center"},[s("q-btn",{staticClass:"q-mr-sm text-bold",attrs:{disable:null===t.customers.prev_page_url,color:"primary",flat:"",label:"PREV",size:".9em"},on:{click:function(e){return t.filterCustomers("prev")}}}),s("q-btn",{staticClass:"text-bold",attrs:{disable:null===t.customers.next_page_url,color:"primary",flat:"",label:"NEXT",size:".9em"},on:{click:function(e){return t.filterCustomers("next")}}})],1)]:[s("div",{staticClass:"q-py-lg no-wrap text-center items-center text-grey"},[s("q-icon",{staticStyle:{"font-size":"2rem"},attrs:{name:"notes"}}),s("div",{staticClass:"text-h6 text-center"},[t._v("No Customers")]),s("div",{staticClass:"text-center q-pt-lg"},[t._v("\n                    There're no customers yet. It could also be as a result of the filter query.\n                ")])],1)]],2):s("section",[s("q-markup-table",{staticClass:"no-shadow",attrs:{highlight:"",responsive:"",separator:"none"}},[s("tbody",t._l(5,(function(e){return s("tr",t._l(6,(function(t){return s("td",{staticClass:"text-left"},[s("q-skeleton",{attrs:{type:"rect"}})],1)})),0)})),0)])],1),s("EditCustomer",{attrs:{customer:t.selectedCustomer}})],1)},a=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("967e")),i=s.n(o),n=(s("96cf"),s("fa84")),c=s.n(n),l=s("c47a"),u=s.n(l),d=s("1bdd"),m=s("5935"),f=s("a6c2");function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(Object(s),!0).forEach((function(e){u()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={name:"CustomersListing",meta:function(){return{title:"View All Customers - Invoices"}},components:{EditCustomer:f["a"],JsonExcel:d["a"]},data:function(){return{dialog:!1,selectedCustomer:null,filter:{email:"",phone:"",date_range:{from:"",to:""},page:1,per_page:"20"},csv_fields:{Name:"name",Email:"email",Phone:"phone",Address:"address",City:"city",State:"state",Country:"country.name","Date Created":"created_at"},entries:{to:"",total:""},processing:!1}},computed:v({},Object(m["b"])("clients",["customers","editCustomerModal"])),created:function(){this.filterCustomers()},methods:{exportData:function(){var t=this;return c()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("customers/filter",{params:v({export:!0},t.filter)});case 2:return s=e.sent,e.abrupt("return",s.data.data);case 4:case"end":return e.stop()}}),e)})))()},filterCustomers:function(t){var e=this;return c()(i.a.mark((function s(){var r,a,o,n,c;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.processing=!0,"next"===t?e.filter.page++:"prev"===t?e.filter.page--:e.filter.page=1,s.next=4,e.$axios.get("customers/filter",{params:e.filter});case 4:r=s.sent,a=r.data,o=a.status,n=a.msg,c=a.data,o?e.customers=c:e.$q.notify({color:"warning",message:n,icon:"fa fa-exclamation-circle"}),e.processing=!1;case 8:case"end":return s.stop()}}),s)})))()},gotoDetails:function(t){this.$router.push("customers/".concat(t))},createCustomer:function(){this.editCustomerModal=!0},editCustomer:function(t){this.selectedCustomer=v({},t),this.editCustomerModal=!0},deleteCustomer:function(t){var e=this;return c()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$q.dialog({title:"Confirm",message:"The action is irreversible. Are you sure you want to do this?",cancel:!0,persistent:!0,color:"positive"}).onOk(c()(i.a.mark((function s(){var r,a,o,n;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.processing=!0,s.next=3,e.$axios.delete("customer/".concat(t));case 3:r=s.sent,a=r.data,o=a.status,n=a.msg,a.data,o?(e.$q.notify({color:"positive",position:"top-right",message:n,icon:"check_circle"}),e.customers.total--,_.remove(e.customers.data,(function(e){return e.id===t}))):e.$q.notify({color:"negative",position:"top-right",message:n,icon:"cancel"}),e.processing=!1;case 7:case"end":return s.stop()}}),s)}))));case 1:case"end":return s.stop()}}),s)})))()},resetFilter:function(){this.filter.email="",this.filter.date_range={from:"",to:""},this.filter.status=[]},firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},filters:{}},b=h,C=(s("96ba"),s("2877")),g=Object(C["a"])(b,r,a,!1,null,"931e8746",null);e["default"]=g.exports},"3b7f":function(t,e,s){},"3d1e":function(t,e,s){},"637a":function(t,e,s){"use strict";var r=s("3b7f"),a=s.n(r);a.a},"96ba":function(t,e,s){"use strict";var r=s("3d1e"),a=s.n(r);a.a},a685:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var r=s("6fea"),a=s("bc3a"),o=s.n(a),i={fetchCountries:function(){return o.a.get(r["a"].api("utils/fetchCountries"))},fetchCurrencies:function(){return o.a.get(r["a"].api("utils/fetchCurrencies"))}}},a6c2:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-dialog",{on:{"before-show":t.setFormValues},model:{value:t.editCustomerModal,callback:function(e){t.editCustomerModal=e},expression:"editCustomerModal"}},[s("q-card",{staticClass:"q-pa-sm",staticStyle:{"min-width":"500px","max-width":"70vw"}},[s("q-card-section",{staticClass:"header row items-center q-card--bordered"},[s("div",{staticClass:"title text-bold"},[t._v("Add New Customer")]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-auto",attrs:{dense:"",flat:"",icon:"close",size:"sm"}})],1),s("q-card-section",[s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Name")]),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("name"),name:"name",outlined:"",placeholder:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Phone")]),s("q-input",{attrs:{outlined:"",placeholder:"Phone"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Email")]),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("email"),name:"email",outlined:"",placeholder:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Address")]),s("q-input",{attrs:{outlined:"",placeholder:"Address"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}}),s("div",{staticClass:"row q-pt-md justify-between"},[s("div",{staticClass:"col-sm-5"},[s("div",{staticClass:" q-pb-sm "},[t._v("City")]),s("q-input",{attrs:{outlined:"",placeholder:"City"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),s("div",{staticClass:"col-sm-5"},[s("div",{staticClass:" q-pb-sm "},[t._v("State")]),s("q-input",{attrs:{outlined:"",placeholder:"State"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}})],1)]),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Country")]),s("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("country"),options:t.countries_options,"bg-color":"white",dense:"","emit-value":"","fill-input":"","hide-selected":"","input-debounce":"200","map-options":"",name:"country",outlined:"","use-input":""},on:{filter:t.filterFn},model:{value:t.form.country_id,callback:function(e){t.$set(t.form,"country_id",e)},expression:"form.country_id"}})],1),s("q-card-actions",{staticClass:"q-pb-md q-pt-lg",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"shadow-btn text-bold q-mr-sm",attrs:{label:"Cancel","no-caps":"",unelevated:""}}),s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{loading:t.processing,color:"orange-4",label:"Save Customer","no-caps":"",unelevated:""},on:{click:t.saveCustomer}})],1)],1)],1)],1)},a=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("7f7f"),s("20d6"),s("967e")),i=s.n(o),n=(s("96cf"),s("fa84")),c=s.n(n),l=s("c47a"),u=s.n(l),d=s("5935"),m=s("a685");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){u()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var v=[],h={name:"EditCustomer",props:["customer","email"],data:function(){return{form:{},countries_options:null,processing:!1}},computed:p({},Object(d["b"])("clients",["customers","editCustomerModal"])),created:function(){this.fetchCountries()},methods:{setFormValues:function(){this.form=this.customer||{name:"",phone:"",email:this.email||"",address:"",city:"",state:"",country_id:162}},filterFn:function(t,e){var s=this;e((function(){if(""===t)s.countries_options=v;else{var e=t.toLowerCase();s.countries_options=v.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},fetchCountries:function(){var t=this;return c()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].fetchCountries();case 2:s=e.sent,s.data.status?(v=s.data.countries,t.countries_options=v,t.form.country=162):t.$q.notify({color:"negative",icon:"close",message:s.data.msg,position:"top-right"});case 4:case"end":return e.stop()}}),e)})))()},saveCustomer:function(){var t=this;return c()(i.a.mark((function e(){var s,r,a,o,n,c,l;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(s=e.sent,!s){e.next=11;break}return t.processing=!0,e.next=7,t.$axios.post("customer/edit",t.form);case 7:r=e.sent,a=r.data,o=a.status,n=a.msg,c=a.data.customer,o?(t.$q.notify({color:"positive",position:"top-right",message:n,icon:"check_circle"}),t.editCustomerModal=!1,t.resetForm(),t.customer?(l=t.customers.data.findIndex((function(e){return e.id===t.customer.id})),t.$set(t.customers.data,l,c)):(t.customers.total++,t.customers.data.unshift(c))):t.$q.notify({color:"negative",position:"top-right",message:n,icon:"cancel"}),t.processing=!1;case 11:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.form.name="",this.form.phone="",this.form.email="",this.form.address="",this.form.city="",this.form.state="",this.form.country_id=null}}},b=h,C=(s("637a"),s("2877")),g=Object(C["a"])(b,r,a,!1,null,"2fc476a8",null);e["a"]=g.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"3b7f":function(t,e,s){},"637a":function(t,e,s){"use strict";var i=s("3b7f"),a=s.n(i);a.a},7334:function(t,e,s){"use strict";var i=s("b7cc8"),a=s.n(i);a.a},a0e0:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("q-btn",{staticClass:"text-bold sm-btn q-mb-md",attrs:{color:"primary",flat:"",icon:"arrow_back_ios",label:"Back to Invoices","no-caps":"",to:"/invoices"}}),s("div",{staticClass:"bg-white shadow-custom main-section"},[s("section",{staticClass:"row justify-between q-px-lg q-py-lg"},[s("div",{staticClass:"text-bold text-16"},[t._v("Create Invoice")]),s("div",{staticClass:"q-gutter-md"},[s("q-btn",{staticClass:"shadow-btn text-bold sm-btn",attrs:{color:"white",label:"Save Invoice","no-caps":"","text-color":"black",unelevated:""},on:{click:function(e){return t.saveInvoice(!1)}}}),s("q-btn",{staticClass:"shadow-btn text-bold sm-btn",attrs:{color:"orange-4",label:"Send Invoice","no-caps":"","text-color":"white",unelevated:""},on:{click:function(e){return t.saveInvoice(!0)}}})],1)]),s("section",{staticClass:"row q-gutter-md q-px-lg q-py-lg"},[s("div",{staticClass:"col-5"},[s("div",{staticClass:"row justify-between subject-header"},[s("div",[t._v("To")]),s("div",{staticClass:"link-btn",on:{click:t.addCustomer}},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"add"}}),s("span",[t._v("New Customer")])],1)]),s("q-select",{attrs:{hint:t.errors.first("email"),name:"email","input-debounce":"0","bg-color":"white",outlined:"","use-input":"","hide-selected":"","fill-input":"",options:t.customers_options,dense:"","emit-value":"","map-options":""},on:{filter:t.filterFn_Customers,"input-value":t.setToEmail},model:{value:t.form.to_email,callback:function(e){t.$set(t.form,"to_email",e)},expression:"form.to_email"}}),t.add_cc_emails?s("div",{staticClass:"link-btn q-pt-md",on:{click:function(e){t.add_cc_emails=!t.add_cc_emails}}},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"remove"}}),s("span",[t._v("Hide multiple emails")])],1):s("div",{staticClass:"link-btn q-pt-md",on:{click:function(e){t.add_cc_emails=!t.add_cc_emails}}},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"add"}}),s("span",[t._v("Send to multiple emails")])],1)],1),s("div",{staticClass:"col-3"},[t._m(0),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:dd-MM-yyyy",expression:"'required|date_format:dd-MM-yyyy'"}],staticClass:"col-5",attrs:{dense:"",name:"Due date",outlined:"",placeholder:"Due Date"},on:{click:function(e){return t.$refs.dueDate.show()}},scopedSlots:t._u([{key:"append",fn:function(){return[s("div",[s("q-popup-proxy",{ref:"dueDate",attrs:{"context-menu":"","transition-hide":"scale","transition-show":"scale"}},[s("q-date",{attrs:{color:"theme-orange",mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dueDate.hide()}},model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}})],1)],1)]},proxy:!0}]),model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}})],1),s("div",{staticClass:"col-3"},[t._m(1),s("q-select",{attrs:{options:t.currency_options,"bg-color":"white",dense:"","emit-value":"","fill-input":"","hide-selected":"","input-debounce":"200","map-options":"",outlined:"","use-input":""},on:{filter:t.filterFn},model:{value:t.form.currency,callback:function(e){t.$set(t.form,"currency",e)},expression:"form.currency"}})],1)]),s("section",{directives:[{name:"show",rawName:"v-show",value:t.add_cc_emails,expression:"add_cc_emails"}],staticClass:"q-gutter-md q-px-lg q-py-lg"},[t._m(2),s("q-input",{attrs:{outlined:"",placeholder:"Enter other emails seperated by comma"},model:{value:t.form.cc_emails,callback:function(e){t.$set(t.form,"cc_emails",e)},expression:"form.cc_emails"}})],1),s("section",{staticClass:"q-px-lg  q-pb-lg"},[t._m(3),t._l(t.form.items.length,(function(e){return s("Item",{key:e,attrs:{closeable:t.form.items.length>1,id:e-1}})})),s("div",{staticClass:"link-btn q-pt-md",on:{click:t.addItem}},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"add"}}),s("span",[t._v("Add another item")])],1)],2),s("section",{staticClass:"q-pl-lg q-pr-xl q-py-lg"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8"},[t._m(4),s("q-input",{staticStyle:{width:"90%"},attrs:{name:"account number",outlined:"",placeholder:"Notes",type:"textarea"},model:{value:t.form.notes,callback:function(e){t.$set(t.form,"notes",e)},expression:"form.notes"}}),t._m(5),s("div",{staticClass:"row justify-between",staticStyle:{width:"90%"}},[s("div",{staticClass:"col-4"},[t._m(6),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("account name"),name:"account name",outlined:"",placeholder:"Account name"},model:{value:t.form.acc_name,callback:function(e){t.$set(t.form,"acc_name",e)},expression:"form.acc_name"}})],1),s("div",{staticClass:"col-4"},[t._m(7),s("q-select",{attrs:{hint:t.errors.first("bank"),name:"bank",options:t.banks_options,"bg-color":"white",dense:"","emit-value":"","fill-input":"","hide-selected":"","input-debounce":"200","map-options":"",outlined:"","use-input":""},on:{filter:t.filterFn_Banks},model:{value:t.form.bank,callback:function(e){t.$set(t.form,"bank",e)},expression:"form.bank"}})],1),s("div",{staticClass:"col-3"},[t._m(8),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|digits:10",expression:"'required|digits:10'"}],attrs:{hint:t.errors.first("account number"),name:"account number",outlined:"",placeholder:"Account Number"},model:{value:t.form.acc_num,callback:function(e){t.$set(t.form,"acc_num",e)},expression:"form.acc_num"}})],1)])],1),s("div",{staticClass:"col-4 summary"},[s("div",{staticClass:"row justify-between"},[s("span",[t._v("Subtotal")]),s("span",[t._v(t._s(t.form.currency)+" "+t._s(t._f("formatAmount")(t.subtotal)))])]),s("div",{staticClass:"row justify-between"},[s("span",[t._v("Shipping Fee")]),s("div",{staticClass:"link-btn"},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"add"}}),s("span",[t._v("Add")]),s("q-popup-edit",{attrs:{"auto-save":""},model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}},[s("q-input",{attrs:{autofocus:"",dense:"",type:"number"},model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}})],1)],1),s("span",[t._v(t._s(t.form.currency)+" "+t._s(t._f("formatAmount")(t.form.shipping_fee)))])]),s("div",{staticClass:"row justify-between"},[s("span",[t._v("Discount")]),s("div",{staticClass:"link-btn"},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"add"}}),s("span",[t._v("Add")]),s("q-popup-edit",{attrs:{"auto-save":""},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}},[s("q-input",{attrs:{autofocus:"",dense:"",type:"number"},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1)],1),s("span",[t._v(t._s(t.form.currency)+" "+t._s(t._f("formatAmount")(t.form.discount)))])]),s("div",{staticClass:"row justify-between"},[s("span",[t._v("VAT")]),s("div",{staticClass:"link-btn"},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"add"}}),s("span",[t._v("Add")]),s("q-popup-edit",{attrs:{"auto-save":""},model:{value:t.form.tax,callback:function(e){t.$set(t.form,"tax",e)},expression:"form.tax"}},[s("q-input",{attrs:{autofocus:"",dense:"",type:"number"},model:{value:t.form.tax,callback:function(e){t.$set(t.form,"tax",e)},expression:"form.tax"}})],1)],1),s("span",[t._v(t._s(t.form.currency)+" "+t._s(t._f("formatAmount")(t.form.tax)))])]),s("div",{staticClass:"row justify-between text-bold q-mt-md q-pt-md",staticStyle:{"border-top":"1px solid whitesmoke"}},[s("span",[t._v("Total")]),s("span",[t._v(t._s(t.form.currency)+" "+t._s(t._f("formatAmount")(t.total)))])])])])])]),s("EditCustomer",{attrs:{email:t.form.to_email}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-between subject-header"},[s("div",{staticClass:"q-my-auto"},[t._v("Due Date")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-between subject-header"},[s("div",[t._v("Currency")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row subject-header"},[s("div",[t._v("Other Emails (Cc)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row q-gutter-md  no-wrap q-pt-lg q-pb-sm "},[s("div",{staticClass:"col-4 text-bold"},[t._v("Invoice Item")]),s("div",{staticClass:"col-2 text-bold"},[t._v("Quantity")]),s("div",{staticClass:"col-2 text-bold"},[t._v("Unit Price")]),s("div",{staticClass:"col-2 text-bold text-right"},[t._v("Amount")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row subject-header"},[s("div",[t._v("Notes")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-between q-pt-lg q-pb-md"},[s("div",{staticClass:"text-grey text-bold"},[t._v("Payment Information")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row subject-header"},[s("div",[t._v("Account Name")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row subject-header"},[s("div",[t._v("Bank")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row subject-header"},[s("div",[t._v("Account Number")])])}],n=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a481"),s("967e")),r=s.n(n),o=(s("96cf"),s("fa84")),c=s.n(o),l=s("c47a"),u=s.n(l),m=s("a685"),d=s("5935"),f=s("a6c2"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row q-gutter-md no-wrap q-py-sm"},[s("div",{staticClass:"col-4"},[s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("title"),name:"title",outlined:"",placeholder:"Title"},model:{value:t.form.items[t.id].title,callback:function(e){t.$set(t.form.items[t.id],"title",e)},expression:"form.items[id].title"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|integer",expression:"'required|integer'"}],attrs:{hint:t.errors.first("quantity"),name:"quantity",dense:"",outlined:"",type:"number",placeholder:"Quantity"},model:{value:t.form.items[t.id].quantity,callback:function(e){t.$set(t.form.items[t.id],"quantity",e)},expression:"form.items[id].quantity"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],attrs:{hint:t.errors.first("price"),name:"price",dense:"",outlined:"",type:"number",placeholder:"Price"},model:{value:t.form.items[t.id].unit_price,callback:function(e){t.$set(t.form.items[t.id],"unit_price",e)},expression:"form.items[id].unit_price"}})],1),s("div",{staticClass:"col-2 text-right"},[s("div",{staticClass:"column justify-center",staticStyle:{height:"50px"}},[s("div",[t._v("\n                "+t._s(t.form.currency)+" "+t._s(t._f("formatAmount")(t.form.items[t.id].quantity*t.form.items[t.id].unit_price))+"\n            ")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show_close,expression:"show_close"}],staticClass:"col-1"},[s("div",{staticClass:"column justify-center items-center",staticStyle:{height:"50px"}},[s("q-btn",{attrs:{size:"sm",flat:"",unelevated:"",icon:"remove_circle",color:"red-10"},on:{click:t.removeItem}})],1)])])},v=[];function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function h(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(Object(s),!0).forEach((function(e){u()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _={name:"Item",props:["closeable","id"],data:function(){return{visible:!1,show_close:this.closeable}},created:function(){console.log(this.id)},computed:h({},Object(d["b"])("invoices",["form"])),methods:{removeItem:function(){this.form.items.splice(this.id,1)}}},q=_,y=s("2877"),w=Object(y["a"])(q,p,v,!1,null,"f5e6d8c0",null),C=w.exports;function g(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function x(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?g(Object(s),!0).forEach((function(e){u()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var k=[],O=[],j=[],$={name:"NewInvoice",components:{Item:C,EditCustomer:f["a"]},meta:function(){return{title:"Edit Invoice - Invoices"}},props:["id"],data:function(){return{currency_options:null,customers_options:null,banks_options:null,add_cc_emails:!1,processing:!1}},computed:x(x({subtotal:function(){return this.$collect(this.form.items).filter((function(t,e){return t.unit_price&&t.quantity})).sum((function(t){return t.unit_price*t.quantity}))},total:function(){return parseFloat(this.subtotal)+parseFloat(this.form.shipping_fee||0)+parseFloat(this.form.discount||0)+parseFloat(this.form.tax||0)}},Object(d["b"])("clients",["editCustomerModal"])),Object(d["b"])("invoices",["form","num_items"])),created:function(){this.fetchInvoiceFormOptions()},methods:{filterFn:function(t,e){var s=this;e((function(){if(""===t)s.currency_options=k;else{var e=t.toLowerCase();s.currency_options=k.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},filterFn_Customers:function(t,e){var s=this;e((function(){if(""===t)s.customers_options=O;else{var e=t.toLowerCase();s.customers_options=O.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},filterFn_Banks:function(t,e){var s=this;e((function(){if(""===t)s.banks_options=j;else{var e=t.toLowerCase();s.banks_options=j.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},onBlur:function(t){console.log(t.target)},setToEmail:function(t){this.form.to_email=t},fetchInvoiceFormOptions:function(){var t=this;return c()(r.a.mark((function e(){var s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].fetchInvoiceFormOptions();case 2:s=e.sent,s.data.status?(k=s.data.currencies,t.currency_options=k,O=s.data.customers,t.customers_options=O,j=s.data.banks,t.banks_options=j,t.form.currency="NGN"):t.$q.notify({color:"negative",icon:"close",message:s.data.msg,position:"top-right"});case 4:case"end":return e.stop()}}),e)})))()},addCustomer:function(){this.editCustomerModal=!0},addItem:function(){this.form.items.push({title:"",quantity:1,unit_price:""})},saveInvoice:function(){var t=arguments,e=this;return c()(r.a.mark((function s(){var i,a,n,o,c,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.length>0&&void 0!==t[0]&&t[0],s.next=3,e.$validator.validateAll();case 3:if(a=s.sent,!a){s.next=13;break}return e.processing=!0,e.form._send=i,s.next=9,e.$axios.post("invoice/edit"+(e.id?"/".concat(e.id):""),e.form);case 9:n=s.sent,o=n.data,c=o.status,l=o.msg,o.data,c?(e.$q.notify({color:"positive",position:"top-right",message:l,icon:"check_circle"}),e.resetForm(),e.$router.replace("/invoices")):e.$q.notify({color:"negative",position:"top-right",message:l,icon:"cancel"}),e.processing=!1;case 13:case"end":return s.stop()}}),s)})))()},resetFilter:function(){this.filter.email="",this.filter.date_range={from:"",to:""},this.filter.status=[]},resetForm:function(){this.form={to_email:"salvation@flutterwavego.com",due_date:"15-09-2020",currency:null,cc_emails:"",notes:"",acc_name:"Salvation Arinze",bank:"GTB",acc_num:"0131787125",shipping_fee:100,discount:200,tax:150,items:[{title:"Peach",quantity:"1",unit_price:"2000"}],_send:!1}},firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},filters:{}},P=$,E=(s("7334"),Object(y["a"])(P,i,a,!1,null,"22f35c6a",null));e["default"]=E.exports},a685:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var i=s("6fea"),a=s("bc3a"),n=s.n(a),r={fetchCountries:function(){return n.a.get(i["a"].api("utils/fetchCountries"))},fetchCurrencies:function(){return n.a.get(i["a"].api("utils/fetchCurrencies"))},fetchCustomers:function(){return n.a.get(i["a"].api("utils/fetchCustomers"))},fetchInvoiceFormOptions:function(){return n.a.get(i["a"].api("invoice/fetchInvoiceFormOptions"))}}},a6c2:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-dialog",{on:{"before-show":t.setFormValues},model:{value:t.editCustomerModal,callback:function(e){t.editCustomerModal=e},expression:"editCustomerModal"}},[s("q-card",{staticClass:"q-pa-sm",staticStyle:{"min-width":"500px","max-width":"70vw"}},[s("q-card-section",{staticClass:"header row items-center q-card--bordered"},[s("div",{staticClass:"title text-bold"},[t._v("Add New Customer")]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-auto",attrs:{dense:"",flat:"",icon:"close",size:"sm"}})],1),s("q-card-section",[s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Name")]),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("name"),name:"name",outlined:"",placeholder:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Phone")]),s("q-input",{attrs:{outlined:"",placeholder:"Phone"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Email")]),s("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("email"),name:"email",outlined:"",placeholder:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Address")]),s("q-input",{attrs:{outlined:"",placeholder:"Address"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}}),s("div",{staticClass:"row q-pt-md justify-between"},[s("div",{staticClass:"col-sm-5"},[s("div",{staticClass:" q-pb-sm "},[t._v("City")]),s("q-input",{attrs:{outlined:"",placeholder:"City"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),s("div",{staticClass:"col-sm-5"},[s("div",{staticClass:" q-pb-sm "},[t._v("State")]),s("q-input",{attrs:{outlined:"",placeholder:"State"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}})],1)]),s("div",{staticClass:"row q-pt-md q-pb-sm "},[t._v("Country")]),s("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.errors.first("country"),options:t.countries_options,"bg-color":"white",dense:"","emit-value":"","fill-input":"","hide-selected":"","input-debounce":"200","map-options":"",name:"country",outlined:"","use-input":""},on:{filter:t.filterFn},model:{value:t.form.country_id,callback:function(e){t.$set(t.form,"country_id",e)},expression:"form.country_id"}})],1),s("q-card-actions",{staticClass:"q-pb-md q-pt-lg",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"shadow-btn text-bold q-mr-sm",attrs:{label:"Cancel","no-caps":"",unelevated:""}}),s("q-btn",{staticClass:"shadow-btn text-bold",attrs:{loading:t.processing,color:"orange-4",label:"Save Customer","no-caps":"",unelevated:""},on:{click:t.saveCustomer}})],1)],1)],1)],1)},a=[],n=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("7f7f"),s("20d6"),s("967e")),r=s.n(n),o=(s("96cf"),s("fa84")),c=s.n(o),l=s("c47a"),u=s.n(l),m=s("5935"),d=s("a685");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){u()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var v=[],b={name:"EditCustomer",props:["customer","email"],data:function(){return{form:{},countries_options:null,processing:!1}},computed:p({},Object(m["b"])("clients",["customers","editCustomerModal"])),created:function(){this.fetchCountries()},methods:{setFormValues:function(){this.form=this.customer||{name:"",phone:"",email:this.email||"",address:"",city:"",state:"",country_id:162}},filterFn:function(t,e){var s=this;e((function(){if(""===t)s.countries_options=v;else{var e=t.toLowerCase();s.countries_options=v.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},fetchCountries:function(){var t=this;return c()(r.a.mark((function e(){var s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].fetchCountries();case 2:s=e.sent,s.data.status?(v=s.data.countries,t.countries_options=v,t.form.country=162):t.$q.notify({color:"negative",icon:"close",message:s.data.msg,position:"top-right"});case 4:case"end":return e.stop()}}),e)})))()},saveCustomer:function(){var t=this;return c()(r.a.mark((function e(){var s,i,a,n,o,c,l;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(s=e.sent,!s){e.next=11;break}return t.processing=!0,e.next=7,t.$axios.post("customer/edit",t.form);case 7:i=e.sent,a=i.data,n=a.status,o=a.msg,c=a.data.customer,n?(t.$q.notify({color:"positive",position:"top-right",message:o,icon:"check_circle"}),t.editCustomerModal=!1,t.resetForm(),t.customer?(l=t.customers.data.findIndex((function(e){return e.id===t.customer.id})),t.$set(t.customers.data,l,c)):(t.customers.total++,t.customers.data.unshift(c))):t.$q.notify({color:"negative",position:"top-right",message:o,icon:"cancel"}),t.processing=!1;case 11:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.form.name="",this.form.phone="",this.form.email="",this.form.address="",this.form.city="",this.form.state="",this.form.country_id=null}}},h=b,_=(s("637a"),s("2877")),q=Object(_["a"])(h,i,a,!1,null,"2fc476a8",null);e["a"]=q.exports},b7cc8:function(t,e,s){}}]);
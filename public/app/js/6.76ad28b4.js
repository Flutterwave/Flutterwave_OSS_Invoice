(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"32d4":function(t,e,a){},"54d5":function(t,e,a){},"6cd4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment",staticStyle:{"line-height":"25px"}},[!1===t.edit_?a("div",[a("span",{staticStyle:{"font-size":"14px","letter-spacing":".6px"}},[a("i",{staticClass:"fas fa-user-edit",staticStyle:{"font-size":"8px"}}),t._v(" "+t._s(t.comment)+" -\n                "),a("span",{staticClass:"text-green-8",staticStyle:{"font-size":"12px"}},[t._v("\n                    "+t._s(t.admin)+"\n                ")]),a("span",{staticClass:"text-orange-8",staticStyle:{"font-size":"10px","font-style":"italic"}},[t._v("\n                    "+t._s(t._f("moment")(t.date,"MMM Do YYYY, hh:mm A "))+"\n                ")])]),t._v("\n           \n        "),t.userID===t.admin_id&&t.editable?[a("q-btn",{attrs:{color:"faded",flat:"",icon:"fas fa-pencil-alt",label:"Edit"},on:{click:function(e){t.edit_=!0}}}),a("q-btn",{attrs:{color:"faded",flat:"",icon:"fas fa-trash-alt",label:"Delete"},on:{click:function(e){return t.deleteComment()}}})]:t._e()],2):a("div",[a("q-input",{attrs:{"max-height":10,"min-rows":2,"float-label":"Edit a comment",type:"textarea"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("div",{staticClass:"q-mt-md"},[a("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"fas fa-long-arrow-alt-left",size:"sm",title:"Cancel",unelevated:""},on:{click:function(e){t.edit_=!1}}}),a("q-btn",{attrs:{color:"positive",icon:"fas fa-save",size:"sm",title:"Save",unelevated:""},on:{click:function(e){return t.editComment()}}})],1)],1)])},s=[],o={props:["commentInfo","userID","entity","editable"],data:function(){return{comment_id:this.commentInfo.id,comment:this.commentInfo.comment,admin:this.commentInfo.admin.username,endpoint:this.entity.toLowerCase()+"s",admin_id:this.commentInfo.admin.id,entity_id:this.commentInfo.entity_id,date:this.commentInfo.date_created,edit_:!1}},methods:{editComment:function(){this.$axios.post(this.endpoint+"/editcomment",{comment_id:this.comment_id,entity_id:this.entity_id,comment:this.comment}).then(function(t){t.data.status&&(this.$emit("edit-comment",{entity_id:this.entity_id,comment:this.comment}),this.edit_=!1)}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))},deleteComment:function(){this.$axios.post(this.endpoint+"/deletecomment",{comment_id:this.comment_id}).then(function(t){t.data.status&&this.$emit("delete-comment")}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))}}},i=o,l=(a("d126"),a("2877")),r=Object(l["a"])(i,n,s,!1,null,"4a08e1a2",null);e["a"]=r.exports},"79d3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment",staticStyle:{"line-height":"25px"}},[a("q-input",{attrs:{type:"textarea","float-label":"Write a comment","max-height":10,"min-rows":2},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"fas fa-long-arrow-alt-left",size:"sm",unelevated:"",title:"Cancel"},on:{click:function(e){return t.$emit("cancel-comment")}}}),a("q-btn",{staticClass:"q-mr-md",attrs:{color:"positive",icon:"fas fa-save",size:"sm",title:"Save"},on:{click:function(e){return t.saveComment()}}})],1)},s=[],o={props:["entity_id_","entity"],data:function(){return{comment:"",entity_id:this.entity_id_,endpoint:this.entity.toLowerCase()+"s"}},methods:{saveComment:function(){this.$axios.post(this.endpoint+"/savecomment",{entity_id:this.entity_id_,comment:this.comment}).then(function(t){t.data.status&&this.$emit("save-comment",t.data.comment)}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))}}},i=o,l=(a("ccc4"),a("2877")),r=Object(l["a"])(i,n,s,!1,null,"22bd9976",null);e["a"]=r.exports},a11b:function(t,e,a){"use strict";var n=a("54d5"),s=a.n(n);s.a},a6d5:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lenders-main q-pa-xl"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[a("q-expansion-item",{staticClass:"filter",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[a("div",{staticClass:"row q-gutter-md"},[a("q-input",{attrs:{clearable:"",label:"Lender ID"},on:{input:function(e){t.filter.lender_id.length>=2&&/^\d+$/.test(t.filter.lender_id)&&t.filterLenders()}},model:{value:t.filter.lender_id,callback:function(e){t.$set(t.filter,"lender_id",e)},expression:"filter.lender_id"}}),a("q-input",{attrs:{clearable:"",label:"Username"},on:{input:function(e){t.filter.username.length>=t.minFilterLength&&t.filterLenders()}},model:{value:t.filter.username,callback:function(e){t.$set(t.filter,"username",e)},expression:"filter.username"}}),a("q-input",{attrs:{clearable:"",label:"First Name"},on:{input:function(e){t.filter.f_name.length>=t.minFilterLength&&/^[a-zA-Z]+$/.test(t.filter.f_name)&&t.filterLenders()}},model:{value:t.filter.f_name,callback:function(e){t.$set(t.filter,"f_name",e)},expression:"filter.f_name"}}),a("q-input",{attrs:{clearable:"",label:"Last Name"},on:{input:function(e){t.filter.l_name.length>=t.minFilterLength&&/^[a-zA-Z]+$/.test(t.filter.l_name)&&t.filterLenders()}},model:{value:t.filter.l_name,callback:function(e){t.$set(t.filter,"l_name",e)},expression:"filter.l_name"}}),a("q-input",{attrs:{clearable:"",label:"Phone"},on:{input:function(e){t.filter.phone.length>=9&&!isNaN(t.filter.phone)&&t.filterLenders()}},model:{value:t.filter.phone,callback:function(e){t.$set(t.filter,"phone",e)},expression:"filter.phone"}}),a("q-input",{attrs:{clearable:"",label:"Email"},on:{input:function(e){t.filter.email.length>=t.minFilterLength&&t.filterLenders()}},model:{value:t.filter.email,callback:function(e){t.$set(t.filter,"email",e)},expression:"filter.email"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}},[a("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateFrom.hide(),t.filterLenders()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}},[a("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateTo.hide(),t.filterLenders()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)],1),a("q-select",{attrs:{options:t.payback_status_options,"emit-value":"",hint:"Status of Loan Payback",label:"Status","map-options":""},on:{input:t.filterLenders},model:{value:t.filter.payback_status,callback:function(e){t.$set(t.filter,"payback_status",e)},expression:"filter.payback_status"}})],1),a("div",{staticClass:"row q-gutter-md",staticStyle:{"margin-top":"10px"}},[a("q-expansion-item",{staticClass:"col-sm-3",staticStyle:{color:"#979797"},attrs:{label:"Funded a loan"}},[a("q-select",{attrs:{options:[{label:"",value:""},{label:"Has funded a loan",value:"funded_loan"},{label:"Has not funded a loan",value:"no_loan"}],"emit-value":"",hint:"Has funded a loan",label:"Select","map-options":""},on:{input:t.filterLenders},model:{value:t.filter.has_funded_loan,callback:function(e){t.$set(t.filter,"has_funded_loan",e)},expression:"filter.has_funded_loan"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:t.filter.funded_loan_date_range.from,callback:function(e){t.$set(t.filter.funded_loan_date_range,"from",e)},expression:"filter.funded_loan_date_range.from"}},[a("q-popup-proxy",{ref:"loanDateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.loanDateFrom.hide(),t.filterLenders()}},model:{value:t.filter.funded_loan_date_range.from,callback:function(e){t.$set(t.filter.funded_loan_date_range,"from",e)},expression:"filter.funded_loan_date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:t.filter.funded_loan_date_range.to,callback:function(e){t.$set(t.filter.funded_loan_date_range,"to",e)},expression:"filter.funded_loan_date_range.to"}},[a("q-popup-proxy",{ref:"loanDateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.loanDateTo.hide(),t.filterLenders()}},model:{value:t.filter.funded_loan_date_range.to,callback:function(e){t.$set(t.filter.funded_loan_date_range,"to",e)},expression:"filter.funded_loan_date_range.to"}})],1)],1)],1),a("q-expansion-item",{staticClass:"col-sm-3",staticStyle:{color:"#979797"},attrs:{label:"Funded an asset"}},[a("q-select",{attrs:{options:[{label:"",value:""},{label:"Has funded an asset",value:"funded_asset"},{label:"Has not funded an asset",value:"no_asset"}],"emit-value":"",hint:"Has funded an asset",label:"Select","map-options":""},on:{input:t.filterLenders},model:{value:t.filter.has_funded_asset,callback:function(e){t.$set(t.filter,"has_funded_asset",e)},expression:"filter.has_funded_asset"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:t.filter.funded_asset_date_range.from,callback:function(e){t.$set(t.filter.funded_asset_date_range,"from",e)},expression:"filter.funded_asset_date_range.from"}},[a("q-popup-proxy",{ref:"assetDateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.assetDateFrom.hide(),t.filterLenders()}},model:{value:t.filter.funded_asset_date_range.from,callback:function(e){t.$set(t.filter.funded_asset_date_range,"from",e)},expression:"filter.funded_asset_date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:t.filter.funded_asset_date_range.to,callback:function(e){t.$set(t.filter.funded_asset_date_range,"to",e)},expression:"filter.funded_asset_date_range.to"}},[a("q-popup-proxy",{ref:"assetDateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.assetDateTo.hide(),t.filterLenders()}},model:{value:t.filter.funded_asset_date_range.to,callback:function(e){t.$set(t.filter.funded_asset_date_range,"to",e)},expression:"filter.funded_asset_date_range.to"}})],1)],1)],1)],1)])],1),t.lendersData.length?a("div",{staticClass:"row"},[a("json-excel",{staticClass:"col-sm-2",attrs:{fetch:t.exportData,fields:t.csv_fields,name:"Lenders.csv",type:"csv"}},[a("q-btn",{attrs:{color:"secondary",icon:"fas fa-save",label:"Export",size:"sm",unelevated:""}})],1),a("span",{staticClass:"col-sm-5"}),a("q-select",{staticClass:"col-sm-2",staticStyle:{"margin-top":"0","font-size":"12px"},attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],dense:"","emit-value":"","map-options":""},on:{input:t.filterLenders},model:{value:t.filter.per_page,callback:function(e){t.$set(t.filter,"per_page",e)},expression:"filter.per_page"}}),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:" col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[t._v(t._s(t.entries.to)+" out of\n                "+t._s(t.entries.total))])],1):t._e(),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"30px"}},[t._l(t.lendersData,(function(e,n){return[a("q-card",{class:"col-md-2 col-sm-4 q-ma-sm shadow-1 "+(e.notes_count||e.investments_count?"bg-green-1":""),attrs:{inline:"",square:""}},[e.notes_count?a("label",{staticStyle:{"background-color":"#004731",color:"whitesmoke","font-size":"12px",padding:"3px 7px",position:"relative",top:"-5px",left:"5px",cursor:"pointer"},attrs:{title:"Number of funded loans"},on:{click:function(a){return t.gotoLoan(e.id)}}},[t._v(t._s(e.notes_count))]):t._e(),e.investments_count?a("label",{staticClass:"cursor-pointer relative-position q-ml-sm",staticStyle:{"background-color":"#660066",color:"whitesmoke","font-size":"12px",padding:"3px 7px",top:"-5px",left:"5px"},attrs:{title:"Number of asset investments"},on:{click:function(a){return t.gotoAsset(e.id)}}},[t._v("\n                    "+t._s(e.investments_count)+"\n                ")]):t._e(),a("q-card-section",[a("span",{staticClass:"card-title"},[t._v(t._s(e.id)+"\n                    "),null!==e.comment_count&&e.comment_count.count>0?a("i",{staticClass:"text-orange-6 fa fa-circle",staticStyle:{"font-size":"6px",position:"relative",bottom:"7px"}}):t._e()]),a("div",{staticClass:"card-subtitle"},[t._v("\n                        "+t._s(t._f("firstCaps")(e.f_name))+" "+t._s(t._f("firstCaps")(e.l_name))+"\n                        "),a("br"),a("small",[t._v(t._s(e.phone))])])]),a("q-card-actions",{staticClass:"justify-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{color:"darkgrey"},attrs:{flat:"",icon:"fas fa-envelope-open",label:"CONTACT"},on:{click:function(a){return t.showContactModal({f_name:e.f_name,email:e.email,phone:e.phone})}}}),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{color:"darkgrey"},attrs:{flat:"",icon:"fas fa-eye",label:"VIEW"},on:{click:function(a){return t.showInfoModal(e)}}})],1)],1)]}))],2),a("div",[t.lenderInfo?a("q-dialog",{attrs:{cl:""},model:{value:t.infoModal,callback:function(e){t.infoModal=e},expression:"infoModal"}},[a("q-card",{staticStyle:{width:"900px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"}})],1),a("q-card-section",[a("div",{staticStyle:{margin:"0 3em 2em"}},[a("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"2em"}},[a("div",{staticClass:"avenir-next-thin",staticStyle:{"font-size":"3rem"}},[t._v("\n                                "+t._s(t.lenderInfo.id)+"\n                            ")]),a("small",{staticStyle:{color:"lightgrey"}},[t._v("\n                                "+t._s(t._f("moment")(t.lenderInfo.date_joined,"MMM Do YYYY, h:mm:ss A"))+"\n                            ")])]),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Middle Name")]),a("p",[t._v(t._s(t._f("firstCaps")(t.lenderInfo.m_name)))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Username")]),a("p",[t._v(t._s(t._f("firstCaps")(t.lenderInfo.username)))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Email")]),a("p",[t._v(t._s(t.lenderInfo.email))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Date of Birth")]),a("p",[t._v(t._s(t._f("moment")(t.lenderInfo.date_of_birth,"MMM Do, YYYY")))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Gender")]),a("p",[t._v(t._s(1==t.lenderInfo.gender?"Male":"Female"))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("BVN")]),a("p",[t._v(t._s(t.lenderInfo.bvn))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Bank Details")]),a("p",[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"secondary",flat:"",icon:"fas fa-external-link-alt ",label:"GOTO BANK DETAILS",size:"sm"},on:{click:function(e){return t.gotoBankInfo(t.lenderInfo.id)}}})],1)]),t.lenderInfo.repaid_loans?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Repaid Loans")]),a("p",[t._v("\n                                        "+t._s(t.lenderInfo.repaid_loans.length)+"\n                                        "),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"secondary",flat:"",icon:"fas fa-external-link-alt ",label:"GOTO LOANS",size:"sm"},on:{click:function(e){return t.gotoLoan(t.lenderInfo.id,"repaid")}}})],1)]):t._e(),t.lenderInfo.repaid_loans?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Repaid Asset")]),a("p",[t._v("\n                                        "+t._s(t.lenderInfo.repaid_investments_count)+"\n                                        "),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"secondary",flat:"",icon:"fas fa-external-link-alt ",label:"GOTO ASSETS",size:"sm"},on:{click:function(e){return t.gotoAsset(t.lenderInfo.id,"repaid")}}})],1)]):t._e(),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Book Balance")]),a("p",[t._v("₦"+t._s(t._f("formatAmount")(t.lenderInfo.book_bal)))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Available Balance")]),a("p",[t._v("₦"+t._s(t._f("formatAmount")(t.lenderInfo.available_bal)))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Bonus Balance")]),a("p",[t._v("₦"+t._s(t._f("formatAmount")(t.lenderInfo.bonus_bal)))])]),Object.keys(t.lenderInfo).length?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Total Amount Invested")]),"total_invested"in t.lenderInfo?a("p",[t._v("\n                                        ₦"+t._s(t._f("formatAmount")(t.lenderInfo.total_invested+t.lenderInfo.total_info_assets.total_invested)))]):a("p",{staticClass:"row justify-center"},[a("q-spinner-dots",{attrs:{slot:"message",size:20,color:"grey"},slot:"message"})],1)]):t._e(),Object.keys(t.lenderInfo).length?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Total Amount Expecting")]),"total_expecting"in t.lenderInfo?a("p",[t._v("\n                                        ₦"+t._s(t._f("formatAmount")(t.lenderInfo.total_expecting+t.lenderInfo.total_info_assets.total_expecting)))]):a("p",{staticClass:"row justify-center"},[a("q-spinner-dots",{attrs:{slot:"message",size:20,color:"grey"},slot:"message"})],1)]):t._e(),Object.keys(t.lenderInfo).length?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Total Amount Repaid")]),"total_repaid"in t.lenderInfo?a("p",[t._v("\n                                        ₦"+t._s(t._f("formatAmount")(t.lenderInfo.total_repaid+t.lenderInfo.total_info_assets.total_repaid)))]):a("p",{staticClass:"row justify-center"},[a("q-spinner-dots",{attrs:{slot:"message",size:20,color:"grey"},slot:"message"})],1)]):t._e()])]),a("div",{staticClass:"row q-gutter-sm justify-center q-py-lg"},[t.$can("wallet-transactions")?a("div",{staticClass:"col-sm-4 text-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"positive",flat:"",label:"CREDIT/DEBIT"},on:{click:function(e){t.fundModal=!0}}})],1):t._e()]),a("div",{staticClass:"col-md-12 col-sm-12",staticStyle:{color:"gray","font-family":"'Avenir Next Thin', sans-serif"},attrs:{id:"admin_comments"}},[a("hr",{staticClass:"lingrad"}),!("comments"in t.lenderInfo)||t.commentVars.loading?a("div",{staticClass:"text-center",staticStyle:{"padding-top":"20px"}},[a("p",[a("q-spinner-bars",{attrs:{size:20,color:"grey-6"}})],1)]):a("div",[a("div",{staticStyle:{"padding-top":"10px","line-height":"25px"}},[Object.keys(t.lenderInfo).length&&t.lenderInfo.comments.length>0?t._l(t.lenderInfo.comments,(function(e,n){return a("comment",{key:e.id,attrs:{commentInfo:e,userID:t.commentVars.user_id,entity:"LENDER"},on:{"delete-comment":function(e){return t.onDeleteComment(n)},"edit-comment":function(e){return t.onEditComment(n,e)}}})})):a("span",[t._v("No comments")]),t.commentVars.addNewFlag?a("new-comment",{attrs:{entity_id_:t.lenderInfo.id,entity:"LENDER"},on:{"cancel-comment":function(e){t.commentVars.addNewFlag=!1},"save-comment":t.onAddComment}}):t._e()],2),a("div",{staticStyle:{"margin-top":"20px"}},[Object.keys(t.lenderInfo).length&&t.lenderInfo.comments.length>0?[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],attrs:{disabled:t.commentVars.prevPageFlag,color:"amber",flat:"",round:"",size:"8px"},on:{click:function(e){return t.fetchComments("prev")}}},[a("q-icon",{attrs:{name:"fas fa-caret-left"}})],1),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],attrs:{disabled:t.commentVars.nextPageFlag,color:"amber",flat:"",round:"",size:"8px"},on:{click:function(e){return t.fetchComments("next")}}},[a("q-icon",{attrs:{name:"fas fa-caret-right"}})],1)]:t._e(),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],staticClass:"float-right",staticStyle:{"margin-bottom":"30px"},attrs:{color:"amber",flat:"",round:"",size:"10px"},on:{click:function(e){t.commentVars.addNewFlag=!0}}},[a("q-icon",{attrs:{name:"far fa-comment-dots"}})],1)],2)])])])])],1)],1):t._e(),a("q-dialog",{model:{value:t.contactModal,callback:function(e){t.contactModal=e},expression:"contactModal"}},[a("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"}})],1),a("q-card-section",[a("div",{staticStyle:{margin:"0 50px"}},[a("q-tabs",{attrs:{"active-color":"sidebar-blue",color:"grey-6"},model:{value:t.contactTab,callback:function(e){t.contactTab=e},expression:"contactTab"}},[a("q-tab",{attrs:{icon:"fas fa-envelope",name:"email"}}),a("q-tab",{attrs:{icon:"fas fa-phone",name:"sms"}})],1),a("q-tab-panels",{attrs:{animated:""},model:{value:t.contactTab,callback:function(e){t.contactTab=e},expression:"contactTab"}},[a("q-tab-panel",{attrs:{name:"email"}},[a("div",{staticClass:"row justify-center"},[a("q-input",{staticClass:"col-sm-10 q-my-md",attrs:{label:"Email"},model:{value:t.contactData.email,callback:function(e){t.$set(t.contactData,"email",e)},expression:"contactData.email"}}),a("q-input",{staticClass:"col-sm-10",attrs:{label:"Subject"},model:{value:t.contactData.subject,callback:function(e){t.$set(t.contactData,"subject",e)},expression:"contactData.subject"}}),a("q-input",{staticClass:"col-sm-10 q-my-md",attrs:{"max-height":10,"min-rows":5,label:"Message",type:"textarea"},model:{value:t.contactData.message,callback:function(e){t.$set(t.contactData,"message",e)},expression:"contactData.message"}}),a("div",{staticClass:"col-sm-12 q-mt-sm"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right",attrs:{color:"positive",label:"Send",outline:""},on:{click:function(e){return t.sendEmail(t.contactData.id,t.contactData.subject,t.contactData.message)}}})],1)],1)]),a("q-tab-panel",{attrs:{name:"sms"}},[a("div",{staticClass:"row justify-center"},[a("q-input",{staticClass:"col-sm-10 q-mt-md",attrs:{maxlength:11,counter:"",label:"Phone Number"},model:{value:t.contactData.phone,callback:function(e){t.$set(t.contactData,"phone",e)},expression:"contactData.phone"}}),a("q-input",{staticClass:"col-sm-10",attrs:{"max-height":10,maxlength:250,"min-rows":5,counter:"",label:"Message",type:"textarea"},model:{value:t.contactData.message,callback:function(e){t.$set(t.contactData,"message",e)},expression:"contactData.message"}}),a("div",{staticClass:"col-sm-12 q-mt-sm"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right q-mt-md",attrs:{color:"positive",label:"SEND",outline:""},on:{click:function(e){return t.sendSMS(t.contactData.id,t.contactData.message)}}})],1)],1)])],1)],1)])],1)],1),a("q-dialog",{staticClass:"fundModal",model:{value:t.fundModal,callback:function(e){t.fundModal=e},expression:"fundModal"}},[a("q-card",{staticStyle:{width:"400px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"}})],1),a("q-card-section",[a("div",{staticClass:"fund-wallet",staticStyle:{margin:"20px"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"row justify-between q-mb-md"},[a("div",[t._v("Wallet:")]),a("div",[a("q-select",{attrs:{options:[{label:"Available Balance",value:"available_bal"},{label:"Bonus Balance",value:"bonus_bal"}],dense:"","emit-value":"","map-options":""},model:{value:t.fundWallet.type,callback:function(e){t.$set(t.fundWallet,"type",e)},expression:"fundWallet.type"}})],1)]),a("div",{staticClass:"row justify-between q-mb-md"},[a("div",[t._v("Operation:")]),a("div",[a("q-select",{attrs:{options:[{label:"Credit",value:"credit"},{label:"Debit",value:"debit"}],dense:"","emit-value":"","map-options":""},model:{value:t.fundWallet.operation,callback:function(e){t.$set(t.fundWallet,"operation",e)},expression:"fundWallet.operation"}})],1)]),a("div",{staticClass:"row justify-between q-mb-md"},[a("div",[t._v("Amount:")]),a("div",[a("q-input",{attrs:{dense:"",type:"text"},model:{value:t.fundWallet.amount,callback:function(e){t.$set(t.fundWallet,"amount",e)},expression:"fundWallet.amount"}})],1)])]),a("div",{staticClass:"row justify-end q-mt-lg"},[a("q-btn",{staticClass:"q-mr-md q-py-xs no-shadow",staticStyle:{"border-color":"lightgrey"},attrs:{color:"white",label:"CANCEL",outline:"",size:"sm","text-color":"grey",unelevated:""},on:{click:function(e){t.fundModal=!1}}}),a("q-btn",{staticClass:"q-py-xs no-shadow",attrs:{color:"primary",label:"PROCEED",size:"sm",unelevated:""},on:{click:t.performFund}})],1)])])],1)],1)],1),t.lendersData.length<t.entries.total?a("div",{staticClass:"row justify-center"},[a("q-infinite-scroll",{attrs:{handler:t.refresher,offset:300}},[a("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):t._e()])},s=[],o=(a("8e6e"),a("8a81"),a("6b54"),a("a481"),a("4db1")),i=a.n(o),l=a("967e"),r=a.n(l),c=a("c47a"),d=a.n(c),m=(a("96cf"),a("fa84")),f=a.n(m),u=(a("ac6a"),a("cadf"),a("06db"),a("456d"),a("b178")),p=a("1bdd"),_=a("6cd4"),h=a("79d3");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){d()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"Lenders",meta:function(){return{title:"Lenders"}},components:{JsonExcel:p["a"],Comment:_["a"],NewComment:h["a"]},data:function(){return{activeNames:["1"],filter:{lender_id:this.$route.query.id,f_name:"",l_name:"",username:"",phone:"",email:"",date_range:{from:"",to:""},funded_loan_date_range:{from:"",to:""},funded_asset_date_range:{from:"",to:""},has_funded_loan:"",has_funded_asset:"",payback_status:"",page:1,per_page:"50"},lendersData:[],lenderInfo:"",fundWallet:{type:"",operation:"",amount:""},text:"",contactData:{f_name:"",phone:"",email:"",subject:"",message:""},csv_fields:{"Lender ID":"id","First Name":"f_name","Last Name":"l_name",Phone:"phone",Email:"email"},entries:{to:"",total:""},minFilterLength:3,commentVars:{addNewFlag:!1,page:1,nextPageFlag:!1,prevPageFlag:!0,loading:!1,user_id:null},infoModal:!1,contactModal:!1,fundModal:!1,contactTab:"email",payback_status_options:[{label:"",value:""},{label:"Successful",value:"success"},{label:"Failed",value:"failed"},{label:"Pending",value:"pending"}]}},computed:{},created:function(){Object.keys(this.$route.query).length&&this.filterLenders()},methods:{exportData:function(){var t=this;return f()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("lenders/filter",{params:b({export:!0},t.filter)});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))()},fetchLenders:function(){this.$axios.get("lenders/fetch").then(function(t){this.lendersData=t.data.data}.bind(this)).catch(function(t){console.error(t)}.bind(this))},fetchComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"prev"===t?this.commentVars.page>1&&this.commentVars.page--:"next"===t&&this.commentVars.page++,this.$axios.get("lenders/fetchcomments",{params:{investor_id:this.lenderInfo.id,page:this.commentVars.page}}).then(function(t){this.commentVars.loading=!1,null===t.data.comments.next_page_url?this.commentVars.nextPageFlag=!0:this.commentVars.nextPageFlag=!1,null===t.data.comments.prev_page_url?this.commentVars.prevPageFlag=!0:this.commentVars.prevPageFlag=!1,this.commentVars.user_id=t.data.user,this.$set(this.lenderInfo,"comments",t.data.comments.data)}.bind(this)).catch(function(t){console.error(t)}.bind(this))},fetchFinancialInfo:function(){var t=this;return f()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("total_invested"in t.lenderInfo){e.next=12;break}return e.prev=1,e.next=4,t.$axios.get("lenders/fetchFinancialInfo/".concat(t.lenderInfo.id));case 4:a=e.sent,a.data.status&&(t.$set(t.lenderInfo,"total_invested",a.data.total_invested),t.$set(t.lenderInfo,"total_expecting",a.data.total_expecting),t.$set(t.lenderInfo,"total_repaid",a.data.total_repaid),t.$set(t.lenderInfo,"total_info_assets",a.data.total_info_assets)),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),t.showAlert("negative","Error fetching filter options"),t.$nprogress.done();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},refresher:function(t,e){this.filter.page++,this.$axios.get("lenders/filter",{params:this.filter}).then(function(t){var a;(a=this.lendersData).push.apply(a,i()(t.data.data)),this.entries.to=t.data.to,this.entries.total=t.data.total,e()}.bind(this)).catch(function(t){e(),console.error(t)}.bind(this))},showInfoModal:function(t){this.lenderInfo=t,this.infoModal=!0,this.commentVars.page=1,this.commentVars.nextPageFlag=!1,this.fetchFinancialInfo(),this.fetchComments()},showContactModal:function(t){this.contactData.phone=t.phone,this.contactData.email=t.email,this.contactData.f_name=t.f_name,this.contactModal=!0},closeModal:function(){this.lenderInfo={},this.infoModal=!1},filterLenders:Object(u["e"])((function(){this.filter.page=1,this.$axios.get("lenders/filter",{params:this.filter}).then(function(t){this.lendersData=t.data.data,this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){console.error(t)}.bind(this))}),1e3),gotoLoan:function(t,e){this.$router.push({path:"loans",query:{investor_id:t,loan_type:e}})},gotoAsset:function(t,e){var a={investor_id:t};e&&(a.repaid="1"),this.$router.push({path:"assets",query:a})},gotoBankInfo:function(t){this.$router.push({path:"bankinfo",query:{id:t,type:"1"}})},sendEmail:function(t,e,a,n,s){this.$axios.post("lenders/sendmail",{id:t,subject:a,message:s}).then(function(t){t.data.status?this.showAlert("positive","Mail sent successfully"):this.showAlert("negative","Something went wrong")}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))},sendSMS:function(t,e,a,n){this.$axios.post("lenders/sendsms",{id:t,message:n}).then(function(t){t.data.status&&this.showAlert("positive","SMS sent successfully")}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))},onEditComment:function(t,e){this.showAlert("positive","Comment updated successfully");var a=e.comment;this.lenderInfo.comments[t].comment=a},onDeleteComment:function(t){this.showAlert("positive","Comment deleted successfully"),this.lenderInfo.comments.splice(t,1),0===this.lenderInfo.comments.length&&(this.commentVars.loading=!0,this.fetchComments("prev"))},onAddComment:function(t){this.showAlert("positive","Comment added successfully"),this.commentVars.addNewFlag=!1,1===this.commentVars.page&&this.lenderInfo.comments.unshift(t)},performFund:function(){var t=this;this.$q.dialog({title:"Confirm",message:"This operation is expensive. Are you sure this is what you want to do?",ok:"Yes",cancel:!0}).onOk(f()(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("lenders/fund/".concat(t.lenderInfo.id),t.fundWallet);case 2:a=e.sent,a.data.status?(t.showAlert("positive",a.data.msg),n=a.data.data,t.lenderInfo.available_bal=n.available_bal,t.lenderInfo.book_bal=n.book_bal,t.lenderInfo.bonus_bal=n.bonus_bal,t.fundModal=!1,t.resetFundWallet()):t.showAlert("negative",a.data.msg);case 4:case"end":return e.stop()}}),e)}))))},refreshEntries:function(){this.resetFilterData(),this.fetchLenders()},resetFilterData:function(){this.filter.lender_id="",this.filter.f_name="",this.filter.l_name="",this.filter.username="",this.filter.phone="",this.filter.email=""},resetFundWallet:function(){this.fundWallet={type:"",operation:"",amount:""}},showAlert:function(t,e){this.$q.notify({type:t,message:e,position:"top-right",timeout:4e3})},firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},filters:{firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},formatAmount:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},x=g,y=(a("a11b"),a("2877")),w=Object(y["a"])(x,n,s,!1,null,"70439cfb",null);e["default"]=w.exports},b51c:function(t,e,a){},ccc4:function(t,e,a){"use strict";var n=a("32d4"),s=a.n(n);s.a},d126:function(t,e,a){"use strict";var n=a("b51c"),s=a.n(n);s.a}}]);
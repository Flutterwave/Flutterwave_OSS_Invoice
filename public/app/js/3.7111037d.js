(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"00a4":function(e,t,a){},"600a":function(e,t,a){},"6f14":function(e,t,a){},"77f2":function(e,t,a){},"9eb7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"utilities-main"}},[e.$can("confirm-batch-payment")?a("ConfirmBatch"):e._e(),e.$can("make-asset-investment")?a("MakeAssetInvestment"):e._e(),e.$can("create-asset")?a("CreateAsset"):e._e()],1)},r=[],i=(a("a481"),a("6b54"),a("06db"),a("b178"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-expansion-item",{staticClass:"collapsible",attrs:{"data-vv-scope":"confirm-batch",icon:"fa fa-handshake",label:"Confirm Batch Payment"}},[a("form",{staticClass:"row justify-around",attrs:{"data-vv-scope":"batch_confirm"},on:{submit:function(t){return t.preventDefault(),e.onUpload("batch_confirm")}}},[a("q-file",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-4",attrs:{error:!!e.errors.first("batch_confirm.file"),hint:e.errors.first("batch_confirm.file")||"File must end with .csv",accept:".csv",label:"CSV file of Loan IDs",name:"file"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-3",attrs:{error:!!e.errors.first("batch_confirm.status"),hint:e.errors.first("batch_confirm.status")||"Status on ToBePaid Table",options:[{label:"False",value:0},{label:"True",value:1}],label:"Success Status",name:"status"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),a("div",{staticClass:"col-sm-3"},[a("q-btn",{attrs:{color:"white",label:"Upload",outline:"","text-color":"black",type:"submit"}})],1)],1)])}),n=[],l={name:"ConfirmBatch",inject:["showAlert"],data:function(){return{file:null,file_status:"",status:""}},methods:{file_selected:function(e){this.file=e[0],this.file_status=!0},onUpload:function(e){var t=this;this.$validator.validateAll(e).then((function(e){if(e){var a=new FormData;a.append("file",t.file),a.append("status",t.status),t.$axios.post("loans/batchConfirmPaybacks",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){e.data.status?(this.showAlert("positive","All entries were successful"),this.resetConfirmBatch()):this.showAlert("warning",e.data.errors[0])}.bind(t))}}))},resetConfirmBatch:function(){this.batch_confirm.file=null,this.batch_confirm.file_status="",this.batch_confirm.status="",this.$refs.confirm_batch_uploader.reset()}}},o=l,c=(a("dc62"),a("2877")),u=Object(c["a"])(o,i,n,!1,null,"24fba029",null),d=u.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-expansion-item",{staticClass:"collapsible",attrs:{icon:"fa fa-address-book",label:"Create Asset Option",opened:""},on:{show:e.fetchCreateAssetFormDetails}},[a("form",{staticClass:"row",attrs:{"data-vv-scope":"create_asset_loan"},on:{submit:function(t){return t.preventDefault(),e.createAsset("create_asset_loan")}}},[a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.title"),hint:e.errors.first("create_asset_loan.title")||"Title of investment",clearable:"",label:"Title",name:"title"},model:{value:e.title,callback:function(t){e.title="string"===typeof t?t.trim():t},expression:"title"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.client"),hint:e.errors.first("create_asset_loan.client")||"Select client",options:e.clients,"emit-value":"",label:"Client","map-options":"",name:"client"},model:{value:e.selected_client,callback:function(t){e.selected_client=t},expression:"selected_client"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.amount"),hint:e.errors.first("create_asset_loan.amount")||"Amount per unit",label:"Amount",name:"amount"},on:{input:e.calculatePayback},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.interest"),hint:e.errors.first("create_asset_loan.interest")||"Interest rate",label:"Interest Rate",name:"interest"},on:{input:e.calculatePayback},model:{value:e.interest_rate,callback:function(t){e.interest_rate=t},expression:"interest_rate"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.payback_due"),hint:e.errors.first("create_asset_loan.payback_due")||"Expected payback",disable:"",label:"Payback",name:"payback"},model:{value:e.payback_due,callback:function(t){e.payback_due=t},expression:"payback_due"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.payback_type"),hint:e.errors.first("create_asset_loan.payback_type")||"How payback is made",options:e.payback_types,"emit-value":"",label:"Payback Type","map-options":"",name:"payback_type"},model:{value:e.selected_payback_type,callback:function(t){e.selected_payback_type=t},expression:"selected_payback_type"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|integer",expression:"'required|integer'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.tenure"),hint:e.errors.first("create_asset_loan.tenure")||"How long till maturity",label:"Tenure",name:"tenure"},model:{value:e.tenure,callback:function(t){e.tenure=t},expression:"tenure"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.tenure_type"),hint:e.errors.first("create_asset_loan.tenure_type")||"Type of Tenure",options:e.tenure_types,"emit-value":"",label:"Tenure Type","map-options":"",name:"tenure_type"},model:{value:e.selected_tenure_type,callback:function(t){e.selected_tenure_type=t},expression:"selected_tenure_type"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.category"),hint:e.errors.first("create_asset_loan.category")||"Category of Investment",options:e.categories,"emit-value":"",label:"Category","map-options":"",name:"category"},model:{value:e.selected_category,callback:function(t){e.selected_category=t},expression:"selected_category"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|integer",expression:"'required|integer'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.total_units"),hint:e.errors.first("create_asset_loan.total_units")||"Number of Units",label:"Total Units",name:"total_units"},model:{value:e.total_units,callback:function(t){e.total_units=t},expression:"total_units"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.guaranteed"),hint:e.errors.first("create_asset_loan.guaranteed")||"Is guaranteed?",options:e.guaranteed_options,"emit-value":"",label:"Guaranteed","map-options":"",name:"guaranteed"},model:{value:e.guaranteed,callback:function(t){e.guaranteed=t},expression:"guaranteed"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.active"),hint:e.errors.first("create_asset_loan.active")||"Is available to lenders?",options:e.active_options,"emit-value":"",label:"Active","map-options":"",name:"active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}}),a("q-file",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-2 q-pa-sm",attrs:{error:!!e.errors.first("create_asset_loan.image"),hint:e.errors.first("create_asset_loan.image")||"Image must be jpeg",accept:".jpg, .jpeg",label:"Image",name:"image"},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-7 q-pa-sm",attrs:{hint:e.errors.first("create_asset_loan.description")||"Description is compulsory",error:!!e.errors.first("create_asset_loan.description"),"max-height":30,"float-label":"Title",name:"description",type:"textarea"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}}),a("div",{staticClass:"col-sm-3 flex flex-center"},[a("q-btn",{attrs:{color:"white",label:"Create",outline:"","text-color":"black",type:"submit"}})],1)],1)])},p=[],_=a("967e"),v=a.n(_),f=(a("96cf"),a("fa84")),h=a.n(f),b={name:"CreateAsset",inject:["showAlert","makeFormData","processError"],data:function(){return{title:"Test",selected_client:1,clients:[],amount:"10000",interest_rate:"20",payback_due:"12000",payback_types:[{label:"Monthly",value:"MONTHLY"},{label:"Lump Sum",value:"LUMP"}],selected_payback_type:"MONTHLY",tenure:"4",tenure_types:[{label:"Week",value:"WEEK"},{label:"Month",value:"MONTH"},{label:"Year",value:"YEAR"}],selected_tenure_type:"MONTH",selected_category:1,categories:[],total_units:"1000",guaranteed:"1",guaranteed_options:[{label:"Yes",value:"1"},{label:"No",value:"0"}],active:"1",active_options:[{label:"Yes",value:"1"},{label:"No",value:"0"}],image:null,is_image_uploaded:!1,desc:"Testing"}},mounted:function(){this.resetForm()},methods:{fetchCreateAssetFormDetails:function(){var e=this;return h()(v.a.mark((function t(){var a;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("assets/fetchCreateAssetFormDetails");case 3:a=t.sent,!0===a.data.status&&(e.clients=a.data.clients,e.categories=a.data.categories),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.showAlert("negative","Error fetching form data"),e.$nprogress.done();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},calculatePayback:function(){this.isNumeric(this.amount)&&this.isNumeric(this.interest_rate)?this.payback_due=Math.round(this.amount*(1+this.interest_rate/100)):this.payback_due=""},image_selected:function(e){this.image=e[0],this.is_image_uploaded=!0},createAsset:function(e){var t=this;return h()(v.a.mark((function a(){var s,r;return v.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$validator.validateAll(e);case 2:if(s=a.sent,!s){a.next=15;break}return a.prev=4,a.next=7,t.$axios.post("assets/createAssetOption",t.makeFormData({title:t.title,client:t.selected_client,amount:t.amount,interest_rate:t.interest_rate,payback_due:t.payback_due,payback_type:t.selected_payback_type,tenure:t.tenure,tenure_type:t.selected_tenure_type,category:t.selected_category,total_units:t.total_units,write_up:t.desc,guaranteed:t.guaranteed,image:t.image,active:t.active}),{headers:{"Content-Type":"multipart/form-data"}});case 7:r=a.sent,r.data.status?(t.showAlert("positive","Asset investment created successfully"),t.resetForm()):t.showAlert("negative","Something went wrong!"),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](4),t.showAlert("negative",t.processError(a.t0.response.data.errors)),t.$nprogress.done();case 15:case"end":return a.stop()}}),a,null,[[4,11]])})))()},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},resetAmounts:function(){this.amount="",this.amt_expected=""},resetForm:function(){this.title="",this.selected_client="",this.amount="",this.interest_rate="",this.payback_due="",this.selected_payback_type="",this.tenure="",this.selected_tenure_type="",this.selected_category="",this.total_units="",this.guaranteed="1",this.active="1",this.image=null,this.is_image_uploaded=!1,this.desc="",this.$validator.reset()}}},y=b,g=(a("bd69"),Object(c["a"])(y,m,p,!1,null,"3ac97145",null)),q=g.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-expansion-item",{staticClass:"collapsible",attrs:{"data-vv-scope":"create-asset",icon:"fa fa-cart-plus",label:"Make Asset Investments"},on:{show:e.fetchAssets}},[a("form",{staticClass:"row q-gutter-md",attrs:{"data-vv-scope":"create_asset"},on:{submit:function(t){return t.preventDefault(),e.createAsset("create_asset")}}},[a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{error:!!e.errors.first("create_asset.id")||!e.isLenderValid,hint:e.errors.first("create_asset.id")||e.lender_info,clearable:"",label:"Investor ID",name:"id"},on:{blur:function(t){return e.validateLenderID()},input:function(t){e.lender_info="Enter Lender ID"}},model:{value:e.lender_id,callback:function(t){e.lender_id="string"===typeof t?t.trim():t},expression:"lender_id"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{error:!!e.errors.first("create_asset.product"),hint:e.errors.first("create_asset.product")||"Has uploaded files",options:e.products,"emit-value":"",label:"Product","map-options":"",name:"product"},on:{input:e.updateInterestRate},model:{value:e.selected_product,callback:function(t){e.selected_product=t},expression:"selected_product"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{error:!!e.errors.first("create_asset.interest"),hint:e.errors.first("create_asset.interest")||"Interest rate of choice",label:"Interest Rate",name:"interest"},on:{input:e.calculateAmount},model:{value:e.interest_rate,callback:function(t){e.interest_rate=t},expression:"interest_rate"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{error:!!e.errors.first("create_asset.units"),hint:e.errors.first("create_asset.units")||"Number of Units",label:"No of Units",name:"units"},on:{input:e.calculateAmount},model:{value:e.num_units,callback:function(t){e.num_units=t},expression:"num_units"}}),a("q-input",{attrs:{disable:"",hint:"Amount Invested",label:"Amount Invested"},model:{value:e.amt_invested,callback:function(t){e.amt_invested=t},expression:"amt_invested"}}),a("q-input",{attrs:{disable:"",hint:"Amount expected",label:"Amount Expected"},model:{value:e.amt_expected,callback:function(t){e.amt_expected=t},expression:"amt_expected"}}),a("div",{staticClass:"col-sm-2"},[a("q-btn",{attrs:{color:"white",label:"Create",outline:"","text-color":"black",type:"submit"}})],1)],1)])},k=[],w=(a("7514"),{name:"MakeAssetInvestment",inject:["showAlert"],data:function(){return{assets:[],selected_asset:"",lender_id:"",lender_info:"Investor ID",isLenderValid:!0,products:[],selected_product:"",num_units:"",interest_rate:"",amt_invested:"",amt_expected:"",minIDLength:2}},methods:{fetchAssets:function(){this.$axios.get("assets/fetch").then(function(e){!0===e.data.status&&(this.assets=e.data.asset_loans,this.products=e.data.asset_loans.map((function(e){var t=e.id,a=e.title;return{label:a,value:t}})))}.bind(this)).catch(function(e){this.showAlert("negative","Error fetching assets"),this.$nprogress.done()}.bind(this))},validateLenderID:function(){this.lender_id.length>=this.minIDLength&&/^\d+$/.test(this.lender_id)&&this.$axios.get("lenders/validatelender",{params:{id:this.lender_id}}).then(function(e){e.data.status?(this.lender_info=e.data.info,this.isLenderValid=!0):(this.lender_info=e.data.error,this.isLenderValid=!1)}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(this))},updateInterestRate:function(){var e=this,t=this.assets.find((function(t){return t.id===e.selected_product}));this.selected_asset=t,this.interest_rate=t.interest_rate,this.calculateAmount()},calculateAmount:function(){/^\d+$/.test(this.num_units)&&/^\d+$/.test(this.interest_rate&&this.selected_product)?(this.amt_invested=Math.round(this.selected_asset.amount*this.num_units),this.amt_expected=Math.round(this.amt_invested*(1+this.interest_rate/100))):this.resetCreateAssetAmounts()},createAsset:function(e){var t=this;this.$validator.validateAll(e).then((function(e){e&&t.$axios.post("assets/makeassetinvestment",{asset_id:t.selected_asset.id,lender_id:t.lender_id,amount_in:t.amt_invested,no_of_units:t.num_units,amount_expected:t.amt_expected}).then(function(e){e.data.status?(this.showAlert("positive","Asset investment created successfully"),this.resetCreateAsset()):this.showAlert("negative","Something went wrong!")}.bind(t))}))},resetCreateAssetAmounts:function(){this.amt_invested="",this.amt_expected=""},resetCreateAsset:function(){this.selected_asset="",this.lender_id="",this.lender_info="Investor ID",this.isLenderValid=!0,this.selected_product="",this.num_units="",this.interest_rate="",this.amt_invested="",this.amt_expected=""}}}),A=w,C=(a("a24e"),Object(c["a"])(A,x,k,!1,null,"e15bbe56",null)),N=C.exports,I={name:"Utilities",meta:function(){return{title:"Utilities"}},components:{CreateAsset:q,MakeAssetInvestment:N,ConfirmBatch:d},provide:function(){return{showAlert:this.showAlert,makeFormData:this.makeFormData,processError:this.processError}},data:function(){return{}},computed:{},methods:{showAlert:function(e,t){this.$q.notify({type:e,message:t,position:"top-right",timeout:5e3})},makeFormData:function(e){var t=new FormData;for(var a in e)e.hasOwnProperty(a)&&t.append(a,e[a]);return t},processError:function(e){var t="";for(var a in e)e.hasOwnProperty(a)&&(t?t+=e[a]:t=e[a],t+=". ");return t},firstCaps:function(e){if(null!=e)return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}},filters:{firstCaps:function(e){if(null!=e)return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},shortenText:function(e){return e.toString().length<=15?e:e.toString().slice(0,15)+"..."},profileType:function(e){return 0===e?"Borrower":"Lender"},formatAmount:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},$=I,D=(a("ed3a"),Object(c["a"])($,s,r,!1,null,null,null));t["default"]=D.exports},a24e:function(e,t,a){"use strict";var s=a("6f14"),r=a.n(s);r.a},bd69:function(e,t,a){"use strict";var s=a("77f2"),r=a.n(s);r.a},dc62:function(e,t,a){"use strict";var s=a("00a4"),r=a.n(s);r.a},ed3a:function(e,t,a){"use strict";var s=a("600a"),r=a.n(s);r.a}}]);
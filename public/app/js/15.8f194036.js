(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"118f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operations-main q-pa-xl"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[a("q-expansion-item",{staticClass:"filter",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[a("div",{staticClass:"row q-gutter-md"},[a("q-input",{attrs:{clearable:"",label:"Entity ID"},on:{input:function(t){(e.filter.entity_id.length>=2&&/^\d+$/.test(e.filter.entity_id)||0===e.filter.entity_id.length)&&e.filterOperations()}},model:{value:e.filter.entity_id,callback:function(t){e.$set(e.filter,"entity_id",t)},expression:"filter.entity_id"}}),a("q-select",{attrs:{options:e.entity_type_options,"emit-value":"",label:"Entity Type",hint:"Select Entity Type","map-options":""},on:{input:e.filterOperations},model:{value:e.filter.entity_type,callback:function(t){e.$set(e.filter,"entity_type",t)},expression:"filter.entity_type"}}),a("q-select",{attrs:{options:e.admin_options,"emit-value":"",label:"Admin",hint:"Select Admin","map-options":""},on:{input:e.filterOperations},model:{value:e.filter.admin_id,callback:function(t){e.$set(e.filter,"admin_id",t)},expression:"filter.admin_id"}}),a("q-select",{attrs:{options:e.operations,"emit-value":"",label:"Type",hint:"Type of operation","map-options":""},on:{input:e.filterOperations},model:{value:e.filter.meta,callback:function(t){e.$set(e.filter,"meta",t)},expression:"filter.meta"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:e.filter.date_range.from,callback:function(t){e.$set(e.filter.date_range,"from",t)},expression:"filter.date_range.from"}},[a("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.dateFrom.hide(),e.filterOperations()}},model:{value:e.filter.date_range.from,callback:function(t){e.$set(e.filter.date_range,"from",t)},expression:"filter.date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:e.filter.date_range.to,callback:function(t){e.$set(e.filter.date_range,"to",t)},expression:"filter.date_range.to"}},[a("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.dateTo.hide(),e.filterOperations()}},model:{value:e.filter.date_range.to,callback:function(t){e.$set(e.filter.date_range,"to",t)},expression:"filter.date_range.to"}})],1)],1)],1)])],1),e.OperationsData.length?a("div",{staticClass:"row q-pt-md"},[a("json-excel",{staticClass:"col-sm-2",attrs:{data:e.OperationsData,fields:e.csv_fields,name:"Operations.csv",type:"csv"}},[a("q-btn",{staticStyle:{"-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px"},attrs:{color:"secondary",unelevated:"",icon:"fas fa-save",label:"EXPORT",size:"sm"}})],1),a("span",{staticClass:"col-sm-5"}),a("q-select",{staticClass:"col-sm-2",staticStyle:{"margin-top":"0","font-size":"12px"},attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],"map-options":"","emit-value":"",dense:""},on:{change:e.filterOperations},model:{value:e.filter.per_page,callback:function(t){e.$set(e.filter,"per_page",t)},expression:"filter.per_page"}}),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[e._v("\n            "+e._s(e.entries.to)+" out of "+e._s(e.entries.total))])],1):e._e(),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"30px"}},[e.OperationsData.length>0?a("table",{staticClass:"q-table loose"},[e._m(0),a("tbody",e._l(e.OperationsData,(function(t,l){return a("tr",[a("td",{staticClass:"text-center"},[e._v(e._s(t.id))]),a("td",{staticClass:"text-center"},[e._v(e._s(e.fetchOpName(t.meta)))]),a("td",{staticClass:"text-center",attrs:{title:"Click to navigate to loan details"},on:{click:function(a){return e.gotoEntity(t.entity_id,t.entity)}}},[e._v(" "+e._s(t.entity_id)+"\n                ")]),a("td",{staticClass:"text-center"},[e._v(e._s(t.entity))]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.admin.name))]),a("td",{staticClass:"text-center"},[e._v(e._s(e.formatDate(t.date)))])])})),0)]):e._e()]),e.OperationsData.length<e.entries.total?a("div",{staticClass:"row justify-center"},[a("q-infinite-scroll",{attrs:{handler:e.refresher,offset:500}},[a("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):e._e()])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("ID")]),a("th",[e._v("OPERATION")]),a("th",[e._v("ENTITY ID")]),a("th",[e._v("ENTITY TYPE")]),a("th",[e._v("ADMIN")]),a("th",[e._v("DATE")])])])}],n=(a("28a5"),a("6b54"),a("a481"),a("6762"),a("2fdb"),a("7514"),a("4db1")),o=a.n(n),r=(a("ac6a"),a("cadf"),a("06db"),a("b178")),s=a("1bdd"),u={name:"Operations",meta:function(){return{title:"Operations"}},components:{JsonExcel:s["a"]},data:function(){return{activeNames:["1"],filter:{admin_id:"",entity_id:"",entity_type:"",meta:"",date_range:{from:"",to:""},page:1,per_page:"100"},operations:[{label:"",value:""},{label:"BVN Verify",value:"bvn_verify"},{label:"Phone Verify",value:"phone_verify"},{label:"BVN Invalidate",value:"bvn_invalidate"},{label:"Phone Invalidate",value:"phone_invalidate"},{label:"BVN Reset Status",value:"bvn_reset_status"},{label:"Send Mail",value:"send_mail"},{label:"Send SMS",value:"send_sms"},{label:"Create Comment",value:"comment_create"},{label:"Edit Comment",value:"comment_edit"},{label:"Delete Comment",value:"comment_delete"},{label:"Mail Edit",value:"mail_edit"},{label:"Blacklist User",value:"user_blacklist"},{label:"Home Verification",value:"home_verify"},{label:"Office Verification",value:"office_verify"},{label:"ID Verification",value:"id_verify"},{label:"Employment Verification",value:"employment_verify"},{label:"Utility Verification",value:"utility_verify"},{label:"Bank Statement Verification",value:"bank_statement_verify"},{label:"Home Invalidation",value:"home_invalidate"},{label:"Office Invalidation",value:"office_invalidate"},{label:"ID Invalidation",value:"id_invalidate"},{label:"Employment Invalidation",value:"employment_invalidate"},{label:"Utility Invalidation",value:"utility_invalidate"},{label:"Bank Statement Invalidation",value:"bank_statement_invalidate"},{label:"Clear Loan",value:"loan_clear"},{label:"Loan Marked as Default",value:"loan_mark_default"},{label:"Fund Loan",value:"loan_fund"},{label:"Confirm Payback",value:"payback_confirm"},{label:"Update Loan Amount",value:"loan_amount_update"},{label:"Create Loan",value:"loan_create"},{label:"Note Transfer",value:"note_transfer"},{label:"Note TopUp",value:"note_topup"},{label:"Note Delete",value:"note_delete"},{label:"Loan Status Update",value:"loan_status_update"},{label:"Loan Term Update",value:"loan_term_update"},{label:"Acknowledge Payback",value:"acknowledge_payback"},{label:"Approve Testimonial",value:"approve_testimonial"},{label:"Edit Testimonial",value:"edit_testimonial"},{label:"Delete Testimonial",value:"delete_testimonial"},{label:"Disburse Loan",value:"disburse_loan"},{label:"Decline Loan",value:"decline_loan"},{label:"Approve Loan",value:"approve_loan"},{label:"Confirm Batch Payback",value:"confirm_batch_payback"},{label:"Wallet Top up",value:"wallet_topup"},{label:"Wallet Deduct",value:"wallet_deduct"},{label:"Approve Bonus",value:"approve_bonus"}],OperationsData:[],text:"",csv_fields:{"Entity ID":"entity_id","Entity Type":"entity_type",Admin:"admin.name",Meta:"meta",Date:"date"},entries:{to:"",total:""},admin_options:[{label:"",value:""},{label:"Arinze Salvation",value:"4"},{label:"Chiwete John-Njokanma",value:"2"},{label:"Demola Fashola",value:"14"},{label:"Eskor Toyo",value:"7"},{label:"Ike Dike",value:"11"},{label:"Mercy Bassey",value:"12"},{label:"Nnamdi Okeke",value:"1"},{label:"Oreva Attah",value:"5"},{label:"Samuel Ayomikun",value:"6"},{label:"Segun Bashorun",value:"9"},{label:"Seyi Akinrele",value:"13"},{label:"Tobi Banjoko",value:"8"},{label:"Toun Adekoya",value:"10"},{label:"Ugo Ibecheozor",value:"3"}],entity_type_options:[{label:"",value:""},{label:"Borrower",value:"BORROWER"},{label:"Lender",value:"INVESTOR"},{label:"Loan",value:"LOAN"}],minFilterLength:3}},mounted:function(){},methods:{fetchOperations:function(){this.$axios.get("operations/fetch").then(function(e){this.OperationsData=e.data.data,this.entries.to=e.data.to,this.entries.total=e.data.total}.bind(this)).catch(function(e){console.error(e)}.bind(this))},refresher:function(e,t){this.filter.page++,this.$axios.get("operations/filter",{params:this.filter}).then(function(e){var a;(a=this.OperationsData).push.apply(a,o()(e.data.data)),this.entries.to=e.data.to,this.entries.total=e.data.total,t()}.bind(this)).catch(function(e){t(),console.error(e)}.bind(this))},filterOperations:Object(r["e"])((function(){this.filter.page=1,this.$axios.get("operations/filter",{params:this.filter}).then(function(e){this.OperationsData=e.data.data,this.entries.to=e.data.to,this.entries.total=e.data.total}.bind(this)).catch(function(e){console.error(e)}.bind(this))}),1e3),fetchOpName:function(e){var t=this.operations.find((function(t){return t.value.includes(e)}));return t.label},gotoEntity:function(e,t){"BORROWER"===t?this.$router.push({path:"borrowers",query:{id:e}}):"INVESTOR"===t?this.$router.push({path:"lenders",query:{id:e}}):"LOAN"===t&&this.$router.push({path:"loans",query:{id:e}})},refreshEntries:function(){this.resetFilterData(),this.fetchOperations()},resetFilterData:function(){this.filter.lender_id="",this.filter.f_name="",this.filter.l_name="",this.filter.username="",this.filter.phone="",this.filter.email=""},showAlert:function(e,t){var a=Alert.create({enter:"bounceInRight",leave:"bounceOutRight",color:e,html:t,position:"top-right",duration:3e3});setTimeout((function(){a.dismiss()}),3e3)},firstCaps:function(e){if(null!=e)return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},formatDate:function(e){return this.$moment(e).utcOffset("+0800").format("MMMM Do, YYYY hh:mm:ss A")}},filters:{firstCaps:function(e){if(null!=e)return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},formatAmount:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatTransType:function(e){var t="",a=e.split("_");return a.forEach((function(e){t+=e.toUpperCase()+" "})),t}}},c=u,p=(a("832c"),a("2877")),f=Object(p["a"])(c,l,i,!1,null,"10f8bcb4",null);t["default"]=f.exports},"832c":function(e,t,a){"use strict";var l=a("e3e4"),i=a.n(l);i.a},e3e4:function(e,t,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"0b18":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"testimonials-main q-pa-xl"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[a("q-expansion-item",{staticClass:"filter fit",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[a("div",{staticClass:"row q-gutter-md"},[a("q-select",{staticClass:"col-sm-2",attrs:{options:[{label:"",value:""},{label:"Borrower",value:"0"},{label:"Lender",value:"1"}],"emit-value":"","float-label":"Type of user",hint:"Profile type","map-options":""},on:{input:t.filterTestimonials},model:{value:t.filter.profile_type,callback:function(e){t.$set(t.filter,"profile_type",e)},expression:"filter.profile_type"}}),a("q-select",{staticClass:"col-sm-2",attrs:{options:[{label:"",value:""},{label:"Approved",value:1},{label:"Not Approved",value:0}],"emit-value":"","float-label":"Approved or not","map-options":""},on:{input:t.filterTestimonials},model:{value:t.filter.approved,callback:function(e){t.$set(t.filter,"approved",e)},expression:"filter.approved"}}),a("q-select",{staticClass:"col-sm-2",attrs:{options:[{label:"Text",value:0},{label:"Screenshot",value:1}],"emit-value":"","float-label":"Category",hint:"Type of testimonial","map-options":""},on:{input:t.filterTestimonials},model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}}),a("q-input",{staticClass:"col-sm-2",attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}},[a("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateFrom.hide(),t.filterTestimonials()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}})],1)],1),a("q-input",{staticClass:"col-sm-2",attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}},[a("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateTo.hide(),t.filterTestimonials()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)],1)],1)])],1),t.testimonialsData.length?a("div",{staticClass:"row q-pt-md"},[a("json-excel",{staticClass:"col-sm-2",attrs:{data:t.testimonialsData,fields:t.csv_fields,name:"Testimonials.csv",type:"csv"}},[a("q-btn",{staticStyle:{"-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px"},attrs:{color:"secondary",icon:"fas fa-save",label:"EXPORT",size:"sm",unelevated:""}})],1),a("span",{staticClass:"col-sm-5"}),a("q-select",{staticClass:"col-sm-2",staticStyle:{"margin-top":"0","font-size":"12px"},attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],dense:"","emit-value":"","map-options":""},on:{change:t.filterTestimonials},model:{value:t.filter.per_page,callback:function(e){t.$set(t.filter,"per_page",e)},expression:"filter.per_page"}}),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[t._v("\n            "+t._s(t.entries.to)+" out of "+t._s(t.entries.total))])],1):t._e(),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"30px"}},[t.testimonialsData.length>0?a("table",{staticClass:"q-table"},[t._m(0),a("tbody",t._l(t.testimonialsData,(function(e,s){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[t._v(t._s(e.full_name))]),a("td",{staticClass:"text-center"},[t._v(t._s(t._f("shortenText")(e.email_address)))]),a("td",{staticClass:"text-center",attrs:{title:"Double-click to edit story"},on:{dblclick:function(e){return t.editDialog(s)}}},[t._v(t._s(t._f("shortenText")(e.my_story))+"\n                ")]),a("td",{staticClass:"text-center"},[e.type?a("img",{staticStyle:{"border-radius":"50%",cursor:"pointer"},attrs:{src:t.getImage(e.type,e.screenshot),alt:"--",height:"35px",width:"35px"},on:{click:function(a){t.openImage(t.getImage(e.type,e.screenshot))}}}):a("img",{staticStyle:{"border-radius":"50%",cursor:"pointer"},attrs:{src:t.getImage(e.type,e.image_url),alt:"--",height:"35px",width:"35px"},on:{click:function(a){t.openImage(t.getImage(e.type,e.image_url))}}})]),a("td",{staticClass:"text-center"},[t._v(t._s(t._f("profileType")(e.borrower_investor)))]),a("td",{staticClass:"text-center"},[t._v(t._s(t._f("moment")(e.date_added,"MMMM Do, YYYY")))]),a("td",{directives:[{name:"show",rawName:"v-show",value:0===e.type||1===e.type&&0===e.approved,expression:"testimonial.type === 0 ||\n                (testimonial.type === 1 && testimonial.approved === 0)"}],staticClass:"text-right",staticStyle:{"max-width":"50px"}},[a("q-toggle",{attrs:{"checked-icon":"fa fa-eye","false-value":0,"true-value":1,"unchecked-icon":"fa fa-eye-slash"},on:{input:function(a){return t.approveTestimonial(s,e)}},model:{value:e.approved,callback:function(a){t.$set(e,"approved",a)},expression:"testimonial.approved"}})],1),a("td",{staticClass:"text-right"},[a("q-btn",{staticClass:"q-ml-md",attrs:{color:"negative",flat:"",icon:"delete_forever",round:"",size:"sm"},on:{click:function(e){return t.showDialog("delete_testimonial",s)}}})],1)])})),0)]):t._e()]),t.testimonialsData.length<t.entries.total?a("div",{staticClass:"row justify-center"},[a("q-infinite-scroll",{attrs:{handler:t.refresher,offset:500}},[a("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):t._e()])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("NAME")]),a("th",[t._v("EMAIL")]),a("th",[t._v("STORY")]),a("th",[t._v("IMAGE")]),a("th",[t._v("USER TYPE")]),a("th",[t._v("DATE")]),a("th"),a("th")])])}],o=(a("8e6e"),a("8a81"),a("456d"),a("6b54"),a("c47a")),n=a.n(o),r=(a("ac6a"),a("cadf"),a("06db"),a("4db1")),l=a.n(r),c=a("b178"),p=a("1bdd");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={name:"Testimonials",meta:function(){return{title:"Testimonials"}},components:{JsonExcel:p["a"]},data:function(){return{activeNames:["1"],filter:{profile_type:"",approved:0,type:0,date_range:{from:"",to:""},page:1,per_page:"100"},testimonialsData:[],editIndex:"",csv_fields:{"Full Name":"full_name",Email:"email_address",Story:"my_story",Date:"date_added"},entries:{to:"",total:""},minFilterLength:3}},computed:{},mounted:function(){this.filterTestimonials()},methods:{refresher:function(t,e){this.filter.page++,this.$axios.get("testimonials/filter",{params:this.filter}).then(function(t){var e;(e=this.testimonialsData).push.apply(e,l()(t.data.data)),this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){this.$nprogress.done(),console.error(t)}.bind(this))},filterTestimonials:Object(c["e"])((function(){this.filter.page=1,this.$axios.get("testimonials/filter",{params:this.filter}).then(function(t){this.testimonialsData=t.data.data,this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){this.$nprogress.done(),console.error(t)}.bind(this))}),1e3),editTestimonial:function(t,e){var a=this.testimonialsData[t].id;this.$axios.post("testimonials/edit/".concat(a),{story:e}).then(function(a){!0===a.data.status&&(this.testimonialsData[t].my_story=e,this.showAlert("positive","Testimonial edited successfully"))}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred"),this.$nprogress.done()}.bind(this))},approveTestimonial:function(t,e){var a=this.testimonialsData[t].id,s=this.testimonialsData[t].approved;this.$axios.post("testimonials/approve/".concat(a),f({status:s},e)).then(function(t){!0===t.data.status?this.showAlert("positive",t.data.msg):("1"===e.approved?e.approved="0":e.approved="1",this.showAlert("negative",t.data.msg))}.bind(this)).catch(function(e){"1"===this.testimonialsData[t].approved?this.testimonialsData[t].approved="0":this.testimonialsData[t].approved="1",this.showAlert("negative","Error occurred"),this.$nprogress.done()}.bind(this))},deleteTestimonial:function(t){this.$axios.delete("testimonials/delete/".concat(this.testimonialsData[t].id)).then(function(e){!0===e.data.status&&(this.showAlert("positive","Testimonial deleted successfully"),this.testimonialsData.splice(t,1))}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred"),this.$nprogress.done()}.bind(this))},getImage:function(t,e){return t?"https://fint.ng/testimonial/screenshots/".concat(e):"https://fint.ng/testimonial/images/".concat(e)},openImage:function(t){open(t,"_blank")},editDialog:function(t){var e=this,a=this.testimonialsData[t].my_story;this.$q.dialog({title:"Prompt",message:"Please make changes and save","no-backdrop-dismiss":!0,"no-esc-dismiss":!0,prompt:{type:"textarea",label:"Edit Story",model:a},cancel:!0}).then((function(a){e.editTestimonial(t,a)}))},showDialog:function(t,e){var a=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$q.dialog({title:"Confirm",message:"Are you sure you want to do this?",ok:"Yes, Please",cancel:"Cancel"}).then((function(){"delete_testimonial"===t&&a.deleteTestimonial(e)}))},refreshEntries:function(){this.resetFilterData(),this.fetchTestimonials()},resetFilterData:function(){this.filter.profile_type="",this.filter.approved="",this.filter.date_range.from="",this.filter.date_range.to=""},showAlert:function(t,e){this.$q.notify({type:t,message:e,position:"top-right",timeout:5e3})},firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},filters:{firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},shortenText:function(t){return t.toString().length<=15?t:t.toString().slice(0,15)+"..."},profileType:function(t){return 0===t?"Borrower":"Lender"}}},u=m,h=(a("77dc"),a("2877")),g=Object(h["a"])(u,s,i,!1,null,"b782ab6a",null);e["default"]=g.exports},"77dc":function(t,e,a){"use strict";var s=a("b61a"),i=a.n(s);i.a},b61a:function(t,e,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"32d4":function(t,e,a){},"4dda":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loans-main q-pa-xl"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[a("q-expansion-item",{staticClass:"filter",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[a("div",{staticClass:"row q-gutter-md"},[a("q-input",{attrs:{clearable:"",label:"Loan ID"},on:{input:function(e){t.filter.loan_id.length>=t.minFilterLength&&/^\d+$/.test(t.filter.loan_id)&&t.filterLoans()}},model:{value:t.filter.loan_id,callback:function(e){t.$set(t.filter,"loan_id",e)},expression:"filter.loan_id"}}),a("q-input",{attrs:{clearable:"",label:"Borrower ID"},on:{input:function(e){t.filter.borrower_id.length>=2&&/^\d+$/.test(t.filter.borrower_id)&&t.filterLoans()}},model:{value:t.filter.borrower_id,callback:function(e){t.$set(t.filter,"borrower_id",e)},expression:"filter.borrower_id"}}),a("q-input",{attrs:{clearable:"",label:"Lender ID"},on:{input:function(e){t.filter.investor_id.length>=2&&/^\d+$/.test(t.filter.investor_id)&&t.filterLoans()}},model:{value:t.filter.investor_id,callback:function(e){t.$set(t.filter,"investor_id",e)},expression:"filter.investor_id"}}),a("q-input",{attrs:{clearable:"",label:"Loan Title"},on:{input:function(e){t.filter.loan_title.length>=t.minFilterLength&&t.filterLoans()}},model:{value:t.filter.loan_title,callback:function(e){t.$set(t.filter,"loan_title",e)},expression:"filter.loan_title"}}),a("q-select",{attrs:{options:t.loan_grade_options,"emit-value":"","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.loan_grade,callback:function(e){t.$set(t.filter,"loan_grade",e)},expression:"filter.loan_grade"}}),a("q-select",{attrs:{options:t.loan_term_options,"emit-value":"","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.loan_term,callback:function(e){t.$set(t.filter,"loan_term",e)},expression:"filter.loan_term"}}),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Employment Model",value:"emp_model"}],"emit-value":"",hint:"Loan Category","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.loan_category,callback:function(e){t.$set(t.filter,"loan_category",e)},expression:"filter.loan_category"}}),a("q-input",{attrs:{clearable:"",hint:"Greater than this rate",label:"Interest Rate"},on:{input:function(e){return t.validateInteger(t.filter.interest_rate)}},model:{value:t.filter.interest_rate,callback:function(e){t.$set(t.filter,"interest_rate",e)},expression:"filter.interest_rate"}}),a("q-input",{attrs:{clearable:"",hint:"Greater than this amount",label:"From Amount"},on:{input:function(e){return t.validateInteger(t.filter.amount.from)}},model:{value:t.filter.amount.from,callback:function(e){t.$set(t.filter.amount,"from",e)},expression:"filter.amount.from"}}),a("q-input",{attrs:{clearable:"",hint:"Less than this amount",label:"To Amount"},on:{input:function(e){return t.validateInteger(t.filter.amount.to)}},model:{value:t.filter.amount.to,callback:function(e){t.$set(t.filter.amount,"to",e)},expression:"filter.amount.to"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}},[a("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateFrom.hide(),t.filterLoans()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}},[a("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateTo.hide(),t.filterLoans()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)],1),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Has files",value:"has_files"},{label:"Has no files",value:"no_files"}],"emit-value":"",hint:"Has uploaded files","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.has_files,callback:function(e){t.$set(t.filter,"has_files",e)},expression:"filter.has_files"}}),a("q-select",{attrs:{options:t.loan_type_options,"emit-value":"",hint:"Choose loan type","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.loan_type,callback:function(e){t.$set(t.filter,"loan_type",e)},expression:"filter.loan_type"}}),a("q-field",{attrs:{hint:"For verification"}},[a("q-toggle",{attrs:{"checked-icon":"fas fa-home","icon-color":"white","unchecked-icon":"fas fa-home"},on:{input:t.filterLoans},model:{value:t.filter.home_verified,callback:function(e){t.$set(t.filter,"home_verified",e)},expression:"filter.home_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            Home\n                        ")])],1),a("q-toggle",{attrs:{"checked-icon":"fas fa-building","icon-color":"white","unchecked-icon":"fas fa-building"},on:{input:t.filterLoans},model:{value:t.filter.work_verified,callback:function(e){t.$set(t.filter,"work_verified",e)},expression:"filter.work_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            Office\n                        ")])],1),a("q-toggle",{attrs:{"checked-icon":"fas fa-mobile-alt","icon-color":"white","unchecked-icon":"fas fa-mobile-alt"},on:{input:t.filterLoans},model:{value:t.filter.phone_verified,callback:function(e){t.$set(t.filter,"phone_verified",e)},expression:"filter.phone_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            Phone\n                        ")])],1),a("q-toggle",{staticStyle:{"padding-right":"8px"},attrs:{"checked-icon":"fas fa-credit-card","icon-color":"white","unchecked-icon":"fas fa-credit-card"},on:{input:t.filterLoans},model:{value:t.filter.bvn_verified,callback:function(e){t.$set(t.filter,"bvn_verified",e)},expression:"filter.bvn_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            BVN\n                        ")])],1),a("q-toggle",{attrs:{"checked-icon":"fas fa-newspaper","icon-color":"white","unchecked-icon":"fas fa-newspaper"},on:{input:t.filterLoans},model:{value:t.filter.bank_stat_verified,callback:function(e){t.$set(t.filter,"bank_stat_verified",e)},expression:"filter.bank_stat_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            Bank Statement\n                        ")])],1)],1),a("q-field",{attrs:{hint:"Borrower type"}},[a("q-toggle",{attrs:{"icon-color":"white",label:"RET","left-label":""},on:{input:t.filterLoans},model:{value:t.filter.is_ret_borr,callback:function(e){t.$set(t.filter,"is_ret_borr",e)},expression:"filter.is_ret_borr"}},[a("q-tooltip",{attrs:{delay:300,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            Returning Borrower\n                        ")])],1),a("q-toggle",{attrs:{"icon-color":"white",label:"EMP","left-label":""},on:{input:t.filterLoans},model:{value:t.filter.is_emp_model,callback:function(e){t.$set(t.filter,"is_emp_model",e)},expression:"filter.is_emp_model"}},[a("q-tooltip",{attrs:{delay:300,offset:[5,5],anchor:"top middle",self:"bottom middle"}},[t._v("\n                            Employment Model\n                        ")])],1)],1)],1),a("div",{staticClass:"row",staticStyle:{"margin-top":"40px"}},[a("q-expansion-item",{staticClass:"col-sm-3",staticStyle:{color:"#979797"},attrs:{label:"Funded/Disbursed"}},[a("q-select",{attrs:{options:[{label:"",value:""},{label:"Not fully funded",value:"not_fully_funded"},{label:"Fully funded",value:"fully_funded"},{label:"Disbursed",value:"has_disbursed"},{label:"Fully funded not disbursed",value:"fully_funded_not_disbursed"}],"emit-value":"",label:"Funded/Disbursed","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.funded,callback:function(e){t.$set(t.filter,"funded",e)},expression:"filter.funded"}}),a("q-input",{attrs:{disable:t.componentState.funded_dates,clearable:"",hint:"Exactly from this date",label:"Date From"},on:{click:function(e){return t.$refs.funded_dateFrom.show()}},model:{value:t.filter.funded_date_range.from,callback:function(e){t.$set(t.filter.funded_date_range,"from",e)},expression:"filter.funded_date_range.from"}},[a("q-popup-proxy",{ref:"funded_dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.funded_dateFrom.hide(),t.filterLoans()}},model:{value:t.filter.funded_date_range.from,callback:function(e){t.$set(t.filter.funded_date_range,"from",e)},expression:"filter.funded_date_range.from"}})],1)],1),a("q-input",{attrs:{disable:t.componentState.funded_dates,clearable:"",hint:"Exactly to this date",label:"Date To"},on:{click:function(e){return t.$refs.funded_dateTo.show()}},model:{value:t.filter.funded_date_range.to,callback:function(e){t.$set(t.filter.funded_date_range,"to",e)},expression:"filter.funded_date_range.to"}},[a("q-popup-proxy",{ref:"funded_dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.funded_dateTo.hide(),t.filterLoans()}},model:{value:t.filter.funded_date_range.to,callback:function(e){t.$set(t.filter.funded_date_range,"to",e)},expression:"filter.funded_date_range.to"}})],1)],1)],1),a("q-expansion-item",{staticClass:"col-sm-4",staticStyle:{color:"#979797"},attrs:{label:"Months in Default"}},[a("div",{staticClass:"row q-gutter-xs"},[a("q-select",{staticClass:"col-4",attrs:{options:t.months_default_range,"emit-value":"",hint:">=",label:"Select","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.months_default.from,callback:function(e){t.$set(t.filter.months_default,"from",e)},expression:"filter.months_default.from"}}),a("q-select",{staticClass:"col-4",attrs:{options:t.months_default_range,"emit-value":"",hint:"<=",label:"Select","map-options":""},on:{input:t.filterLoans},model:{value:t.filter.months_default.to,callback:function(e){t.$set(t.filter.months_default,"to",e)},expression:"filter.months_default.to"}})],1),a("div",[a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},on:{change:function(e){return t.filterLoans()}},model:{value:t.filter.default_date_range.from,callback:function(e){t.$set(t.filter.default_date_range,"from",e)},expression:"filter.default_date_range.from"}},[a("q-popup-proxy",{ref:"default_dateFrom",attrs:{"context-menu":"","transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.default_dateFrom.hide(),t.filterLoans()}},model:{value:t.filter.default_date_range.from,callback:function(e){t.$set(t.filter.default_date_range,"from",e)},expression:"filter.default_date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},on:{change:function(e){return t.filterLoans()}},model:{value:t.filter.default_date_range.to,callback:function(e){t.$set(t.filter.default_date_range,"to",e)},expression:"filter.default_date_range.to"}},[a("q-popup-proxy",{ref:"default_dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.default_dateTo.hide(),t.filterLoans()}},model:{value:t.filter.default_date_range.to,callback:function(e){t.$set(t.filter.default_date_range,"to",e)},expression:"filter.default_date_range.to"}})],1)],1)],1)])],1)])],1),t.loansData.length?a("div",{staticClass:"row"},[t.loansData.length?a("json-excel",{staticClass:"col-sm-2",attrs:{data:t.loansData,fields:t.csv_fields,name:"data.csv",type:"csv"}},[a("q-btn",{staticStyle:{"-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px","font-size":"10px"},attrs:{color:"secondary",icon:"fas fa-save",label:"Export",size:"sm",unelevated:""}})],1):t._e(),a("span",{staticClass:"col-sm-5"}),a("q-select",{staticClass:"col-sm-2",attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],dense:"","emit-value":"","map-options":""},on:{change:function(e){return t.filterLoans()}},model:{value:t.filter.per_page,callback:function(e){t.$set(t.filter,"per_page",e)},expression:"filter.per_page"}}),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:" col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[t._v(t._s(t.entries.to)+" out of\n                "+t._s(t.entries.total))])],1):t._e(),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"30px"}},[t._l(t.loansData,(function(e,n){return[a("q-card",{class:{"bg-deep-purple-1":1==e.disbursed,"bg-green-1":1==e.disb_clear&&0==e.disbursed&&0==e.funded_amount,"bg-orange-1":e.funded_amount>0&&e.funded_amount<e.amount&&0==e.disbursed,"bg-blue-1":e.amount==e.funded_amount&&0==e.disbursed,"bg-grey-4":1==e.declined,"col-md-2 col-sm-4 shadow-1 q-ma-sm":!0},attrs:{inline:""}},[1==e.disb_clear&&e.months_default>0?a("label",{staticClass:"pull-right",style:{"background-color":1===e.months_default?"#EE7942":"#870000",color:"whitesmoke","font-size":"12px",padding:"3px 7px",cursor:"pointer",position:"relative",top:"-5px",left:"5px",float:"left"},attrs:{title:"Number of months in default"},on:{click:function(a){return t.gotoSchedule(e.id)}}},[t._v("\n                    "+t._s(e.months_default)+"\n                ")]):t._e(),a("div",{staticClass:"row justify-end"},[e.borrower.company&&e.borrower.company.id>0?a("label",{staticClass:"tag",staticStyle:{"background-color":"tan",color:"saddlebrown"},attrs:{title:"Employment Model Loan"}},[t._v("E")]):t._e(),e.repaid_loans_by_borrower_count>0?a("label",{staticClass:"tag",staticStyle:{"background-color":"lightgreen",color:"green"},attrs:{title:"Loan from Returning Borrower"}},[t._v("R")]):t._e()]),a("q-card-section",{staticClass:"q-pb-sm"},[a("span",{staticClass:"card-title"},[t._v(t._s(e.id)+"\n                        "),null!==e.comment_count&&e.comment_count.count>0?a("i",{staticClass:"text-orange-6 fa fa-circle",staticStyle:{"font-size":"6px",position:"relative",bottom:"7px"}}):t._e()]),e.comment_info?a("i",{staticClass:"text-orange-6 fa fa-circle",staticStyle:{"font-size":"6px",position:"relative",bottom:"7px"}}):t._e(),a("span",{staticClass:"card-subtitle"},[t._v("\n                        "+t._s(t._f("firstCaps")(e.title))+"\n                        "),a("br"),0==e.disbursed?a("small",{on:{dblclick:function(a){t.loanInfoIndex=n,t.showAmountDialog(e.id,"loan_amt_update")}}},[t._v("\n                                ₦"+t._s(t._f("formatAmount")(e.funded_amount))+" / ₦"+t._s(t._f("formatAmount")(e.amount))+"\n                            ")]):a("small",[t._v("\n                                ₦"+t._s(t._f("formatAmount")(e.funded_amount))+" / ₦"+t._s(t._f("formatAmount")(e.amount))+"\n                            ")]),a("br"),a("small",[a("span",{staticClass:"cursor-pointer",on:{dblclick:function(a){t.loanInfoIndex=n,t.updateLoanTermDialog(e.id)}}},[t._v("\n                                "+t._s(e.term))]),t._v(" |\n                            "+t._s(e.loan_grade)+" |\n                            "+t._s(e.interest_rate)+"%\n                        ")])])]),a("q-card-section",{staticClass:"card-buttons q-pa-none  text-grey"},[a("div",{staticClass:"row justify-center q-mb-sm"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],class:1===e.home_address_verified?"text-positive":-1===e.home_address_verified?"text-negative":"text-faded",attrs:{flat:"",icon:"fas fa-home",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                Home verification\n                            ")]),a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[t._v("Choose an action to be performed on "),a("strong",[t._v("home")]),t._v(" of this borrower."),a("br")]),-1!==e.home_address_verified?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"float-left",attrs:{color:"negative",flat:"",label:"INVALIDATE",size:"small"},on:{click:function(a){return t.unVerifyDocuments(e.id,e.borrower.id,"home",n)}}}):t._e(),1!==e.home_address_verified?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right",attrs:{color:"positive",flat:"",label:"VALIDATE",size:"small"},on:{click:function(a){return t.verifyDocuments(e.id,e.borrower.id,"home",n)}}}):t._e()],1)],1),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],class:1===e.work_address_verified?"text-positive":-1===e.work_address_verified?"text-negative":"text-faded",attrs:{flat:"",icon:"fas fa-building",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                Employment verification\n                            ")]),a("q-menu",{staticStyle:{padding:"20px"},attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[t._v("Choose an action to be performed on "),a("strong",[t._v("home")]),t._v(" of this borrower."),a("br")]),-1!==e.work_address_verified?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"float-left",attrs:{color:"negative",flat:"",label:"INVALIDATE",size:"small"},on:{click:function(a){return t.unVerifyDocuments(e.id,e.borrower.id,"office",n)}}}):t._e(),1!==e.work_address_verified?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right",attrs:{color:"positive",flat:"",label:"VALIDATE",size:"small"},on:{click:function(a){return t.verifyDocuments(e.id,e.borrower.id,"office",n)}}}):t._e()],1)],1),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],class:e.files.length>0?"text-positive":"text-negative",attrs:{flat:"",icon:"fas fa-copy",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                Files\n                            ")]),e.files.length>0?a("q-menu",{attrs:{anchor:"top left",self:"bottom left"}},[a("q-list",{staticStyle:{"font-size":"12px"},attrs:{separator:""}},[a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{overline:""}},[t._v("DOCUMENTS")])],1)],1),t._l(e.files,(function(e){return a("q-item",{key:e.id},[a("q-item-section",[a("q-item-label",[a("a",{attrs:{href:"//fint.ng/borrowers_portal/public/static/documents/"+e.url,target:"_blank"}},[t._v("\n                                                    "+t._s(e.filetype.description)+"\n                                                ")])])],1)],1)}))],2)],1):a("q-menu",{staticStyle:{padding:"20px"},attrs:{anchor:"top left",self:"bottom left"}},[a("q-item",[a("q-item-section",[a("q-item-label",[t._v("No files")])],1)],1)],1)],1)],1),a("div",{staticClass:"row justify-center"},[e.file_flag.identification?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],class:"1"===e.file_flag.identification.status?"text-positive":"-1"===e.file_flag.identification.status?"text-negative":"text-faded",attrs:{flat:"",icon:"far fa-id-card",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                ID verification\n                                "),"-1"===e.file_flag.identification.status?a("blockquote",{staticStyle:{"font-size":"12px","border-left-color":"goldenrod"}},[t._v("\n                                    "+t._s(e.file_flag.identification.comment)+"\n                                ")]):t._e()]),a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[t._v("Choose an action to be performed on "),a("strong",[t._v("ID")]),t._v(" of this borrower."),a("br")]),"-1"!==e.file_flag.identification.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-left",attrs:{color:"negative",flat:"",label:"INVALIDATE"},on:{click:function(a){return t.showRemarkDialog("unverify_documents",{loan_id:e.id,borrower_id:e.borrower.id,field:"id",index:n})}}}):t._e(),"1"!==e.file_flag.identification.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-right",attrs:{color:"positive",flat:"",label:"VALIDATE"},on:{click:function(a){return t.verifyDocuments(e.id,e.borrower.id,"id",n)}}}):t._e()],1)],1):t._e(),e.file_flag.employment_verification?a("q-btn",{class:"1"===e.file_flag.employment_verification.status?"text-positive":"-1"===e.file_flag.employment_verification.status?"text-negative":"text-faded",attrs:{flat:"",icon:"fas fa-envelope-open",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                Employment verification\n                                "),"-1"===e.file_flag.employment_verification.status?a("blockquote",{staticStyle:{"font-size":"12px","border-left-color":"goldenrod"}},[t._v("\n                                    "+t._s(e.file_flag.employment_verification.comment)+"\n                                ")]):t._e()]),a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[t._v("Choose an action to be performed on "),a("strong",[t._v("Employment Verification")]),t._v(" of\n                                    this borrower."),a("br")]),"-1"!==e.file_flag.employment_verification.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-left",attrs:{color:"negative",flat:"",label:"INVALIDATE"},on:{click:function(a){return t.showRemarkDialog("unverify_documents",{loan_id:e.id,borrower_id:e.borrower.id,field:"employment",index:n})}}}):t._e(),"1"!==e.file_flag.employment_verification.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-right",attrs:{color:"positive",flat:"",label:"VALIDATE"},on:{click:function(a){return t.verifyDocuments(e.id,e.borrower.id,"employment",n)}}}):t._e()],1)],1):t._e(),e.file_flag.address_verification?a("q-btn",{class:"1"===e.file_flag.address_verification.status?"text-positive":"-1"===e.file_flag.address_verification.status?"text-negative":"text-faded",attrs:{flat:"",icon:"fas fa-file-alt",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                Utility Bill verification\n                                "),"-1"===e.file_flag.address_verification.status?a("blockquote",{staticStyle:{"font-size":"12px","border-left-color":"goldenrod"}},[t._v("\n                                    "+t._s(e.file_flag.address_verification.comment)+"\n                                ")]):t._e()]),a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[t._v("Choose an action to be performed on "),a("strong",[t._v("Address Verification")]),t._v(" of this\n                                    borrower."),a("br")]),"-1"!==e.file_flag.address_verification.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-left",attrs:{color:"negative",flat:"",label:"INVALIDATE"},on:{click:function(a){return t.showRemarkDialog("unverify_documents",{loan_id:e.id,borrower_id:e.borrower.id,field:"utility",index:n})}}}):t._e(),"1"!==e.file_flag.address_verification.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-right",attrs:{color:"positive",flat:"",label:"VALIDATE"},on:{click:function(a){return t.verifyDocuments(e.id,e.borrower.id,"utility",n)}}}):t._e()],1)],1):t._e(),e.file_flag.bank_statement?a("q-btn",{class:"1"===e.file_flag.bank_statement.status?"text-positive":"-1"===e.file_flag.bank_statement.status?"text-negative":"text-faded",attrs:{flat:"",icon:"fas fa-newspaper",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[t._v("\n                                Bank Statement verification\n                                "),a("br"),"-1"===e.file_flag.bank_statement.status?a("blockquote",{staticStyle:{"font-size":"12px","border-left-color":"goldenrod"}},[t._v("\n                                    "+t._s(e.file_flag.bank_statement.comment)+"\n                                ")]):t._e()]),a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[t._v("Choose an action to be performed on "),a("strong",[t._v("Bank Statement")]),t._v(" of this\n                                    borrower."),a("br")]),"-1"!==e.file_flag.bank_statement.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-left",attrs:{color:"negative",flat:"",label:"INVALIDATE"},on:{click:function(a){return t.showRemarkDialog("unverify_documents",{loan_id:e.id,borrower_id:e.borrower.id,field:"bank_statement",index:n})}}}):t._e(),"1"!==e.file_flag.bank_statement.status?a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"float-right",attrs:{color:"positive",flat:"",label:"VALIDATE"},on:{click:function(a){return t.verifyDocuments(e.id,e.borrower.id,"bank_statement",n)}}}):t._e()],1)],1):t._e()],1)]),a("q-card-actions",{staticClass:"justify-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{color:"darkgrey"},attrs:{flat:"",icon:"fas fa-user"},on:{click:function(a){return t.gotoBorrower(e.borrower.id)}}},[t._v(t._s(e.borrower.id)+"\n                    ")]),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{color:"darkgrey"},attrs:{flat:"",icon:"fas fa-eye",label:"VIEW"},on:{click:function(a){return t.showInfoModal(e,n)}}})],1)],1)]}))],2),a("div",[a("q-dialog",{staticClass:"scroll",attrs:{minimized:""},on:{hide:function(e){return t.closeTabs()}},model:{value:t.infoModal,callback:function(e){t.infoModal=e},expression:"infoModal"}},[a("q-card",{staticStyle:{width:"900px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"},on:{click:t.closeModal}})],1),a("q-card-section",[Object.keys(t.loanInfo).length>0?a("div",{staticStyle:{margin:"0 50px 50px"}},[a("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"2em"}},[a("div",{staticClass:"avenir-next-thin",staticStyle:{"font-size":"3rem"}},[t._v("\n                                "+t._s(t.loanInfo.id)+"\n                            ")]),a("small",{staticStyle:{color:"lightgrey"}},[t._v("\n                                "+t._s(t._f("moment")(t.loanInfo.date_created,"MMM Do YYYY, h:mm:ss A"))+"\n                            ")])]),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Risk Score")]),a("p",[t._v(t._s(t.loanInfo.borrower_risk_score))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Purpose")]),a("p",[t._v(t._s(t.loanInfo.purpose.purpose_name))])]),1===t.loanInfo.disb_clear?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Date Cleared")]),"0000-00-00 00:00:00"!==t.loanInfo.date_disb_clear&&null!==t.loanInfo.date_disb_clear?a("p",[t._v("\n                                        "+t._s(t._f("moment")(t.loanInfo.date_disb_clear,"MMM Do YYYY"))+"\n                                    ")]):a("p",[t._v("\n                                        --\n                                    ")])]):t._e(),"0000-00-00 00:00:00"!=t.loanInfo.date_disbursed?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Date Disbursed")]),a("p",[t._v(t._s(t._f("moment")(t.loanInfo.date_disbursed,"MMM Do YYYY")))])]):t._e(),"0000-00-00 00:00:00"!=t.loanInfo.date_disbursed?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Date Received")]),a("p",[t._v(t._s(t._f("moment")(t.loanInfo.disbursed_info.date_of_last_attempt,"MMM Do YYYY")))])]):t._e(),"0000-00-00 00:00:00"!=t.loanInfo.date_disbursed?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Amount Disbursed")]),a("p",[t._v("₦"+t._s(t._f("formatAmount")(t.loanInfo.disbursed_info.amount)))])]):t._e(),null!=t.loanInfo.date_disbursed?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Total Payback")]),a("p",[t._v("₦"+t._s(t._f("formatAmount")(t.loanInfo.payback_due)))])]):t._e(),null!=t.loanInfo.date_disbursed?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Monthly Payback")]),a("p",[t._v("₦"+t._s(t._f("formatAmount")(Math.round(t.loanInfo.payback_due/t.loanInfo.term))))])]):t._e(),t.loanInfo.borrower.company?a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[t._v("Company")]),a("p",[t._v(t._s(t.loanInfo.borrower.company.name))])]):t._e()]),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"10px"}},[0==t.loanInfo.disbursed&&""==t.filter.loan_type?a("div",{staticClass:"col-sm-4 text-center"},[0==t.loanInfo.disb_clear?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"positive",flat:"",label:"CLEAR LOAN"},on:{click:function(e){return t.clearLoan(t.loanInfo.id,"clear")}}}):a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"orange",flat:"",label:"UNCLEAR LOAN"},on:{click:function(e){return t.clearLoan(t.loanInfo.id,"unclear")}}})],1):t._e(),1==t.loanInfo.disbursed?a("div",{staticClass:"col-sm-4 text-center"},[""==t.filter.loan_type?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"orange",flat:"",label:"MARK AS DEFAULT"},on:{click:function(e){return t.showRemarkDialog("mark_default",t.loanInfo.id)}}}):t._e(),"defaulted"==t.filter.loan_type?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"positive",flat:"",label:"MOVE OUT OF DEFAULT"},on:{click:function(e){return t.showRemarkDialog("unmark_default",t.loanInfo.id)}}}):t._e()],1):t._e(),t.loanInfo.disbursed&&t.$can("wallet-transactions")?a("div",{staticClass:"col-sm-4 text-center"},[""==t.filter.loan_type&&t.check_for_ack?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"blue",flat:"",label:"CONFIRM PAYBACK"},on:{click:function(e){return t.showAmountDialog(t.loanInfo.id,"payback")}}}):t._e(),""!=t.filter.loan_type||t.check_for_ack?t._e():a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"blue",flat:"",label:"PAYBACK ACK"},on:{click:function(e){return t.showDialog("acknowledge_payback",t.loanInfo.id)}}})],1):t._e(),1==t.loanInfo.disbursed?a("div",{staticClass:"col-sm-4 text-center"},[""==t.filter.loan_type?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"green",flat:"",label:"SWEEP CARD"},on:{click:function(e){return t.showDialog("sweep_card",t.loanInfo.id)}}}):t._e()],1):t._e(),0==t.loanInfo.disbursed&&""==t.filter.loan_type?a("div",{staticClass:"col-sm-4 text-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"negative",flat:"",label:"CANCEL LOAN"},on:{click:function(e){return t.showDialog("cancel_loan",t.loanInfo.id)}}})],1):t._e(),0==t.loanInfo.disbursed&&""==t.filter.loan_type&&0==t.loanInfo.disb_clear&&t.loanInfo.amount>t.loanInfo.funded_amount?a("div",{staticClass:"col-sm-4 text-center"},[0==t.loanInfo.declined?a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"tertiary",flat:"",label:"DECLINE LOAN"},on:{click:function(e){return t.showRemarkDialog("decline_loan",t.loanInfo.id)}}}):a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"positive",flat:"",label:"APPROVE LOAN"},on:{click:function(e){return t.showDialog("approve_loan",t.loanInfo.id)}}})],1):t._e(),0==t.loanInfo.disbursed&&""==t.filter.loan_type&&t.loanInfo.funded_amount<t.loanInfo.amount&&1==t.loanInfo.disb_clear?a("div",{staticClass:"col-sm-4 text-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"secondary",flat:"",label:"FUND LOAN"},on:{click:function(e){return t.showFundDialog1(t.loanInfo.id,"initial_funding")}}})],1):t._e(),0==t.loanInfo.disbursed&&""==t.filter.loan_type&&t.loanInfo.funded_amount===t.loanInfo.amount&&1==t.loanInfo.disb_clear?a("div",{staticClass:"col-sm-4 text-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"secondary",flat:"",label:"DISBURSE LOAN"},on:{click:function(e){return t.showDialog("disburse_loan",t.loanInfo.id)}}})],1):t._e()]),a("div",{staticClass:"row",staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"col"},[a("q-list",{attrs:{separator:""}},[a("q-expansion-item",{attrs:{disable:0==t.loanInfo.investments.length,group:"lenders-paybacks-updates-purpose-answers",icon:"fas fa-users",label:"Lenders"},model:{value:t.tabs.lenders,callback:function(e){t.$set(t.tabs,"lenders",e)},expression:"tabs.lenders"}},[t.loanInfo.investments.length?a("div",{staticClass:"row"},[a("table",{staticClass:"q-table striped-odd loose col-sm-12"},[a("tbody",t._l(t.loanInfo.investments,(function(e,n){return a("tr",[a("td",{staticClass:"text-center"},[t._v(t._s(e.investor_id))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.lender.username))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.amount_in))]),a("td",{staticClass:"text-center"},[t._v("\n                                                            "+t._s(t._f("moment")(e.date_created,"MMM Do, YYYY"))+"\n                                                        ")]),a("td",{staticClass:"text-center"},[1===e.non_amortizing?a("q-icon",{attrs:{name:"money",title:"Non-amortizing investment"}}):t._e()],1),""==t.filter.loan_type?a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{color:"secondary",flat:"",icon:"fas fa-exchange-alt",title:"Transfer Investment to another Lender"},on:{click:function(e){return t.showTransferLoanModal(n)}}}),a("q-btn",{attrs:{color:"secondary",flat:"",icon:"fas fa-coins",title:"Top up Investment"},on:{click:function(a){return t.showTopUpDialog(e.id,"topup_funding")}}}),a("q-btn",{attrs:{color:"negative",flat:"",icon:"far fa-trash-alt",title:"Delete Investment"},on:{click:function(a){return t.showDeleteNoteDialog(e.id)}}})],1):t._e()])})),0)])]):t._e()]),a("q-expansion-item",{attrs:{disable:0==t.loanInfo.paybacks.length,group:"lenders-paybacks-updates-purpose-answers",icon:"fas fa-calendar-alt",label:"Paybacks"},model:{value:t.tabs.paybacks,callback:function(e){t.$set(t.tabs,"paybacks",e)},expression:"tabs.paybacks"}},[t.loanInfo.paybacks.length?a("div",{staticClass:"row"},[a("table",{staticClass:"q-table striped-odd loose col-sm-12",attrs:{id:"payback-table"}},[a("tbody",t._l(t.loanInfo.paybacks,(function(e,n){return a("tr",{style:{color:t.paybackColorCode(e)}},[a("td",{staticClass:"text-center"},[t._v("#"+t._s(e.installment))]),a("td",{staticClass:"text-center"},[t._v("\n                                                            "+t._s(t._f("moment")(e.set_date,"MMM Do, YYYY"))+"\n                                                        ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.attempts)+" Attempt(s)")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.paybackTag(e)))])])})),0)])]):t._e()]),a("q-expansion-item",{attrs:{group:"lenders-paybacks-updates-purpose-answers",icon:"fas fa-info-circle",label:"Status Updates"},model:{value:t.tabs.updates,callback:function(e){t.$set(t.tabs,"updates",e)},expression:"tabs.updates"}},[a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.statusUpdates.display,expression:"!statusUpdates.display"}],staticClass:"row justify-end q-pa-md"},[a("q-btn",{attrs:{color:"blue",flat:"",label:"UPDATE STATUS"},on:{click:function(e){t.statusUpdates.display=!0}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.statusUpdates.display,expression:"statusUpdates.display"}],staticClass:"row gutter-md",staticStyle:{padding:"0 0 20px 0"}},[a("div",{staticClass:"col-sm-5"},[a("q-select",{attrs:{options:[{label:"Borrower Contact Failed",value:"borrower_contact_failed"},{label:"Borrower Contact Success",value:"borrower_contact_success"},{label:"Debt Collection Contact",value:"debt_collection_contact"},{label:"Debt Collection Dispatched",value:"debt_collection_dispatched"},{label:"Insurance Contact",value:"insurance_contact"},{label:"Insurance Covered",value:"insurance_covered"},{label:"Insurance not Covered",value:"insurance_not_covered"},{label:"Loan Back to Cleared",value:"loan_back_to_cleared"},{label:"Recovered",value:"recovered"}],label:"Status"},model:{value:t.statusUpdates.status,callback:function(e){t.$set(t.statusUpdates,"status",e)},expression:"statusUpdates.status"}})],1),a("div",{staticClass:"col-sm-5"},[a("q-input",{attrs:{"max-height":10,label:"Comment (optional)",type:"textarea"},model:{value:t.statusUpdates.comment,callback:function(e){t.$set(t.statusUpdates,"comment",e)},expression:"statusUpdates.comment"}})],1),a("div",{staticClass:"col-sm-2"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{loading:t.statusUpdates.working,color:"positive",flat:"",label:"SAVE"},on:{click:function(e){return t.onSaveStatusUpdate(t.loanInfo.id)}}})],1)]),a("q-timeline",{staticStyle:{padding:"0 24px"},attrs:{color:"secondary"}},t._l(t.loanInfo.statuses,(function(e,n){return a("q-timeline-entry",{key:e.id,attrs:{side:n%2==0?"left":"right",subtitle:t._f("moment")(e.date,"MMM Do YYYY, h:mm A"),title:e.statustype.desc}},[a("div",[t._v(t._s(e.comment))]),a("div",{staticClass:"float-right"},[t._v(" - "+t._s(e.admin.name))])])})),1)],1)]),a("q-expansion-item",{attrs:{group:"lenders-paybacks-updates-purpose-answers",icon:"fas fa-anchor",label:"Purpose"},on:{show:function(e){return t.getProposal(t.loanInfo.write_up)}},model:{value:t.tabs.purpose,callback:function(e){t.$set(t.tabs,"purpose",e)},expression:"tabs.purpose"}},[a("div",{staticClass:"q-pa-md text-center"},[/^\d+$/.test(t.loanInfo.write_up)?a("div",[a("p",[a("q-spinner-puff",{attrs:{size:40,color:"primary"}})],1)]):a("div",[t._v(t._s(t.loanInfo.write_up))])])]),""===t.filter.loan_type?a("q-expansion-item",{attrs:{group:"lenders-paybacks-updates-purpose-answers",icon:"fas fa-comments",label:"Test Answers"},on:{open:function(e){return t.getTestAnswers(t.loanInfo.borrower.id)}},model:{value:t.tabs.answers,callback:function(e){t.$set(t.tabs,"answers",e)},expression:"tabs.answers"}},[a("div",{staticClass:"q-pa-md text-center"},[t.loanInfo.hasOwnProperty("test_answers")?a("div",[Object.keys(t.loanInfo.test_answers).length>0?a("div",{staticClass:"row q-gutter-sm",staticStyle:{"padding-top":"10px"}},t._l(t.loanInfo.test_answers,(function(e,n){return a("div",{staticClass:"col-sm-4"},[a("strong",[t._v(t._s(n))]),a("p",[t._v(t._s(e))])])})),0):a("div",{staticClass:"text-center"},[a("span",{staticStyle:{"font-family":"'Avenir Next Thin', sans-serif"}},[t._v("Test answers not available")])])]):a("div",[a("p",[a("q-spinner-puff",{attrs:{size:40,color:"primary"}})],1)])])]):t._e()],1)],1)]),a("br"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 col-sm-12",staticStyle:{color:"gray","font-family":"'Avenir Next Thin', sans-serif"},attrs:{id:"admin_comments"}},[a("hr",{staticClass:"lingrad"}),!("comments"in t.loanInfo)||t.commentVars.loading?a("div",{staticClass:"text-center",staticStyle:{"padding-top":"20px"}},[a("p",[a("q-spinner-bars",{attrs:{size:20,color:"grey-6"}})],1)]):a("div",[a("div",{staticStyle:{"padding-top":"10px","line-height":"25px"}},[Object.keys(t.loanInfo).length&&t.loanInfo.comments.length>0?t._l(t.loanInfo.comments,(function(e,n){return a("comment",{key:e.id,class:"BORROWER"===e.entity?"text-cyan-6":"",attrs:{commentInfo:e,editable:"repaid"!==t.filter.loan_type,userID:t.commentVars.user_id,entity:"LOAN"},on:{"delete-comment":function(e){return t.onDeleteComment(n)},"edit-comment":function(e){return t.onEditComment(n,e)}}})})):a("span",[t._v("No comments")]),t.commentVars.addNewFlag?a("new-comment",{attrs:{entity_id_:t.loanInfo.id,entity:"LOAN"},on:{"cancel-comment":function(e){t.commentVars.addNewFlag=!1},"save-comment":t.onAddComment}}):t._e()],2),a("div",{staticStyle:{"margin-top":"20px"}},[Object.keys(t.loanInfo).length&&t.loanInfo.comments.length>0?[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],attrs:{disabled:t.commentVars.prevPageFlag,color:"amber",flat:"",round:"",size:"8px"},on:{click:function(e){return t.fetchComments("prev")}}},[a("q-icon",{attrs:{name:"fas fa-caret-left"}})],1),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],attrs:{disabled:t.commentVars.nextPageFlag,color:"amber",flat:"",round:"",size:"8px"},on:{click:function(e){return t.fetchComments("next")}}},[a("q-icon",{attrs:{name:"fas fa-caret-right"}})],1)]:t._e(),"repaid"!==t.filter.loan_type?a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],staticClass:"float-right",attrs:{color:"amber",flat:"",round:"",size:"10px"},on:{click:function(e){t.commentVars.addNewFlag=!0}}},[a("q-icon",{attrs:{name:"far fa-comment-dots"}})],1):t._e()],2)])])])])]):t._e()])],1)],1),a("q-dialog",{staticClass:"scroll",attrs:{minimized:""},model:{value:t.transferLoanModal.display,callback:function(e){t.$set(t.transferLoanModal,"display",e)},expression:"transferLoanModal.display"}},[a("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"},on:{click:function(e){return t.closeTransferLoanModal()}}})],1),a("q-card-section",[a("div",{staticStyle:{margin:"30px"}},[a("q-select",{staticClass:"q-mb-md",attrs:{options:[{label:"Loan",value:"loan"},{label:"Lender",value:"lender"}],"emit-value":"",hint:"Transfer To","map-options":""},on:{input:function(e){t.transferLoanModal.details="",t.transferLoanModal.id=""}},model:{value:t.transferLoanModal.entity,callback:function(e){t.$set(t.transferLoanModal,"entity",e)},expression:"transferLoanModal.entity"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"q-mb-md",attrs:{clearable:!0,hint:t.errors.first("ID"),label:"ID",name:"ID",type:"number"},on:{input:function(e){t.transferLoanModal.validate=!1,t.transferLoanModal.details=""}},model:{value:t.transferLoanModal.id,callback:function(e){t.$set(t.transferLoanModal,"id","string"===typeof e?e.trim():e)},expression:"transferLoanModal.id"}}),"loan"===t.transferLoanModal.entity?a("q-input",{staticClass:"q-mb-md",attrs:{hint:t.errors.first("Amount"),label:"Amount",name:"Amount",type:"number"},model:{value:t.transferLoanModal.amount,callback:function(e){t.$set(t.transferLoanModal,"amount","string"===typeof e?e.trim():e)},expression:"transferLoanModal.amount"}}):t._e(),a("q-input",{staticClass:"q-mb-md",attrs:{color:t.transferLoanModal.error?"red":"",disable:!0,"upper-case":!0,label:"Details"},model:{value:t.transferLoanModal.details,callback:function(e){t.$set(t.transferLoanModal,"details",e)},expression:"transferLoanModal.details"}}),0==t.transferLoanModal.validate?a("q-btn",{staticClass:"float-right q-my-md",attrs:{loading:t.transferLoanModal.working,color:"secondary",flat:"",label:"VALIDATE",title:"Click to validate lender ID"},on:{click:function(e){return t.validateEntityForTransfer(t.transferLoanModal.id,t.transferLoanModal.entity)}}}):t._e(),1==t.transferLoanModal.validate?a("q-btn",{staticClass:"float-right q-my-md",attrs:{loading:t.transferLoanModal.working,color:"secondary",flat:"",label:"TRANSFER",title:"Click to transfer to lender"},on:{click:function(e){return t.transferNote()}}}):t._e()],1)])],1)],1)],1),t.loansData.length<t.entries.total?a("div",{staticClass:"row justify-center"},[a("q-infinite-scroll",{attrs:{handler:t.refresher,offset:500}},[a("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):t._e()])},o=[],s=(a("8e6e"),a("8a81"),a("a481"),a("6762"),a("2fdb"),a("7514"),a("4db1")),i=a.n(s),r=a("967e"),l=a.n(r),c=a("c47a"),d=a.n(c),f=(a("96cf"),a("fa84")),u=a.n(f),m=(a("ac6a"),a("cadf"),a("456d"),a("20d6"),a("6b54"),a("06db"),a("b178")),p=a("1bdd"),h=a("6cd4"),_=a("79d3");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){d()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"Loans",meta:function(){return{title:"Loans"}},components:{JsonExcel:p["a"],Comment:h["a"],NewComment:_["a"]},data:function(){return{activeNames:["1"],filter:{loan_id:this.$route.query.id||"",borrower_id:this.$route.query.borrower_id||"",investor_id:this.$route.query.investor_id||"",loan_title:"",loan_grade:"",interest_rate:"",loan_term:"",loan_category:"",amount:{from:"",to:""},date_range:{from:"",to:""},default_date_range:{from:"",to:""},funded_date_range:{from:"",to:""},funded:"",disbursed:"",has_files:"",loan_type:this.$route.query.loan_type||"",months_default:{from:"",to:""},home_verified:!1,work_verified:!1,phone_verified:!1,bvn_verified:!1,bank_stat_verified:!1,has_previous_loans:"",is_ret_borr:!1,is_emp_model:!1,page:1,per_page:"50"},componentState:{funded_dates:!0},loansData:[],loanInfo:{},loanInfoIndex:"",text:"",contactData:{loanPhone:"",loanEmail:"",message:""},csv_fields:{"Loan ID":"id","Borrower ID":"borrower.id","First Name":"borrower.f_name","Last Name":"borrower.l_name",Phone:"borrower.phone",Email:"borrower.email","Company ID (EM)":"borrower.company.id","Company Name (EM)":"borrower.company.name","Duration of Loan":"term","Interest Rating":"interest_rate","Amount Requested":"amount","Credit Rating":"loan_grade","Document Status":"active","Request Date":"date_created","Days to Maturity":"funding_time_elapsed","Months in Default":"months_default","Street Address":"borrower.street_address",Landmark:"borrower.landmark",Town:"borrower.town",Area:"borrower.area","Business Name":"borrower.business_name","Business Address":"borrower.business_address","Business Landmark":"borrower.business_landmark","Business Town":"borrower.business_town","Business Area":"borrower.business_area","Disbursed Amount":"disbursed_info.amount","Disbursed Date":"disbursed_info.date_of_last_attempt"},entries:{to:"",total:""},minFilterLength:3,infoModal:!1,transferLoanModal:{display:!1,id:"",note_id:"",entity:"loan",amount:"",max_amount:"",details:"",error:!1,validate:!1,working:!1},tabs:{lenders:!1,paybacks:!1,updates:!1,purpose:!1,answers:!1},commentVars:{addNewFlag:!1,page:1,nextPageFlag:!1,prevPageFlag:!0,loading:!1,user_id:null},statusUpdates:{display:!1,status:"",comment:"",working:!1},loan_grade_options:[{label:"",value:""},{label:"A++",value:"A++"},{label:"A+",value:"A+"},{label:"A",value:"A"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B",value:"B"},{label:"B-",value:"B-"},{label:"C+",value:"C+"},{label:"C",value:"C"},{label:"C-",value:"C-"}],loan_term_options:[{label:"",value:""},{label:"3 months",value:"3"},{label:"6 months",value:"6"},{label:"12 months",value:"12"},{label:"18 months",value:"18"},{label:"24 months",value:"24"}],loan_type_options:[{label:"",value:""},{label:"Repaid Loans",value:"repaid"},{label:"Expired Loans",value:"expired"},{label:"Canceled Loans",value:"canceled"},{label:"Defaulted Loans",value:"defaulted"}],API_URL:"https://fint.ng/sandbox-api/api/"}},computed:{filterBaseUrl:function(){return""===this.filter.loan_type?"loans":"repaid"===this.filter.loan_type?"loans/repaid":"expired"===this.filter.loan_type?"loans/expired":"canceled"===this.filter.loan_type?"loans/canceled":"defaulted"===this.filter.loan_type?"loans/defaulted":void 0},months_default_range:function(){for(var t=[{label:"",value:""}],e=0;e<=18;e++){var a={label:e.toString(),value:e.toString()};t.push(a)}return t},check_for_ack:function(){var t=!1;return t=this.loanInfo.paybacks.findIndex((function(t){return 0===t.success&&("ACK"===t.await||t.percent_paid>0)})),t>=0}},created:function(){Object.keys(this.$route.query).length&&this.filterLoans()},methods:{exportData:function(){var t=this;return u()(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get(t.filterBaseUrl+"/filter",{params:b({export:!0},t.filter)});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))()},fetchLoans:function(){this.$axios.get(this.filterBaseUrl+"/fetch").then(function(t){this.loansData=t.data.data}.bind(this)).catch(function(t){console.error(t)}.bind(this))},fetchComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"prev"===t?this.commentVars.page>1&&this.commentVars.page--:"next"===t&&this.commentVars.page++,this.$axios.get(this.filterBaseUrl+"/fetchcomments",{params:{loan_id:this.loanInfo.id,page:this.commentVars.page}}).then(function(t){this.commentVars.loading=!1,null===t.data.comments.next_page_url?this.commentVars.nextPageFlag=!0:this.commentVars.nextPageFlag=!1,null===t.data.comments.prev_page_url?this.commentVars.prevPageFlag=!0:this.commentVars.prevPageFlag=!1,this.commentVars.user_id=t.data.user,this.$set(this.loanInfo,"comments",t.data.comments.data)}.bind(this)).catch(function(t){console.error(t)}.bind(this))},refresher:function(t,e){this.filter.page++,this.$axios.get(this.filterBaseUrl+"/filter",{params:this.filter}).then(function(t){var a;(a=this.loansData).push.apply(a,i()(t.data.data)),this.entries.to=t.data.to,this.entries.total=t.data.total,e()}.bind(this)).catch(function(t){e(),console.error(t)}.bind(this))},showInfoModal:function(t,e){this.loanInfo=t,this.loanInfoIndex=e,this.commentVars.page=1,this.commentVars.nextPageFlag=!1,this.fetchComments(),this.infoModal=!0},showTransferLoanModal:function(t){this.transferLoanModal.note_id=this.loanInfo.investments[t].id,this.transferLoanModal.max_amount=this.loanInfo.investments[t].amount_in,this.transferLoanModal.display=!0},closeModal:function(){this.loanInfo={},this.infoModal=!1},closeTransferLoanModal:function(){this.transferLoanModal.display=!1,this.transferLoanModal.id="",this.transferLoanModal.amount="",this.transferLoanModal.max_amount="",this.transferLoanModal.loan="",this.transferLoanModal.details="",this.transferLoanModal.note_id="",this.transferLoanModal.error=!1,this.transferLoanModal.validate=!1,this.transferLoanModal.working=!1},closeTabs:function(){for(var t in this.tabs)this.tabs[t]=!1},verifyDocuments:function(t,e,a,n){this.$axios.post("loans/verify",{loan_id:t,borrower_id:e,field:a}).then(function(t){if(t.data){var e=this.firstCaps(a);this.showAlert("positive",e+" verification successful"),"home"===a?this.loansData[n].home_address_verified=1:"office"===a?this.loansData[n].work_address_verified=1:"id"===a?this.loansData[n].file_flag.identification.status="1":"employment"===a?this.loansData[n].file_flag.employment_verification.status="1":"utility"===a?this.loansData[n].file_flag.address_verification.status="1":"bank_statement"===a&&(this.loansData[n].file_flag.bank_statement.status="1",this.loansData[n].bank_stat_verified="1"),1===this.loansData[n].address_verified&&1===this.loansData[n].work_address_verified&&1===this.loansData[n].bank_stat_verified&&(this.loansData[n].disb_clear=1)}}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred")}.bind(this))},unVerifyDocuments:function(t,e,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.$axios.post("loans/unverify",{loan_id:t,borrower_id:e,field:a,comment:o}).then(function(t){if(t.data){var e=this.firstCaps(a);this.showAlert("positive",e+" invalidation successful"),"home"===a?this.loansData[n].home_address_verified=-1:"office"===a?this.loansData[n].work_address_verified=-1:"id"===a?(this.loansData[n].file_flag.identification.status="-1",this.loansData[n].file_flag.identification.comment=o):"employment"===a?(this.loansData[n].file_flag.employment_verification.status="-1",this.loansData[n].file_flag.employment_verification.comment=o):"utility"===a?(this.loansData[n].file_flag.address_verification.status="-1",this.loansData[n].file_flag.address_verification.comment=o):"bank_statement"===a&&(this.loansData[n].file_flag.bank_statement.status="-1",this.loansData[n].file_flag.bank_statement.comment=o,this.loansData[n].bank_stat_verified=-1),0===this.loansData[n].disbursed&&(this.loansData[n].disb_clear=0)}}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred")}.bind(this))},filterLoans:Object(m["e"])((function(){"has_disbursed"===this.filter.funded?this.$set(this.componentState,"funded_dates",!1):this.$set(this.componentState,"funded_dates",!0),this.filter.page=1,this.$axios.get(this.filterBaseUrl+"/filter",{params:this.filter}).then(function(t){this.loansData=t.data.data,this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){console.error(t)}.bind(this))}),1e3),getProposal:function(t){/^\d+$/.test(this.loanInfo.write_up)&&this.$axios.post(this.filterBaseUrl+"/fetchproposal",{write_up:t}).then(function(t){this.loanInfo.write_up=t.data}.bind(this)).catch(function(t){console.error(t)}.bind(this))},clearLoan:function(t,e){this.$axios.post("loans/clear",{loan_id:t,action:e}).then(function(a){a.data&&("clear"==e?(this.showAlert("positive","Loan "+t+" cleared for disbursement"),this.loansData[this.loanInfoIndex].disb_clear=1,this.loanInfo.disb_clear=1):(this.showAlert("positive","Loan "+t+" uncleared for disbursement"),this.loansData[this.loanInfoIndex].disb_clear=0,this.loanInfo.disb_clear=0))}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))},cancelLoan:function(t){this.$axios.post("loans/cancel",{loan_id:t}).then(function(e){if(!0===e.data){this.showAlert("positive","Loan "+t+" cancelled successfully");var a=this.loanInfoIndex;a>-1&&this.loansData.splice(a,1),this.loanInfoIndex="",this.closeModal()}else this.showAlert("negative","Response error occurred")}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred")}.bind(this))},markAsDefault:function(t,e){this.$axios.post("loans/markasdefault",{loan_id:t,remark:e}).then(function(e){if(!0===e.data){this.showAlert("positive","Loan "+t+" successfully tagged as default");var a=this.loanInfoIndex;a>-1&&this.loansData.splice(a,1),this.loanInfoIndex="",this.closeModal()}else this.showAlert("negative","Response error occurred")}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred")}.bind(this))},moveOutOfDefault:function(t,e){this.$axios.post("loans/moveoutofdefault",{loan_id:t,remark:e}).then(function(e){if(!0===e.data){this.showAlert("positive","Loan "+t+" successfully moved out of default");var a=this.loanInfoIndex;a>-1&&this.loansData.splice(a,1),this.loanInfoIndex="",this.closeModal()}else this.showAlert("negative","Response error occurred")}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred")}.bind(this))},fundLoan:function(t,e){this.$axios.post("loans/fundloan",{loan_id:t,amount:e.amount,lender_id:e.lender_id}).then(function(a){!0===a.data.status?(this.showAlert("positive","Loan "+t+" funded successfully"),this.loanInfo.funded_amount+=parseInt(e.amount),this.loanInfo.investments=a.data.lenders,a.data.percent_funded>=100&&(this.loanInfo.disbursed=1)):!1===a.data.status?this.showAlert("warning",this.processErrors(a.data.errors)):this.showAlert("negative","Response error occurred")}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred")}.bind(this))},confirmPayback:function(t,e){this.$axios.post("loans/confirmpayback",{loan_id:t,amount:e}).then(function(t){if(!0===t.data.status){this.showAlert("positive","Payback confirmed successfully");var e=this.loansData[this.loanInfoIndex].paybacks.findIndex((function(t){return 0===t.success}));if(e>=0&&(this.loansData[this.loanInfoIndex].paybacks[e].attempts+=1,this.loanInfo.paybacks[e].percent_paid=t.data.percent_paid,t.data.percent_paid>=100&&(this.loanInfo.paybacks[e].success=1)),e=this.loansData[this.loanInfoIndex].paybacks.findIndex((function(t){return 0===t.success})),e<0){var a=this.loanInfoIndex;a>-1&&this.loansData.splice(a,1),this.loanInfoIndex="",this.entries.to-=1,this.entries.total-=1,this.closeModal()}}else this.showAlert("negative","Response error occurred")}.bind(this)).catch(function(t){this.showAlert("negative","Error occurred")}.bind(this))},acknowledgePayback:function(t){this.$axios.post("loans/acknowledgepayback",{loan_id:t}).then(function(t){if(t.data.status){this.showAlert("positive","Payback acknowledged successfully");var e=this.loanInfo.paybacks.findIndex((function(t){return 0===t.success}));e>=0&&(this.loanInfo.paybacks[e].await="ACK")}}.bind(this)).catch(function(t){if(t.response){console.log(t.response.data.errors);var e="";Object.keys(t.response.data.errors).forEach((function(a,n){e+=t.response.data.errors[a]+"\n"})),this.showAlert("negative",e)}else this.showAlert("negative","Operation error occurred"),console.error(t);this.$nprogress.done()}.bind(this))},gotoBorrower:function(t){this.$router.push({path:"borrowers",query:{id:t}})},gotoSchedule:function(t){this.$router.push({path:"schedule",query:{loan_id:t}})},getTestAnswers:function(t){this.$axios.post(this.filterBaseUrl+"/fetchtestanswers",{borrower_id:t}).then(function(t){this.$set(this.loanInfo,"test_answers",t.data)}.bind(this)).catch(function(t){console.error(t)}.bind(this))},sweepCard:function(t){this.$axios.post("https://fint.ng/cronjob/api/sweep/initialize/"+t,{},{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Apikey":"FINT_sk_jTjkuui5gcZw8svkpWMQBQZioh07jyuz"}}).then(function(t){var e=t.data;if("success"===e.status){this.showAlert("positive","Card Sweep successful");var a=this.loanInfo.paybacks.findIndex((function(t){return t.id==e.meta.payback_id}));this.loanInfo.paybacks[a].percent_paid=e.meta.percent_paid}else"failed"===e.status&&this.showAlert("warning",e.message)}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),this.$nprogress.done(),console.error(t)}.bind(this))},onEditComment:function(t,e){this.showAlert("positive","Comment updated successfully");var a=e.comment;this.loanInfo.comments[t].comment=a},onDeleteComment:function(t){this.showAlert("positive","Comment deleted successfully"),this.loanInfo.comments.splice(t,1),0===this.loanInfo.comments.length&&(this.commentVars.loading=!0,this.fetchComments("prev"))},onAddComment:function(t){this.showAlert("positive","Comment added successfully"),this.commentVars.addNewFlag=!1,1===this.commentVars.page&&this.loanInfo.comments.unshift(t)},loanAmountUpdate:function(t,e){this.$axios.post("loans/updateloanamount",{loan_id:t,amount:e}).then(function(t){t.data.status&&(this.showAlert("positive","Loan Amount updated successfully"),this.loansData[this.loanInfoIndex].amount=e,this.loansData[this.loanInfoIndex].payback_due=t.data.payback_due)}.bind(this)).catch(function(t){if(t.response){console.log(t.response.data.errors);var e="";Object.keys(t.response.data.errors).forEach((function(a,n){e+=t.response.data.errors[a]+"\n"})),this.showAlert("negative",e)}else this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))},paybackDate:function(t){return this.$moment(t).format("YYYY MM DD")},validateEntityForTransfer:function(t,e){var a=this;this.$validator.validateAll().then((function(n){n&&(a.transferLoanModal.working=!0,a.$axios.get("loans/validateentity",{params:{id:t,entity:e}}).then(function(t){t.data.status?this.transferLoanModal.validate=!0:this.transferLoanModal.error=!0,this.transferLoanModal.details=t.data.info,this.transferLoanModal.working=!1}.bind(a)).catch(function(t){this.transferLoanModal.working=!1,this.transferLoanModal.validate=!1,this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(a)))}))},transferNote:function(){this.$axios.post("loans/transfernote",{id_new:this.transferLoanModal.id,entity:this.transferLoanModal.entity,note_id:this.transferLoanModal.note_id,amount:this.transferLoanModal.amount}).then(function(t){var e=this;if(t.data.status){var a=this.loanInfo.investments.find((function(t){return t.id===e.transferLoanModal.note_id}));if("lender"===this.transferLoanModal.entity)if(1===this.loanInfo.disbursed)a.lender=t.data.lender.new,a.investor_id=t.data.lender.new.id;else{var n=this.loanInfo.investments.find((function(t){return t.investor_id===e.transferLoanModal.id}));void 0===n?(a.lender=t.data.lender.new,a.investor_id=t.data.lender.new.id):(n.amount_in+=a.amount_in,this.loanInfo.investments=this.loanInfo.investments.filter((function(t){return t.id!==e.transferLoanModal.note_id})))}else a.amount_in===this.transferLoanModal.amount?this.loanInfo.investments=this.loanInfo.investments.filter((function(t){return t.id!==e.transferLoanModal.note_id})):a.amount_in-=this.transferLoanModal.amount;this.showAlert("positive","Note Transferred Successfully"),this.closeTransferLoanModal()}else this.showAlert("warning","Something is wrong")}.bind(this)).catch(function(t){this.closeTransferLoanModal(),this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(this))},topUpFunding:function(t,e){this.$axios.post("loans/topupfunding",{note_id:t,amount:e}).then(function(t){if(t.data.status){var a=this.loanInfo.investments.find((function(e){return e.investor_id===t.data.lender_id}));a.amount_in=a.amount_in+e,this.loanInfo.funded_amount+=e,t.data.percent_funded>=100&&(this.loanInfo.disbursed=1),this.showAlert("positive","Funding Topped Up Successfully")}}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(this))},deleteNote:function(t){this.$axios.post("loans/deletenote",{note_id:t}).then(function(e){e.data.status&&(this.loanInfo.investments=this.loanInfo.investments.filter((function(e){return e.id!==t})),this.loanInfo.funded_amount-=e.data.amount,this.showAlert("positive","Investment Deleted Successfully"))}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(this))},onSaveStatusUpdate:function(t){this.statusUpdates.working=!0,this.$axios.post("loans/updatestatus",{loan_id:t,status:this.statusUpdates.status,comment:this.statusUpdates.comment}).then(function(t){this.statusUpdates.working=!1,this.statusUpdates.display=!1,this.statusUpdates.status="",this.statusUpdates.comment="",t.data.status&&(this.loanInfo.statuses.unshift(t.data.update),this.showAlert("positive","Loan Status Updated Successfully"))}.bind(this)).catch(function(t){this.statusUpdates.working=!1,this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(this))},updateLoanTerm:function(t,e){this.$axios.post("loans/updateloanterm",{loan_id:t,term:e}).then(function(t){t.status&&(this.showAlert("positive","Loan Term updated successfully"),this.loansData[this.loanInfoIndex].term=t.data.term,this.loansData[this.loanInfoIndex].interest_rate=t.data.interest_rate,this.loansData[this.loanInfoIndex].payback_due=t.data.payback_due)}.bind(this)).catch(function(t){t.response?(console.log(t.response.data.errors),this.showAlert("negative",this.processErrors(t.response.data.errors))):(this.showAlert("negative","Operation error occurred"),console.error(t)),this.$nprogress.done()}.bind(this))},disburseLoan:function(t){this.$axios.post("loans/disburseloan",{loan_id:t}).then(function(t){t.data.status?(this.showAlert("positive","Loan disbursed successfully"),this.loanInfo.disbursed=1,this.loanInfo.date_disbursed=t.data.data.date_disbursed,this.loanInfo.paybacks=t.data.data.paybacks):this.showAlert("warning",t.data.res.response_message)}.bind(this)).catch(function(t){if(t.response){console.log(t.response.data.errors);var e="";Object.keys(t.response.data.errors).forEach((function(a,n){e+=t.response.data.errors[a]+"\n"})),this.showAlert("negative",e)}else this.showAlert("negative","Operation error occurred"),console.error(t);this.$nprogress.done()}.bind(this))},approveLoan:function(t){this.$axios.post("loans/approveloan",{loan_id:t}).then(function(t){t.data.status?(this.showAlert("positive","Loan approved successfully"),this.loanInfo.declined=0):this.showAlert("warning",t.data.res.response_message)}.bind(this)).catch(function(t){if(t.response){console.log(t.response.data.errors);var e="";Object.keys(t.response.data.errors).forEach((function(a,n){e+=t.response.data.errors[a]+"\n"})),this.showAlert("negative",e)}else this.showAlert("negative","Operation error occurred"),console.error(t);this.$nprogress.done()}.bind(this))},declineLoan:function(t,e){this.$axios.post("loans/declineloan",{loan_id:t,info:e}).then(function(t){t.data.status?(this.showAlert("positive","Loan declined successfully"),this.loanInfo.declined=1):this.showAlert("warning",t.data.res.response_message)}.bind(this)).catch(function(t){if(t.response){console.log(t.response.data.errors);var e="";Object.keys(t.response.data.errors).forEach((function(a,n){e+=t.response.data.errors[a]+"\n"})),this.showAlert("negative",e)}else this.showAlert("negative","Operation error occurred"),console.error(t);this.$nprogress.done()}.bind(this))},validateInteger:function(t){parseInt(t)===+t&&this.filterLoans()},refreshEntries:function(){this.resetFilterData(),this.fetchLoans()},resetFilterData:function(){this.filter.loan_id="",this.filter.f_name="",this.filter.l_name="",this.filter.username="",this.filter.phone="",this.filter.email=""},showAlert:function(t,e){this.$q.notify({type:t,message:e,position:"top-right",timeout:5e3})},showRemarkDialog:function(t,e){var a=this;this.$q.dialog({title:"Prompt",message:"Please enter the reason for performing this operation",prompt:{type:"text",model:""},cancel:!0}).onOk((function(n){"mark_default"===t?a.showDialog("mark_default",e.loan_id,{info:n}):"unmark_default"===t?a.showDialog("unmark_default",e.loan_id,{info:n}):"unverify_documents"===t?a.unVerifyDocuments(e.loan_id,e.borrower_id,e.field,e.index,n):"decline_loan"===t&&a.showDialog(t,e,n)}))},showFundDialog1:function(t,e){var a=this;this.$q.dialog({title:"Prompt",message:"Please enter amount to fund",prompt:{type:"number",model:""},cancel:!0}).onOk((function(n){"initial_funding"===e?a.showFundDialog2(t,n):"topup_funding"===e&&a.showDialog(e,t,n)}))},showFundDialog2:function(t,e){var a=this;this.$q.dialog({title:"Prompt",message:"Please enter Lender ID",prompt:{type:"number",model:""},cancel:!0}).onOk((function(n){a.showDialog("fund_loan",t,{amount:e,lender_id:n})}))},showFundDialog3:function(t){var e=this;this.$q.dialog({title:"Prompt",message:"Please enter Lender ID",prompt:{type:"number",model:""},cancel:!0}).onOk((function(a){e.showFundDialog2(t,a)}))},showAmountDialog:function(t,e){var a=this;this.$q.dialog({title:"Prompt",message:"Please enter the amount to update",prompt:{type:"number",label:"Amount to update",model:""},cancel:!0}).onOk((function(n){"payback"===e?a.showDialog("confirm_payback",t,n):"loan_amt_update"===e&&a.showDialog("loan_amt_update",t,n)}))},showTopUpDialog:function(t){var e=this;this.$q.dialog({title:"Prompt",message:"Please enter amount to top up",prompt:{type:"number",model:""},cancel:!0}).onOk((function(a){e.showDialog("topup_funding",t,a)}))},showDeleteNoteDialog:function(t){var e=this;this.$q.dialog({title:"Confirm",message:"Performing this operation will delete this investment from the loan",ok:"I Agree",cancel:"Cancel"}).onOk((function(){e.showDialog("delete_note",t)}))},updateLoanTermDialog:function(t){var e=this;this.$q.dialog({title:"Prompt",message:"Please enter new loan term",prompt:{type:"number",label:"Loan Term",model:""},cancel:!0}).onOk((function(a){e.showDialog("loan_term_update",t,a)}))},showDialog:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$q.dialog({title:"Confirm",message:"Are you sure you want to do this?",ok:"Yes, Please",cancel:"Cancel"}).onOk((function(){"cancel_loan"===t?a.cancelLoan(e):"mark_default"===t?a.markAsDefault(e,n.info):"unmark_default"===t?a.moveOutOfDefault(e,n.info):"fund_loan"===t?a.fundLoan(e,n):"confirm_payback"===t?a.confirmPayback(e,n):"sweep_card"===t?a.sweepCard(e):"loan_amt_update"===t?a.loanAmountUpdate(e,n):"topup_funding"===t?a.topUpFunding(e,n):"delete_note"===t?a.deleteNote(e):"loan_term_update"===t?a.updateLoanTerm(e,n):"acknowledge_payback"===t?a.acknowledgePayback(e):"disburse_loan"===t?a.disburseLoan(e):"decline_loan"===t?a.declineLoan(e,n):"approve_loan"===t&&a.approveLoan(e)}))},firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},getDateFromTimestamp:function(t){},fetchTransDate:function(t){var e=this.loanInfo.payback_trans.find((function(e){return e.description.includes("Payback #"+t+" ")}));return e?this.$moment(e.date_created).format("MMM Do, YYYY"):"SUCCESS"},paybackColorCode:function(t){return 1===t.success?"green":t.percent_paid>0?"orange":"ACK"===t.await?"yellowgreen":t.attempts>0&&0===t.percent_paid||this.$moment(t.set_date)<this.$moment()?"red":"grey"},paybackTag:function(t){return 1===t.success?this.fetchTransDate(t.installment):"ACK"===t.await?"PROCESSING":t.attempts>0&&t.percent_paid>0?t.percent_paid+"%":t.attempts>0&&0===t.percent_paid?"FAILED":this.$moment(t.set_date)<this.$moment()?"DUE":"PENDING"},processErrors:function(t){var e="";return Object.keys(t).forEach((function(a,n){e+=t[a]+", "})),e.slice(0,-2)}},filters:{firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},formatAmount:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},roundUp:function(t){return Math.round(t)}}},y=g,w=(a("69a3"),a("2877")),x=Object(w["a"])(y,n,o,!1,null,"08f1d1c0",null);e["default"]=x.exports},"69a3":function(t,e,a){"use strict";var n=a("c308"),o=a.n(n);o.a},"6cd4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment",staticStyle:{"line-height":"25px"}},[!1===t.edit_?a("div",[a("span",{staticStyle:{"font-size":"14px","letter-spacing":".6px"}},[a("i",{staticClass:"fas fa-user-edit",staticStyle:{"font-size":"8px"}}),t._v(" "+t._s(t.comment)+" -\n                "),a("span",{staticClass:"text-green-8",staticStyle:{"font-size":"12px"}},[t._v("\n                    "+t._s(t.admin)+"\n                ")]),a("span",{staticClass:"text-orange-8",staticStyle:{"font-size":"10px","font-style":"italic"}},[t._v("\n                    "+t._s(t._f("moment")(t.date,"MMM Do YYYY, hh:mm A "))+"\n                ")])]),t._v("\n           \n        "),t.userID===t.admin_id&&t.editable?[a("q-btn",{attrs:{color:"faded",flat:"",icon:"fas fa-pencil-alt",label:"Edit"},on:{click:function(e){t.edit_=!0}}}),a("q-btn",{attrs:{color:"faded",flat:"",icon:"fas fa-trash-alt",label:"Delete"},on:{click:function(e){return t.deleteComment()}}})]:t._e()],2):a("div",[a("q-input",{attrs:{"max-height":10,"min-rows":2,"float-label":"Edit a comment",type:"textarea"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("div",{staticClass:"q-mt-md"},[a("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"fas fa-long-arrow-alt-left",size:"sm",title:"Cancel",unelevated:""},on:{click:function(e){t.edit_=!1}}}),a("q-btn",{attrs:{color:"positive",icon:"fas fa-save",size:"sm",title:"Save",unelevated:""},on:{click:function(e){return t.editComment()}}})],1)],1)])},o=[],s={props:["commentInfo","userID","entity","editable"],data:function(){return{comment_id:this.commentInfo.id,comment:this.commentInfo.comment,admin:this.commentInfo.admin.username,endpoint:this.entity.toLowerCase()+"s",admin_id:this.commentInfo.admin.id,entity_id:this.commentInfo.entity_id,date:this.commentInfo.date_created,edit_:!1}},methods:{editComment:function(){this.$axios.post(this.endpoint+"/editcomment",{comment_id:this.comment_id,entity_id:this.entity_id,comment:this.comment}).then(function(t){t.data.status&&(this.$emit("edit-comment",{entity_id:this.entity_id,comment:this.comment}),this.edit_=!1)}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))},deleteComment:function(){this.$axios.post(this.endpoint+"/deletecomment",{comment_id:this.comment_id}).then(function(t){t.data.status&&this.$emit("delete-comment")}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))}}},i=s,r=(a("d126"),a("2877")),l=Object(r["a"])(i,n,o,!1,null,"4a08e1a2",null);e["a"]=l.exports},"79d3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment",staticStyle:{"line-height":"25px"}},[a("q-input",{attrs:{type:"textarea","float-label":"Write a comment","max-height":10,"min-rows":2},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"fas fa-long-arrow-alt-left",size:"sm",unelevated:"",title:"Cancel"},on:{click:function(e){return t.$emit("cancel-comment")}}}),a("q-btn",{staticClass:"q-mr-md",attrs:{color:"positive",icon:"fas fa-save",size:"sm",title:"Save"},on:{click:function(e){return t.saveComment()}}})],1)},o=[],s={props:["entity_id_","entity"],data:function(){return{comment:"",entity_id:this.entity_id_,endpoint:this.entity.toLowerCase()+"s"}},methods:{saveComment:function(){this.$axios.post(this.endpoint+"/savecomment",{entity_id:this.entity_id_,comment:this.comment}).then(function(t){t.data.status&&this.$emit("save-comment",t.data.comment)}.bind(this)).catch(function(t){this.showAlert("negative","Operation error occurred"),console.error(t)}.bind(this))}}},i=s,r=(a("ccc4"),a("2877")),l=Object(r["a"])(i,n,o,!1,null,"22bd9976",null);e["a"]=l.exports},b51c:function(t,e,a){},c308:function(t,e,a){},ccc4:function(t,e,a){"use strict";var n=a("32d4"),o=a.n(n);o.a},d126:function(t,e,a){"use strict";var n=a("b51c"),o=a.n(n);o.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"2ba4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"log-main q-pa-xl"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[a("q-expansion-item",{staticClass:"filter",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[a("div",{staticClass:"row q-gutter-md"},[a("q-input",{attrs:{clearable:"",label:"User ID"},on:{input:function(e){(t.filter.user_id.length>=2&&/^\d+$/.test(t.filter.user_id)||0==t.filter.user_id.length)&&t.filterLog()}},model:{value:t.filter.user_id,callback:function(e){t.$set(t.filter,"user_id",e)},expression:"filter.user_id"}}),a("q-input",{attrs:{clearable:"",label:"Related Loan"},on:{input:function(e){(t.filter.loan_id.length>=2&&/^\d+$/.test(t.filter.loan_id)||0==t.filter.loan_id.length)&&t.filterLog()}},model:{value:t.filter.loan_id,callback:function(e){t.$set(t.filter,"loan_id",e)},expression:"filter.loan_id"}}),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Borrower",value:"0"},{label:"Lender",value:"1"}],"emit-value":"",label:"Type of user",hint:"Profile type","map-options":""},on:{input:t.filterLog},model:{value:t.filter.profile_type,callback:function(e){t.$set(t.filter,"profile_type",e)},expression:"filter.profile_type"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}},[a("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateFrom.hide(),t.filterLog()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}},[a("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){t.$refs.dateTo.hide(),t.filterLog()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)],1)],1)])],1),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"30px"}},[t.logData.length>0?a("table",{staticClass:"q-table loose"},[t._m(0),a("tbody",t._l(t.logData,(function(e,i){return a("tr",[a("td",{staticClass:"text-center",attrs:{title:"Click to navigate to user details"},on:{click:function(a){return t.gotoUser(e.user_id)}}},[t._v(t._s(e.user_id)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(0===e.type?"Borrower":"Lender"))]),a("td",{staticClass:"text-center"},[t._v(" "+t._s(e.action))]),a("td",{staticClass:"text-center",attrs:{title:"Click to navigate to loan details"},on:{click:function(a){return t.gotoLoan(e.related_loan)}}},[t._v(" "+t._s(0===e.related_loan?"--":e.related_loan)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(t._f("moment")(e.date,"MMM Do, YYYY hh:mm A")))])])})),0)]):t._e()]),t.logData.length<t.entries.total?a("div",{staticClass:"row justify-center"},[a("q-infinite-scroll",{attrs:{handler:t.refresher,offset:500}},[a("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):t._e()])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("USER ID")]),a("th",[t._v("PROFILE TYPE")]),a("th",[t._v("ACTION")]),a("th",[t._v("RELATED LOAN")]),a("th",[t._v("DATE")])])])}],n=(a("28a5"),a("6b54"),a("a481"),a("4db1")),o=a.n(n),l=(a("ac6a"),a("cadf"),a("06db"),a("b178")),s={name:"Logs",meta:function(){return{title:"Logs"}},data:function(){return{activeNames:["1"],filter:{user_id:"",loan_id:"",profile_type:"",date_range:{from:"",to:""},page:1,per_page:"100"},logData:[],text:"",entries:{to:"",total:""},minFilterLength:3}},computed:{},mounted:function(){},methods:{fetchLog:function(){this.$axios.get("log/fetch").then(function(t){this.logData=t.data.data,this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){console.error(t)}.bind(this))},refresher:function(t,e){this.filter.page++,this.$axios.get("log/filter",{params:this.filter}).then(function(t){var a;(a=this.logData).push.apply(a,o()(t.data.data)),this.entries.to=t.data.to,this.entries.total=t.data.total,e()}.bind(this)).catch(function(t){e(),console.error(t)}.bind(this))},filterLog:Object(l["e"])((function(){this.filter.page=1,this.$axios.get("log/filter",{params:this.filter}).then(function(t){this.logData=t.data.data,this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){console.error(t)}.bind(this))}),1e3),gotoLoan:function(t){this.$router.push({path:"loans",query:{id:t}})},gotoUser:function(t){},refreshEntries:function(){this.resetFilterData(),this.fetchLogInfo()},showAlert:function(t,e){var a=Alert.create({enter:"bounceInRight",leave:"bounceOutRight",color:t,html:e,position:"top-right",duration:3e3});setTimeout((function(){a.dismiss()}),3e3)}},filters:{firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},formatAmount:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatTransType:function(t){var e="",a=t.split("_");return a.forEach((function(t){e+=t.toUpperCase()+" "})),e}}},c=s,f=(a("dbd3"),a("2877")),d=Object(f["a"])(c,i,r,!1,null,"539b201a",null);e["default"]=d.exports},"64c6":function(t,e,a){},dbd3:function(t,e,a){"use strict";var i=a("64c6"),r=a.n(i);r.a}}]);
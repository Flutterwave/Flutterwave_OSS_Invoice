(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"9e19":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news-main q-pa-xl"},[s("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[s("q-expansion-item",{staticClass:"filter fit",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[s("div",{staticClass:"row q-gutter-md"},[s("q-select",{staticClass:"col-sm-3",attrs:{options:t.news_types,"emit-value":"","float-label":"Type of news",hint:"Profile type","map-options":""},on:{input:t.filterNews},model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}}),s("q-input",{staticClass:"col-sm-4",attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},on:{change:function(e){return t.filterNews()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}},[s("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[s("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return t.$refs.dateFrom.hide()}},model:{value:t.filter.date_range.from,callback:function(e){t.$set(t.filter.date_range,"from",e)},expression:"filter.date_range.from"}})],1)],1),s("q-input",{staticClass:"col-sm-4",attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},on:{change:function(e){return t.filterNews()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}},[s("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[s("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return t.$refs.dateTo.hide()}},model:{value:t.filter.date_range.to,callback:function(e){t.$set(t.filter.date_range,"to",e)},expression:"filter.date_range.to"}})],1)],1)],1)])],1),t.newsData.length?s("div",{staticClass:"row  q-pt-md"},[s("span",{staticClass:"col-sm-7"}),s("q-select",{staticClass:"col-sm-2",staticStyle:{"margin-top":"0","font-size":"12px"},attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],dense:"","emit-value":"","map-options":""},on:{change:t.filterNews},model:{value:t.filter.per_page,callback:function(e){t.$set(t.filter,"per_page",e)},expression:"filter.per_page"}}),s("span",{staticClass:"col-sm-1"}),s("span",{staticClass:"col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[t._v("\n            "+t._s(t.entries.to)+" out of "+t._s(t.entries.total))])],1):t._e(),s("div",{staticClass:"row justify-end q-mt-xl"},[s("q-btn",{staticClass:"no-shadow",attrs:{unelevated:"",color:"primary",label:"Add New",size:"sm"},on:{click:t.createNews}})],1),s("div",{staticClass:"row justify-center"},[t.newsData.length>0?s("table",{staticClass:"q-table loose"},[t._m(0),s("tbody",t._l(t.newsData,(function(e,a){return s("tr",{key:e.id},[s("td",{staticClass:"text-center"},[t._v(t._s(t._f("moment")(e.date_added,"DD-MM-YYYY")))]),s("td",{staticClass:"text-center"},[t._v(t._s(t._f("shortenText")(e.type_info.name)))]),s("td",{staticClass:"text-center"},[t._v(t._s(t._f("shortenText")(e.title)))]),s("td",{staticClass:"text-center"},[t._v(t._s(t._f("shortenText")(e.body)))]),s("td",{staticClass:"text-center"},[s("q-btn",{attrs:{color:"primary",flat:"",icon:"fa fa-edit",size:"xs"},on:{click:function(s){return t.makeEdit(e)}}})],1),s("td",{staticClass:"text-center"},[s("q-btn",{attrs:{color:"negative",flat:"",icon:"fa fa-trash-alt",size:"xs"},on:{click:function(e){return t.deleteNews(a)}}})],1)])})),0)]):t._e()]),s("div",[s("q-dialog",{model:{value:t.show_modal,callback:function(e){t.show_modal=e},expression:"show_modal"}},[s("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[s("q-card-section",[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"}})],1),s("q-card-section",[s("div",{staticStyle:{margin:"20px"}},[s("div",{staticClass:"row justify-between"},[s("q-select",{staticClass:"col-sm-5",attrs:{options:t.news_types,"emit-value":"","float-label":"Type of news",hint:"Profile type","map-options":""},model:{value:t.newsInfo.type,callback:function(e){t.$set(t.newsInfo,"type",e)},expression:"newsInfo.type"}}),s("q-input",{staticClass:"col-sm-5",attrs:{"float-label":"Title",hint:"Title",maxlength:"30"},model:{value:t.newsInfo.title,callback:function(e){t.$set(t.newsInfo,"title","string"===typeof e?e.trim():e)},expression:"newsInfo.title"}}),s("q-input",{staticClass:"col-sm-12",attrs:{"max-height":100,"float-label":"Title",hint:"Body",maxlength:"750",type:"textarea"},model:{value:t.newsInfo.body,callback:function(e){t.$set(t.newsInfo,"body","string"===typeof e?e.trim():e)},expression:"newsInfo.body"}})],1),s("div",{staticClass:"row justify-end"},[s("q-btn",{staticClass:"no-shadow",attrs:{unelevated:"",color:"primary",label:"Submit",size:"md"},on:{click:t.editNews}})],1)])])],1)],1)],1),t.newsData.length<t.entries.total?s("div",{staticClass:"row justify-center"},[s("q-infinite-scroll",{attrs:{handler:t.refresher,offset:500}},[s("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):t._e()])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("DATE")]),s("th",[t._v("TYPE")]),s("th",[t._v("TITLE")]),s("th",[t._v("BODY")]),s("th"),s("th")])])}],i=(s("6b54"),s("20d6"),s("967e")),r=s.n(i),o=(s("96cf"),s("fa84")),l=s.n(o),c=(s("ac6a"),s("cadf"),s("06db"),s("4db1")),f=s.n(c),d=s("b178"),p=s("1bdd"),u={name:"News",meta:function(){return{title:"News"}},components:{JsonExcel:p["a"]},data:function(){return{activeNames:["1"],filter:{type:"",date_range:{from:"",to:""},page:1,per_page:"100"},show_modal:!1,newsData:[],newsInfo:{id:"",type:"",title:"",body:""},news_types:[],editIndex:"",csv_fields:{"Full Name":"full_name",Email:"email_address",Story:"my_story",Date:"date_added"},entries:{to:"",total:""},minFilterLength:3}},computed:{},created:function(){this.fetchNewTypes(),this.filterNews()},methods:{refresher:function(t,e){this.filter.page++,this.$axios.get("news/filter",{params:this.filter}).then(function(t){var e;(e=this.newsData).push.apply(e,f()(t.data.data)),this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){this.$nprogress.done(),console.error(t)}.bind(this))},filterNews:Object(d["e"])((function(){this.filter.page=1,this.$axios.get("news/filter",{params:this.filter}).then(function(t){this.newsData=t.data.data,this.entries.to=t.data.to,this.entries.total=t.data.total}.bind(this)).catch(function(t){this.$nprogress.done(),console.error(t)}.bind(this))}),1e3),fetchNewTypes:function(){var t=this;return l()(r.a.mark((function e(){var s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.news_types.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$axios.get("news/fetchNewTypes");case 4:s=e.sent,s.data.status&&(t.news_types=s.data.types);case 6:case"end":return e.stop()}}),e)})))()},editNews:function(){var t=this;return l()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$q.dialog({title:"Confirm",message:"Are you sure about this?",ok:!0,cancel:!0,preventClose:!0});case 3:t.$axios.post("news/edit",t.newsInfo).then(function(t){if(!0===t.data.status){this.showAlert("positive","News updated successfully");var e=t.data.news,s=this.newsData.findIndex((function(t){return t.id===e.id}));console.log(s),s<0?this.newsData.unshift():this.newsData[s]=e,this.show_modal=!1,this.resetNewsInfo()}else this.showAlert("warning",t.data.msg)}.bind(t)).catch((function(){t.showAlert("negative","Error occurred"),t.$nprogress.done()})),e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))()},deleteNews:function(t){var e=this;return l()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,e.$q.dialog({title:"Confirm",message:"Are you sure about this?",ok:!0,cancel:!0,preventClose:!0});case 3:e.$axios.delete("news/delete/".concat(e.newsData[t].id)).then(function(e){!0===e.data.status&&(this.showAlert("positive","News deleted successfully"),this.newsData.splice(t,1))}.bind(e)).catch(function(t){this.showAlert("negative","Error occurred"),this.$nprogress.done()}.bind(e)),s.next=8;break;case 6:s.prev=6,s.t0=s["catch"](0);case 8:case"end":return s.stop()}}),s,null,[[0,6]])})))()},resetNewsInfo:function(){this.newsInfo.id="",this.newsInfo.type="",this.newsInfo.title="",this.newsInfo.body=""},makeEdit:function(t){this.newsInfo=t,this.show_modal=!0},createNews:function(){this.show_modal=!0},refreshEntries:function(){this.resetFilterData(),this.filterNews()},resetFilterData:function(){this.filter.type="",this.filter.date_range.from="",this.filter.date_range.to=""},showAlert:function(t,e){this.$q.notify({type:t,message:e,position:"top-right",timeout:5e3})},firstCaps:function(t){if(null!=t)return t.toString().charAt(0).toUpperCase()+t.toString().slice(1).toLowerCase()}},filters:{firstCaps:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},shortenText:function(t){return t.toString().length<=30?t:t.toString().slice(0,30)+"..."},profileType:function(t){return 0===t?"Borrower":"Lender"}}},h=u,w=(s("c06b"),s("2877")),m=Object(w["a"])(h,a,n,!1,null,"3b41a838",null);e["default"]=m.exports},b305:function(t,e,s){},c06b:function(t,e,s){"use strict";var a=s("b305"),n=s.n(a);n.a}}]);
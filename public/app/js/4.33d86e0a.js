(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"32d4":function(e,t,a){},"4c2c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"borrowers-main q-pa-xl"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"1em"}},[a("q-expansion-item",{staticClass:"filter",attrs:{"default-opened":"",icon:"fas fa-filter",label:"Filter"}},[a("div",{staticClass:"row q-gutter-md"},[a("q-input",{attrs:{clearable:"",label:"Borrower ID"},on:{input:function(t){e.filter.borrower_id.length>=2&&/^\d+$/.test(e.filter.borrower_id)&&e.filterBorrowers()}},model:{value:e.filter.borrower_id,callback:function(t){e.$set(e.filter,"borrower_id",t)},expression:"filter.borrower_id"}}),a("q-input",{attrs:{clearable:"",label:"Username"},on:{input:function(t){e.filter.username.length>=e.minFilterLength&&e.filterBorrowers()}},model:{value:e.filter.username,callback:function(t){e.$set(e.filter,"username",t)},expression:"filter.username"}}),a("q-input",{attrs:{clearable:"",label:"First Name"},on:{input:function(t){e.filter.f_name.length>=e.minFilterLength&&/^[a-zA-Z]+$/.test(e.filter.f_name)&&e.filterBorrowers()}},model:{value:e.filter.f_name,callback:function(t){e.$set(e.filter,"f_name",t)},expression:"filter.f_name"}}),a("q-input",{attrs:{clearable:"",label:"Last Name"},on:{input:function(t){e.filter.l_name.length>=e.minFilterLength&&/^[a-zA-Z]+$/.test(e.filter.l_name)&&e.filterBorrowers()}},model:{value:e.filter.l_name,callback:function(t){e.$set(e.filter,"l_name",t)},expression:"filter.l_name"}}),a("q-input",{attrs:{clearable:"",label:"Phone"},on:{input:function(t){e.filter.phone.length>=9&&!isNaN(e.filter.phone)&&e.filterBorrowers()}},model:{value:e.filter.phone,callback:function(t){e.$set(e.filter,"phone",t)},expression:"filter.phone"}}),a("q-input",{attrs:{clearable:"",label:"Email"},on:{input:function(t){e.filter.email.length>=e.minFilterLength&&e.filterBorrowers()}},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}}),a("q-input",{attrs:{clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:e.filter.date_range.from,callback:function(t){e.$set(e.filter.date_range,"from",t)},expression:"filter.date_range.from"}},[a("q-popup-proxy",{ref:"dateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.dateFrom.hide(),e.filterBorrowers()}},model:{value:e.filter.date_range.from,callback:function(t){e.$set(e.filter.date_range,"from",t)},expression:"filter.date_range.from"}})],1)],1),a("q-input",{attrs:{clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:e.filter.date_range.to,callback:function(t){e.$set(e.filter.date_range,"to",t)},expression:"filter.date_range.to"}},[a("q-popup-proxy",{ref:"dateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.dateTo.hide(),e.filterBorrowers()}},model:{value:e.filter.date_range.to,callback:function(t){e.$set(e.filter.date_range,"to",t)},expression:"filter.date_range.to"}})],1)],1),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Employment Model",value:"emp_model"}],"emit-value":"",hint:"Choose Category",label:"Category","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}}),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Employed",value:"employed"},{label:"Employed with Side Business",value:"employed_business"},{label:"Business Owner",value:"business"}],"emit-value":"",hint:"Status of Employment",label:"Employment status","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.employment_status,callback:function(t){e.$set(e.filter,"employment_status",t)},expression:"filter.employment_status"}}),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Has files",value:"has_files"},{label:"Has no files",value:"no_files"}],"emit-value":"",hint:"Has uploaded files?",label:"File","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.has_files,callback:function(t){e.$set(e.filter,"has_files",t)},expression:"filter.has_files"}}),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Yes",value:"true"},{label:"No",value:"false"}],"emit-value":"",hint:"Has repaid loan?",label:"Has Previous Loan(s)?","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.has_previous_loans,callback:function(t){e.$set(e.filter,"has_previous_loans",t)},expression:"filter.has_previous_loans"}}),a("q-field",{attrs:{hint:"For verification"}},[a("q-toggle",{attrs:{icon:"fas fa-home","icon-color":"white"},on:{change:function(t){return e.filterBorrowers()}},model:{value:e.filter.home_verified,callback:function(t){e.$set(e.filter,"home_verified",t)},expression:"filter.home_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[10,10],anchor:"top middle",self:"bottom middle"}},[e._v("\n                            Home\n                        ")])],1),a("q-toggle",{attrs:{icon:"fas fa-building","icon-color":"white"},on:{change:function(t){return e.filterBorrowers()}},model:{value:e.filter.work_verified,callback:function(t){e.$set(e.filter,"work_verified",t)},expression:"filter.work_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[10,10],anchor:"top middle",self:"bottom middle"}},[e._v("\n                            Office\n                        ")])],1),a("q-toggle",{attrs:{icon:"fas fa-mobile-alt","icon-color":"white"},on:{change:function(t){return e.filterBorrowers()}},model:{value:e.filter.phone_verified,callback:function(t){e.$set(e.filter,"phone_verified",t)},expression:"filter.phone_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[10,10],anchor:"top middle",self:"bottom middle"}},[e._v("\n                            Phone\n                        ")])],1),a("q-toggle",{attrs:{icon:"fas fa-credit-card","icon-color":"white"},on:{change:function(t){return e.filterBorrowers()}},model:{value:e.filter.bvn_verified,callback:function(t){e.$set(e.filter,"bvn_verified",t)},expression:"filter.bvn_verified"}},[a("q-tooltip",{attrs:{delay:1e3,offset:[10,10],anchor:"top middle",self:"bottom middle"}},[e._v("\n                            BVN\n                        ")])],1)],1),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Yes",value:"true"},{label:"No",value:"false"}],"emit-value":"",hint:"Is still interested?",label:"Interested?","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.is_interested,callback:function(t){e.$set(e.filter,"is_interested",t)},expression:"filter.is_interested"}}),a("q-select",{attrs:{options:[{label:"",value:""},{label:"Yes",value:"true"},{label:"No",value:"false"}],"emit-value":"",hint:"Is user blacklisted?",label:"Blacklisted?","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.is_blacklisted,callback:function(t){e.$set(e.filter,"is_blacklisted",t)},expression:"filter.is_blacklisted"}})],1),a("div",{staticClass:"row q-gutter-md",staticStyle:{"margin-top":"10px"}},[a("q-expansion-item",{staticClass:"col-sm-3",staticStyle:{color:"#979797"},attrs:{label:"Risk Assessment"}},[a("q-select",{attrs:{options:e.rat_options,"emit-value":"",hint:"Choose a category",label:"Select","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.risk_assessment,callback:function(t){e.$set(e.filter,"risk_assessment",t)},expression:"filter.risk_assessment"}}),a("q-input",{attrs:{disable:e.componentState.rat_dates_disable,clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:e.filter.rat_date_range.from,callback:function(t){e.$set(e.filter.rat_date_range,"from",t)},expression:"filter.rat_date_range.from"}},[a("q-popup-proxy",{ref:"ratDateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.ratDateFrom.hide(),e.filterBorrowers()}},model:{value:e.filter.rat_date_range.from,callback:function(t){e.$set(e.filter.rat_date_range,"from",t)},expression:"filter.rat_date_range.from"}})],1)],1),a("q-input",{attrs:{disable:e.componentState.rat_dates_disable,clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:e.filter.rat_date_range.to,callback:function(t){e.$set(e.filter.rat_date_range,"to",t)},expression:"filter.rat_date_range.to"}},[a("q-popup-proxy",{ref:"ratDateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.ratDateTo.hide(),e.filterBorrowers()}},model:{value:e.filter.rat_date_range.to,callback:function(t){e.$set(e.filter.rat_date_range,"to",t)},expression:"filter.rat_date_range.to"}})],1)],1)],1),a("q-expansion-item",{staticClass:"col-sm-3",staticStyle:{color:"#979797"},attrs:{label:"Taken Loan"}},[a("q-select",{attrs:{options:[{label:"",value:""},{label:"Has an active loan",value:"has_loan"},{label:"Has no active loan",value:"no_loan"}],"emit-value":"",hint:"Choose a category",label:"Select","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.active_loan,callback:function(t){e.$set(e.filter,"active_loan",t)},expression:"filter.active_loan"}}),a("q-input",{attrs:{disable:e.componentState.rat_dates_disable,clearable:"",hint:"Exactly from this date",label:"Date From"},model:{value:e.filter.loan_date_range.from,callback:function(t){e.$set(e.filter.loan_date_range,"from",t)},expression:"filter.loan_date_range.from"}},[a("q-popup-proxy",{ref:"ratDateFrom",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.loanDateFrom.hide(),e.filterBorrowers()}},model:{value:e.filter.loan_date_range.from,callback:function(t){e.$set(e.filter.loan_date_range,"from",t)},expression:"filter.loan_date_range.from"}})],1)],1),a("q-input",{attrs:{disable:e.componentState.rat_dates_disable,clearable:"",hint:"Exactly to this date",label:"Date To"},model:{value:e.filter.loan_date_range.to,callback:function(t){e.$set(e.filter.loan_date_range,"to",t)},expression:"filter.loan_date_range.to"}},[a("q-popup-proxy",{ref:"ratDateTo",attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){e.$refs.loanDateTo.hide(),e.filterBorrowers()}},model:{value:e.filter.loan_date_range.to,callback:function(t){e.$set(e.filter.loan_date_range,"to",t)},expression:"filter.loan_date_range.to"}})],1)],1)],1)],1)])],1),e.borrowersData.length?a("div",{staticClass:"row"},[a("json-excel",{staticClass:"col-sm-2",attrs:{fetch:e.exportData,fields:this.validate_csv_fields,name:"Borrowers.csv",type:"csv"}},[a("q-btn",{staticStyle:{"-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px"},attrs:{color:"secondary",icon:"fas fa-save",label:"Export",size:"sm",unelevated:""}})],1),a("span",{staticClass:"col-sm-5"}),a("q-select",{staticClass:"col-sm-2",attrs:{options:[{label:"50 per page",value:"50"},{label:"100 per page",value:"100"},{label:"200 per page",value:"200"},{label:"500 per page",value:"500"},{label:"1000 per page",value:"1000"}],dense:"","emit-value":"","map-options":""},on:{input:e.filterBorrowers},model:{value:e.filter.per_page,callback:function(t){e.$set(e.filter,"per_page",t)},expression:"filter.per_page"}}),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:" col-sm-2",staticStyle:{"font-weight":"lighter",color:"gray","font-size":"12px","padding-top":"14px"}},[e._v(e._s(e.entries.to)+" out of\n                "+e._s(e.entries.total))])],1):e._e(),a("div",{staticClass:"row justify-center borrower-card",staticStyle:{"margin-top":"30px"}},[e._l(e.borrowersData,(function(t,o){return[a("q-card",{key:t.id,class:t.not_interested||t.blacklisted?"col-md-2 col-sm-4 bg-grey-4 q-ma-sm shadow-1":t.requested_loan?"col-md-2 col-sm-4 bg-green-1 q-ma-sm shadow-1":"col-md-2 col-sm-4 q-ma-sm shadow-1",attrs:{inline:"",square:""}},[a("q-card-section",{staticClass:"q-pb-sm"},[a("span",{staticClass:"card-title"},[e._v("\n                        "+e._s(t.id)+"\n                        "),null!==t.comment_count&&t.comment_count.count>0?a("i",{staticClass:"text-orange-6 fa fa-circle",staticStyle:{"font-size":"6px",position:"relative",bottom:"7px"}}):e._e()]),a("div",{staticClass:"card-subtitle"},[e._v("\n                        "+e._s(e._f("firstCaps")(t.f_name))+" "+e._s(e._f("firstCaps")(t.l_name))+"\n                        "),a("br"),a("small",[a("time",[e._v(e._s(t.phone))])]),t.requested_loan?a("div",{staticStyle:{"margin-top":"7px",color:"darkgrey"}},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{flat:"",icon:"fas fa-external-link-alt ",label:"GOTO LOAN",size:"sm"},on:{click:function(a){return e.gotoLoan(t.requested_loan.id)}}})],1):e._e(),t.requested_loan||t.blacklisted?e._e():a("div",{staticStyle:{"margin-top":"7px",color:"darkgrey"}},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{flat:"",icon:"fas fa-coins ",label:"CREATE LOAN",size:"sm"},on:{click:function(a){return e.showLoanModal(t)}}})],1)])]),a("q-card-section",{staticClass:"row justify-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],class:t.bvn_verified?"text-positive":"text-negative",attrs:{flat:"",icon:"fas fa-credit-card",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[e._v("\n                            BVN verification\n                        ")]),t.bvn_verified?a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[e._v('Clicking "Continue" will '),a("em",[e._v("invalidate")]),e._v(" the "),a("strong",[e._v("BVN")]),e._v("\n                                of this borrower."),a("br"),e._v("\n                                Are you sure you will like to do this, darling?\n                            ")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right",attrs:{color:"negative",flat:""},on:{click:function(a){return e.unVerifyDocuments(t.id,"bvn",o)}}},[e._v("\n                                CONTINUE\n                            ")])],1):a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("div",[e._v('Clicking "Continue" will '),a("em",[e._v("verify")]),e._v(" the "),a("strong",[e._v("BVN")]),e._v("\n                                of this borrower."),a("br"),e._v("\n                                Are you sure you will like to do this, darling?\n                                "),a("p",{staticClass:"text-center",staticStyle:{"font-size":"14px","font-weight":"lighter",color:"#bbb","margin-bottom":"5px"}},[t.bvn_details?a("small",["bvn_record"===t.bvn_details.type?a("span",[e._v("\n                                            ("),a("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e._v("\n                                            "+e._s(t.bvn_details.f_name)+" "+e._s(t.bvn_details.l_name)+"\n                                            "),a("i",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),e._v("\n                                            "+e._s(t.bvn_details.dob)+"\n                                            "),a("i",{staticClass:"fa fa-phone",attrs:{"aria-hidden":"true"}}),e._v("\n                                            "+e._s(t.bvn_details.phone)+")\n                                        ")]):e._e()]):a("small",[e._v("\n                                        (No BVN Record)\n                                    ")])])]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"pull-left",attrs:{color:"primary",flat:""},on:{click:function(a){return e.resetBvnVerifyStatus(t.id,o)}}},[e._v("\n                                RESET\n                            ")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"pull-right",attrs:{color:"positive",flat:""},on:{click:function(a){return e.verifyDocuments(t.id,"bvn",o)}}},[e._v("\n                                CONTINUE\n                            ")])],1)],1),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],class:t.phone_verified?"text-positive":"text-negative",attrs:{flat:"",icon:"fas fa-mobile-alt",size:"xs"}},[a("q-tooltip",{attrs:{delay:1e3,anchor:"top middle",self:"bottom middle"}},[e._v("\n                            Phone verification\n                        ")]),t.phone_verified?a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[e._v('Clicking "Continue" will '),a("em",[e._v("invalidate")]),e._v(" the "),a("strong",[e._v("phone\n                                number")]),e._v("\n                                of this borrower."),a("br"),e._v("\n                                Are you sure you will like to do this, sweetie?\n                            ")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"pull-right",attrs:{color:"negative",flat:""},on:{click:function(a){return e.unVerifyDocuments(t.id,"phone",o)}}},[e._v("\n                                CONTINUE\n                            ")])],1):a("q-menu",{attrs:{"content-style":{padding:"10px 20px"},anchor:"top left",self:"bottom left"}},[a("p",[e._v('Clicking "Continue" will '),a("em",[e._v("verify")]),e._v(" the "),a("strong",[e._v("phone number")]),e._v("\n                                of this borrower."),a("br"),e._v("\n                                Are you sure you will like to do this, sweetie?\n                            ")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"},{name:"ripple",rawName:"v-ripple"}],staticClass:"pull-right",attrs:{color:"positive",flat:""},on:{click:function(a){return e.verifyDocuments(t.id,"phone",o)}}},[e._v("\n                                CONTINUE\n                            ")])],1)],1)],1),a("q-card-actions",{staticClass:"justify-center"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{color:"darkgrey"},attrs:{flat:"",icon:"fas fa-envelope-open",label:"CONTACT"},on:{click:function(a){return e.showContactModal({email:t.email,phone:t.phone,id:t.id})}}}),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{color:"darkgrey"},attrs:{flat:"",icon:"fas fa-eye",label:"VIEW"},on:{click:function(a){return e.showInfoModal(t)}}})],1)],1)]}))],2),a("div",[a("q-dialog",{model:{value:e.infoModal,callback:function(t){e.infoModal=t},expression:"infoModal"}},[a("q-card",{staticStyle:{width:"900px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"},on:{click:e.closeInfoModal}})],1),a("q-card-section",[a("div",{staticStyle:{margin:"0 50px 50px"}},[a("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"2em"}},[a("div",{staticClass:"avenir-next-thin",staticStyle:{"font-size":"3rem"}},[e._v("\n                                "+e._s(e.borrowerInfo.id)+"\n                            ")]),a("small",{staticStyle:{color:"lightgrey"}},[e._v("\n                                "+e._s(e._f("moment")(e.borrowerInfo.date_joined,"MMM Do YYYY, h:mm:ss A"))+"\n                            ")])]),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Middle Name")]),a("p",[e._v(e._s(e._f("firstCaps")(e.borrowerInfo.m_name)))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Username")]),a("p",[e._v(e._s(e._f("firstCaps")(e.borrowerInfo.username)))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Email")]),e.editInfo.email.state?a("q-input",{on:{blur:function(t){return e.editDetails(e.borrowerInfo.id,"email",e.borrowerInfo.email)}},model:{value:e.borrowerInfo.email,callback:function(t){e.$set(e.borrowerInfo,"email",t)},expression:"borrowerInfo.email"}}):a("p",{on:{dblclick:function(t){e.editInfo.email.state=!0}}},[e._v(e._s(e.borrowerInfo.email))])],1),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Date of Birth")]),a("p",[e._v(e._s(e._f("moment")(e.borrowerInfo.date_of_birth,"MMM Do, YYYY")))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Gender")]),a("p",[e._v(e._s(1==e.borrowerInfo.gender?"Male":"Female"))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Address")]),a("p",[e._v(e._s(e.borrowerInfo.street_address))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Home Landmark")]),a("p",[e._v(e._s(""===e.borrowerInfo.landmark?"--":e.borrowerInfo.landmark))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Home Area")]),a("p",[e._v(e._s(""===e.borrowerInfo.area?"--":e.borrowerInfo.area))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("City/State")]),a("p",[e._v("\n                                        "+e._s(e._f("firstCaps")(null==e.borrowerInfo.home_city?e.borrowerInfo.town:e.borrowerInfo.home_city.city_name))+"/Lagos ")])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Locative Situation")]),Object.keys(e.borrowerInfo).length>0&&Object.keys(e.borrowerInfo.loan_data).length>0?a("p",{domProps:{textContent:e._s(e.formatLocative(e.borrowerInfo.loan_data[0].locative))}}):a("p",[e._v("--")])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Employment Status")]),a("p",[e._v(e._s("0"==e.borrowerInfo.employment_status?"--":e.borrowerInfo.employment_status))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Employer")]),a("p",[e._v(e._s(e.borrowerInfo.business_name))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Employment Address")]),a("p",[e._v(e._s(e.borrowerInfo.business_address))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Employment City/State")]),a("p",[e._v("\n                                        "+e._s(e._f("firstCaps")(null==e.borrowerInfo.business_city?e.borrowerInfo.town:e.borrowerInfo.business_city.city_name))+"/Lagos")])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Business Landmark")]),a("p",[e._v(e._s(""===e.borrowerInfo.business_landmark?"--":e.borrowerInfo.business_landmark))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Business Area")]),a("p",[e._v(e._s(""===e.borrowerInfo.business_area?"--":e.borrowerInfo.business_area))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Requested Amount")]),Object.keys(e.borrowerInfo).length>0&&e.borrowerInfo.requested_loan?a("p",[e._v("\n                                        ₦"+e._s(e._f("formatAmount")(e.borrowerInfo.requested_loan.amount)))]):a("p",[e._v("--")])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Cash Inflow")]),Object.keys(e.borrowerInfo).length>0&&Object.keys(e.borrowerInfo.loan_data).length>0?a("p",[e._v("\n                                        ₦"+e._s(e._f("formatAmount")(e.borrowerInfo.loan_data[0].cash_inflow)))]):a("p",[e._v("--")])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Cash Outflow")]),Object.keys(e.borrowerInfo).length>0&&Object.keys(e.borrowerInfo.loan_data).length>0?a("p",[e._v("\n                                        ₦"+e._s(e._f("formatAmount")(e.borrowerInfo.loan_data[0].cash_outflow)))]):a("p",[e._v("--")])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("BVN")]),a("p",[e._v(e._s(e.borrowerInfo.bvn))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Transaction PIN")]),a("p",[e._v(e._s(e.borrowerInfo.transaction_pin))])]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Bank Details")]),a("p",[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"secondary",flat:"",icon:"fas fa-external-link-alt ",label:"GOTO BANK DETAILS",size:"sm"},on:{click:function(t){return e.gotoBankInfo(e.borrowerInfo.id)}}})],1)]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Status")]),a("p",[a("q-toggle",{attrs:{label:e.borrowerInfo.blacklisted?"Blacklisted":"Whitelisted",color:"red-10"},on:{input:function(t){return e.showDialog("blacklist_user",e.borrowerInfo.id,e.borrowerInfo.blacklisted)}},model:{value:e.borrowerInfo.blacklisted,callback:function(t){e.$set(e.borrowerInfo,"blacklisted",t)},expression:"borrowerInfo.blacklisted"}})],1)]),a("div",{staticClass:"col-sm-4 col-xs-12"},[a("strong",[e._v("Not Interested")]),a("p",[a("q-toggle",{attrs:{color:"red-10"},on:{input:function(t){return e.showDialog("user_not_interested",e.borrowerInfo.id,e.borrowerInfo.not_interested)}},model:{value:e.borrowerInfo.not_interested,callback:function(t){e.$set(e.borrowerInfo,"not_interested",t)},expression:"borrowerInfo.not_interested"}})],1)]),a("div",{staticClass:"col-md-12 col-sm-12"},[a("strong",[e._v("Biography")]),a("p",[e._v(e._s(e.borrowerInfo.bio))])]),a("div",{staticClass:"col-md-12 col-sm-12",staticStyle:{color:"gray","font-family":"'Avenir Next Thin', sans-serif"},attrs:{id:"admin_comments"}},[a("hr",{staticClass:"lingrad"}),!("comments"in e.borrowerInfo)||e.commentVars.loading?a("div",{staticClass:"text-center",staticStyle:{"padding-top":"20px"}},[a("p",[a("q-spinner-bars",{attrs:{size:20,color:"grey-6"}})],1)]):a("div",[a("div",{staticStyle:{"padding-top":"10px","line-height":"25px"}},[Object.keys(e.borrowerInfo).length&&e.borrowerInfo.comments.length>0?e._l(e.borrowerInfo.comments,(function(t,o){return a("comment",{key:t.id,class:"LOAN"===t.entity?"text-cyan-6":"",attrs:{commentInfo:t,userID:e.commentVars.user_id,entity:"BORROWER"},on:{"delete-comment":function(t){return e.onDeleteComment(o)},"edit-comment":function(t){return e.onEditComment(o,t)}}})})):a("span",[e._v("No comments")]),e.commentVars.addNewFlag?a("new-comment",{attrs:{entity_id_:e.borrowerInfo.id,entity:"BORROWER"},on:{"cancel-comment":function(t){e.commentVars.addNewFlag=!1},"save-comment":e.onAddComment}}):e._e()],2),a("div",{staticStyle:{"margin-top":"20px"}},[Object.keys(e.borrowerInfo).length&&e.borrowerInfo.comments.length>0?[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],attrs:{disabled:e.commentVars.prevPageFlag,color:"amber",flat:"",round:"",size:"8px"},on:{click:function(t){return e.fetchComments("prev")}}},[a("q-icon",{attrs:{name:"fas fa-caret-left"}})],1),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],attrs:{disabled:e.commentVars.nextPageFlag,color:"amber",flat:"",round:"",size:"8px"},on:{click:function(t){return e.fetchComments("next")}}},[a("q-icon",{attrs:{name:"fas fa-caret-right"}})],1)]:e._e(),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.commentVars.addNewFlag,expression:"!commentVars.addNewFlag"}],staticClass:"float-right",attrs:{color:"amber",flat:"",round:"",size:"10px"},on:{click:function(t){e.commentVars.addNewFlag=!0}}},[a("q-icon",{attrs:{name:"far fa-comment-dots"}})],1)],2)])])])])])])],1)],1),a("q-dialog",{model:{value:e.contactModal,callback:function(t){e.contactModal=t},expression:"contactModal"}},[a("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[a("q-card-section",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"}})],1),a("q-card-section",[a("div",{staticStyle:{margin:"0 50px"}},[a("q-tabs",{attrs:{"active-color":"sidebar-blue",color:"grey-6"},model:{value:e.contactTab,callback:function(t){e.contactTab=t},expression:"contactTab"}},[a("q-tab",{attrs:{icon:"fas fa-envelope",name:"email"}}),a("q-tab",{attrs:{icon:"fas fa-phone",name:"sms"}})],1),a("q-tab-panels",{attrs:{animated:""},model:{value:e.contactTab,callback:function(t){e.contactTab=t},expression:"contactTab"}},[a("q-tab-panel",{attrs:{name:"email"}},[a("div",{staticClass:"row justify-center"},[a("q-input",{staticClass:"col-sm-10 q-my-md",attrs:{label:"Email"},model:{value:e.contactData.email,callback:function(t){e.$set(e.contactData,"email",t)},expression:"contactData.email"}}),a("q-input",{staticClass:"col-sm-10",attrs:{label:"Subject"},model:{value:e.contactData.subject,callback:function(t){e.$set(e.contactData,"subject",t)},expression:"contactData.subject"}}),a("q-input",{staticClass:"col-sm-10 q-my-md",attrs:{"max-height":10,"min-rows":5,label:"Message",type:"textarea"},model:{value:e.contactData.message,callback:function(t){e.$set(e.contactData,"message",t)},expression:"contactData.message"}}),a("div",{staticClass:"col-sm-12 q-mt-sm"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right",attrs:{color:"positive",label:"Send",outline:""},on:{click:function(t){return e.sendEmail(e.contactData.id,e.contactData.subject,e.contactData.message)}}})],1)],1)]),a("q-tab-panel",{attrs:{name:"sms"}},[a("div",{staticClass:"row justify-center"},[a("q-input",{staticClass:"col-sm-10 q-mt-md",attrs:{maxlength:11,counter:"",label:"Phone Number"},model:{value:e.contactData.phone,callback:function(t){e.$set(e.contactData,"phone",t)},expression:"contactData.phone"}}),a("q-input",{staticClass:"col-sm-10",attrs:{"max-height":10,maxlength:250,"min-rows":5,counter:"",label:"Message",type:"textarea"},model:{value:e.contactData.message,callback:function(t){e.$set(e.contactData,"message",t)},expression:"contactData.message"}}),a("div",{staticClass:"col-sm-12 q-mt-sm"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"float-right q-mt-md",attrs:{color:"positive",label:"SEND",outline:""},on:{click:function(t){return e.sendSMS(e.contactData.id,e.contactData.message)}}})],1)],1)])],1)],1)])],1)],1),a("q-dialog",{model:{value:e.loanModal,callback:function(t){e.loanModal=t},expression:"loanModal"}},[a("q-card",{staticStyle:{width:"600px","max-width":"70vw"}},[a("q-card-section",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{flat:"",icon:"close",size:"sm"}})],1),a("q-card-section",[a("div",{staticStyle:{margin:"20px 50px"}},[a("div",[a("div",{staticClass:"row q-gutter-md"},[a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{hint:e.errors.first("risk score"),"numeric-keyboard-toggle":!0,label:"Risk Score",name:"risk score",type:"number"},model:{value:e.loanData.risk_score,callback:function(t){e.$set(e.loanData,"risk_score",t)},expression:"loanData.risk_score"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{"min-width":"135px"},attrs:{hint:e.errors.first("loan grade"),options:e.loan_grade_options,label:"Loan Grade",name:"loan grade"},model:{value:e.loanData.loan_grade,callback:function(t){e.$set(e.loanData,"loan_grade",t)},expression:"loanData.loan_grade"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{"min-width":"135px"},attrs:{hint:e.errors.first("purpose"),options:e.loan_purpose,label:"Purpose",name:"purpose"},model:{value:e.loanData.purpose,callback:function(t){e.$set(e.loanData,"purpose",t)},expression:"loanData.purpose"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],attrs:{hint:e.errors.first("interest"),"numeric-keyboard-toggle":!0,label:"Interest Rate",name:"interest",type:"number"},model:{value:e.loanData.interest_rate,callback:function(t){e.$set(e.loanData,"interest_rate",t)},expression:"loanData.interest_rate"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{"min-width":"135px"},attrs:{hint:e.errors.first("term"),options:e.loan_term,label:"Loan Term",name:"term"},model:{value:e.loanData.term,callback:function(t){e.$set(e.loanData,"term",t)},expression:"loanData.term"}}),a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{"min-width":"135px"},attrs:{hint:e.errors.first("active"),options:[{label:"False",value:"0"},{label:"True",value:"1"}],label:"Active",name:"active"},model:{value:e.loanData.active,callback:function(t){e.$set(e.loanData,"active",t)},expression:"loanData.active"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:e.errors.first("writeup"),"max-height":10,"min-rows":2,label:"Write up",name:"writeup",type:"textarea"},model:{value:e.loanData.writeup,callback:function(t){e.$set(e.loanData,"writeup",t)},expression:"loanData.writeup"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{hint:e.errors.first("amount"),"numeric-keyboard-toggle":!0,label:"Amount",name:"amount",type:"number"},model:{value:e.loanData.amount,callback:function(t){e.$set(e.loanData,"amount",t)},expression:"loanData.amount"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:e.errors.first("title"),label:"Title",name:"title"},model:{value:e.loanData.title,callback:function(t){e.$set(e.loanData,"title",t)},expression:"loanData.title"}})],1),a("div",{staticClass:"text-center q-mt-xl"},[a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"positive",flat:"",label:"CREATE LOAN"},on:{click:function(t){return e.createLoan(e.loanData)}}})],1)])])])],1)],1)],1),e.borrowersData.length<e.entries.total?a("div",{staticClass:"row justify-center"},[a("q-infinite-scroll",{attrs:{handler:e.refresher,offset:500}},[a("q-spinner-puff",{staticStyle:{"margin-top":"30px"},attrs:{slot:"message",size:40,color:"primary"},slot:"message"})],1)],1):e._e()])},s=[],r=(a("8e6e"),a("8a81"),a("456d"),a("6b54"),a("a481"),a("ac6a"),a("cadf"),a("06db"),a("4db1")),n=a.n(r),i=a("967e"),l=a.n(i),c=(a("96cf"),a("fa84")),d=a.n(c),m=a("c47a"),f=a.n(m),u=a("b178"),p=a("1bdd"),v=a("6cd4"),b=a("79d3");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={name:"Borrowers",meta:function(){return{title:"Borrowers"}},components:{JsonExcel:p["a"],Comment:v["a"],NewComment:b["a"]},data:function(){return{activeNames:["1"],filter:{borrower_id:this.$route.query.id,f_name:"",l_name:"",username:"",phone:"",email:"",date_range:{from:"",to:""},rat_date_range:{from:"",to:""},loan_date_range:{from:"",to:""},risk_assessment:"",employment_status:"",category:"",active_loan:"",has_files:"",home_verified:!1,work_verified:!1,phone_verified:!1,bvn_verified:!1,is_interested:"",is_blacklisted:"",has_previous_loans:"",page:1,per_page:"50"},componentState:{rat_dates_disable:!0},borrowersData:[],borrowerInfo:{},editInfo:{email:{state:!1,loading:!1}},text:"",contactData:{id:"",phone:"",email:"",subject:"",message:""},entries:{to:"",total:""},minFilterLength:3,infoModal:!1,contactModal:!1,contactTab:"email",loanModal:!1,commentVars:{addNewFlag:!1,page:1,nextPageFlag:!1,prevPageFlag:!0,loading:!1,user_id:null},loanData:{},rat_options:[{label:"",value:""},{label:"Has not taken",value:"no_test"},{label:"Has taken",value:"taken_test"},{label:"Has failed (old)",value:"failed_test_old"},{label:"Has failed (new)",value:"failed_test_new"},{label:"Has passed (old)",value:"passed_test_old"},{label:"Has passed (new)",value:"passed_test_new"},{label:"Has passed, no loan (new)",value:"passed_test_no_loan_new"},{label:"Has passed, created loan (new)",value:"passed_test_created_loan_new"}],loan_grade_options:[{label:"A++",value:"A++"},{label:"A+",value:"A+"},{label:"A",value:"A"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B",value:"B"},{label:"B-",value:"B-"},{label:"C+",value:"C+"},{label:"C",value:"C"},{label:"C-",value:"C-"}],loan_purpose:[{label:"Medical Expenses",value:"1"},{label:"Education",value:"2"},{label:"Vacation",value:"3"},{label:"Household",value:"4"},{label:"Rent",value:"5"},{label:"Debt Payoff",value:"6"},{label:"Car Financing",value:"7"},{label:"Moving and Relocation",value:"8"},{label:"Mortgage",value:"9"},{label:"Equipment Purchase",value:"10"},{label:"Working Capital",value:"11"},{label:"Staff Recruitment",value:"12"},{label:"Events",value:"13"},{label:"Business Opportunity (Side Hustle)",value:"14"}],loan_term:[{label:"3 months",value:"3"},{label:"6 months",value:"6"},{label:"12 months",value:"12"},{label:"18 months",value:"18"},{label:"24 months",value:"24"}]}},computed:{validate_csv_fields:function(){var e={"Borrower ID":"id","First Name":"f_name","Last Name":"l_name",Phone:"phone",Email:"email","Street Address":"street_address",Landmark:"landmark",Area:"area",Town:"town",LGA:"lga",State:"state","Business Name":"business_name","Business Address":"business_address","Business Landmark":"business_landmark","Business Area":"business_area","Business Town":"business_town","Business LGA":"business_lga","Business State":"business_state"},t={};return"has_loan"===this.filter.active_loan&&(t={"Duration of Loan":"requested_loan.term","Interest Rating":"requested_loan.interest_rate","Amount Requested":"requested_loan.amount","Credit Rating":"requested_loan.loan_grade","Document Status":"requested_loan.active","Request Date":"requested_loan.date_created","Days to Maturity":"requested_loan.funding_time_elapsed"}),_(_({},e),t)}},mounted:function(){this.$route.query.id&&this.filterBorrowers()},methods:{exportData:function(){var e=this;return d()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("borrowers/filter",{params:_({export:!0},e.filter)});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchBorrowers:function(){this.$axios.get("borrowers/fetch").then(function(e){this.borrowersData=e.data.data}.bind(this)).catch(function(e){console.error(e)}.bind(this))},fetchComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"prev"===e?this.commentVars.page>1&&this.commentVars.page--:"next"===e&&this.commentVars.page++,this.$axios.get("borrowers/fetchcomments",{params:{borrower_id:this.borrowerInfo.id,page:this.commentVars.page}}).then(function(e){this.commentVars.loading=!1,null===e.data.comments.next_page_url?this.commentVars.nextPageFlag=!0:this.commentVars.nextPageFlag=!1,null===e.data.comments.prev_page_url?this.commentVars.prevPageFlag=!0:this.commentVars.prevPageFlag=!1,this.commentVars.user_id=e.data.user,this.$set(this.borrowerInfo,"comments",e.data.comments.data)}.bind(this)).catch(function(e){console.error(e)}.bind(this))},refresher:function(e,t){this.filter.page++,this.$axios.get("borrowers/filter",{params:this.filter}).then(function(e){var a;(a=this.borrowersData).push.apply(a,n()(e.data.data)),this.entries.to=e.data.to,this.entries.total=e.data.total,t()}.bind(this)).catch(function(e){t(),console.error(e)}.bind(this))},showInfoModal:function(e){this.borrowerInfo=e,this.infoModal=!0,this.commentVars.page=1,this.commentVars.nextPageFlag=!1,this.fetchComments()},showContactModal:function(e){this.contactData.phone=e.phone,this.contactData.email=e.email,this.contactData.id=e.id,this.contactModal=!0},showLoanModal:function(e){this.borrowerInfo=e,this.loanModal=!0},closeInfoModal:function(){this.borrowerInfo={},this.infoModal=!1,this.commentVars.addNewFlag=!1},filterBorrowers:Object(u["e"])((function(){""===this.filter.risk_assessment?this.$set(this.componentState,"rat_dates_disable",!0):this.$set(this.componentState,"rat_dates_disable",!1),this.filter.page=1,this.$axios.get("borrowers/filter",{params:this.filter}).then(function(e){this.borrowersData=e.data.data,this.entries.to=e.data.to,this.entries.total=e.data.total}.bind(this)).catch(function(e){console.error(e)}.bind(this))}),1e3),verifyDocuments:function(e,t,a){this.$axios.post("borrowers/verify",{id:e,field:t}).then(function(e){if(e.data){var o=this.firstCaps(t);this.showAlert("positive",o+" verification successful"),"bvn"===t?this.borrowersData[a].bvn_verified=1:"phone"===t&&(this.borrowersData[a].phone_verified=1)}}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))},unVerifyDocuments:function(e,t,a){this.$axios.post("borrowers/unverify",{id:e,field:t}).then(function(e){if(e.data){var o=this.firstCaps(t);this.showAlert("positive",o+" invalidation successful"),"bvn"===t?this.borrowersData[a].bvn_verified=0:"phone"===t&&(this.borrowersData[a].phone_verified=0)}}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))},resetBvnVerifyStatus:function(e,t){this.$axios.post("borrowers/resetbvnverifystatus",{id:e}).then(function(e){e.data.status?this.showAlert("positive","BVN status reset successful"):"NO_RECORD"===e.data.desc&&this.showAlert("warning","No BVN verification trial")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))},gotoLoan:function(e){this.$router.push({path:"loans",query:{id:e}})},gotoBankInfo:function(e){this.$router.push({path:"bankinfo",query:{id:e,type:"0"}})},onEditComment:function(e,t){this.showAlert("positive","Comment updated successfully");var a=t.comment;this.borrowerInfo.comments[e].comment=a},onDeleteComment:function(e){this.showAlert("positive","Comment deleted successfully"),this.borrowerInfo.comments.splice(e,1),0===this.borrowerInfo.comments.length&&(this.commentVars.loading=!0,this.fetchComments("prev"))},onAddComment:function(e){this.showAlert("positive","Comment added successfully"),this.commentVars.addNewFlag=!1,1===this.commentVars.page&&this.borrowerInfo.comments.unshift(e)},sendEmail:function(e,t,a){this.$axios.post("borrowers/sendmail",{id:e,subject:t,message:a}).then(function(e){e.data.status?this.showAlert("positive","Mail sent successfully"):this.showAlert("negative","Something went wrong")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))},sendSMS:function(e,t){this.$axios.post("borrowers/sendsms",{id:e,message:t}).then(function(e){e.data.status&&this.showAlert("positive","SMS sent successfully")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))},editDetails:function(e,t,a){this.editInfo.email.state=!1,this.$axios.post("borrowers/editDetails",{borrower_id:e,field:t,data:a}).then(function(e){e.data.status&&this.showAlert("positive","Email updated successfully")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred")}.bind(this))},blacklistUser:function(e,t){this.$axios.post("borrowers/blacklistuser",{borrower_id:e,state:t}).then(function(e){e.data.status&&this.showAlert("positive",t?"Borrower blacklisted successfully":"Borrower whitelisted successfully")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),this.borrowerInfo.blacklisted=!this.borrowerInfo.blacklisted,this.$nprogress.done()}.bind(this))},userNotInterested:function(e,t){this.$axios.post("borrowers/usernotinterested",{borrower_id:e,state:t}).then(function(e){e.data.status&&this.showAlert("positive",t?"Borrower tagged successfully":"Borrower untagged successfully")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),this.borrowerInfo.not_interested=!this.borrowerInfo.not_interested,this.$nprogress.done()}.bind(this))},createLoan:function(e){var t=this;this.$validator.validateAll().then((function(a){a&&t.$axios.post("borrowers/createloan",{borrower_id:t.borrowerInfo.id,loan_data:e}).then(function(e){e.data.status&&(this.showAlert("positive","Loan created successfully"),this.borrowerInfo.requested_loan=e.data.info,this.loanModal=!1)}.bind(t)).catch(function(e){422===e.response.status?this.showAlert("negative","Please check data and try again"):this.showAlert("negative","Operation error occurred"),this.$nprogress.done()}.bind(t))}))},formatLocative:function(e){switch(e){case 0:return"Own House (fully paid for)";case 1:return"Own House Mortgage";case 2:return"Rented House";case 3:return"Owned Apartment";case 4:return"Rented Apartment";case 5:return"Shared Living";case 6:return"Unpaid Living";default:return"Unknown"}},refreshEntries:function(){this.resetFilterData(),this.fetchBorrowers()},resetFilterData:function(){this.filter.borrower_id="",this.filter.f_name="",this.filter.l_name="",this.filter.username="",this.filter.phone="",this.filter.email=""},showAlert:function(e,t){this.$q.notify({type:e,message:t,position:"top-right",timeout:4e3})},firstCaps:function(e){if(null!=e)return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},showDialog:function(e,t){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$q.dialog({title:"Confirm",message:"Are you sure you want to do this?",ok:"Yes, Please",cancel:"Cancel"}).then((function(){"blacklist_user"===e?a.blacklistUser(t,o):"user_not_interested"===e&&a.userNotInterested(t,o)})).catch((function(){"blacklist_user"===e?a.borrowerInfo.blacklisted=!a.borrowerInfo.blacklisted:"user_not_interested"===e&&(a.borrowerInfo.not_interested=!a.borrowerInfo.not_interested)}))}},filters:{firstCaps:function(e){if(null!=e)return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},formatAmount:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},g=w,y=(a("511a"),a("2877")),x=Object(y["a"])(g,o,s,!1,null,"430e80e8",null);t["default"]=x.exports},"511a":function(e,t,a){"use strict";var o=a("55d0"),s=a.n(o);s.a},"55d0":function(e,t,a){},"6cd4":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment",staticStyle:{"line-height":"25px"}},[!1===e.edit_?a("div",[a("span",{staticStyle:{"font-size":"14px","letter-spacing":".6px"}},[a("i",{staticClass:"fas fa-user-edit",staticStyle:{"font-size":"8px"}}),e._v(" "+e._s(e.comment)+" -\n                "),a("span",{staticClass:"text-green-8",staticStyle:{"font-size":"12px"}},[e._v("\n                    "+e._s(e.admin)+"\n                ")]),a("span",{staticClass:"text-orange-8",staticStyle:{"font-size":"10px","font-style":"italic"}},[e._v("\n                    "+e._s(e._f("moment")(e.date,"MMM Do YYYY, hh:mm A "))+"\n                ")])]),e._v("\n           \n        "),e.userID===e.admin_id&&e.editable?[a("q-btn",{attrs:{color:"faded",flat:"",icon:"fas fa-pencil-alt",label:"Edit"},on:{click:function(t){e.edit_=!0}}}),a("q-btn",{attrs:{color:"faded",flat:"",icon:"fas fa-trash-alt",label:"Delete"},on:{click:function(t){return e.deleteComment()}}})]:e._e()],2):a("div",[a("q-input",{attrs:{"max-height":10,"min-rows":2,"float-label":"Edit a comment",type:"textarea"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),a("div",{staticClass:"q-mt-md"},[a("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"fas fa-long-arrow-alt-left",size:"sm",title:"Cancel",unelevated:""},on:{click:function(t){e.edit_=!1}}}),a("q-btn",{attrs:{color:"positive",icon:"fas fa-save",size:"sm",title:"Save",unelevated:""},on:{click:function(t){return e.editComment()}}})],1)],1)])},s=[],r={props:["commentInfo","userID","entity","editable"],data:function(){return{comment_id:this.commentInfo.id,comment:this.commentInfo.comment,admin:this.commentInfo.admin.username,endpoint:this.entity.toLowerCase()+"s",admin_id:this.commentInfo.admin.id,entity_id:this.commentInfo.entity_id,date:this.commentInfo.date_created,edit_:!1}},methods:{editComment:function(){this.$axios.post(this.endpoint+"/editcomment",{comment_id:this.comment_id,entity_id:this.entity_id,comment:this.comment}).then(function(e){e.data.status&&(this.$emit("edit-comment",{entity_id:this.entity_id,comment:this.comment}),this.edit_=!1)}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))},deleteComment:function(){this.$axios.post(this.endpoint+"/deletecomment",{comment_id:this.comment_id}).then(function(e){e.data.status&&this.$emit("delete-comment")}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))}}},n=r,i=(a("d126"),a("2877")),l=Object(i["a"])(n,o,s,!1,null,"4a08e1a2",null);t["a"]=l.exports},"79d3":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment",staticStyle:{"line-height":"25px"}},[a("q-input",{attrs:{type:"textarea","float-label":"Write a comment","max-height":10,"min-rows":2},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),a("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"fas fa-long-arrow-alt-left",size:"sm",unelevated:"",title:"Cancel"},on:{click:function(t){return e.$emit("cancel-comment")}}}),a("q-btn",{staticClass:"q-mr-md",attrs:{color:"positive",icon:"fas fa-save",size:"sm",title:"Save"},on:{click:function(t){return e.saveComment()}}})],1)},s=[],r={props:["entity_id_","entity"],data:function(){return{comment:"",entity_id:this.entity_id_,endpoint:this.entity.toLowerCase()+"s"}},methods:{saveComment:function(){this.$axios.post(this.endpoint+"/savecomment",{entity_id:this.entity_id_,comment:this.comment}).then(function(e){e.data.status&&this.$emit("save-comment",e.data.comment)}.bind(this)).catch(function(e){this.showAlert("negative","Operation error occurred"),console.error(e)}.bind(this))}}},n=r,i=(a("ccc4"),a("2877")),l=Object(i["a"])(n,o,s,!1,null,"22bd9976",null);t["a"]=l.exports},b51c:function(e,t,a){},ccc4:function(e,t,a){"use strict";var o=a("32d4"),s=a.n(o);s.a},d126:function(e,t,a){"use strict";var o=a("b51c"),s=a.n(o);s.a}}]);